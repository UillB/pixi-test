var Tiled;!function i(r,o,a){function s(e,t){if(!o[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=o[e]={exports:{}},r[e][0].call(n.exports,function(t){return s(r[e][1][t]||t)},n,n.exports,i,r,o,a)}return o[e].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(t,n,r){(function(e){(function(){var t=function(){this._tweens={},this._tweensAddedDuringUpdate={}};t.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:s.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i,s=new t;s.Group=t,s._nextId=0,s.nextId=function(){return s._nextId++},"undefined"==typeof self&&void 0!==e&&e.hrtime?s.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?s.now=self.performance.now.bind(self.performance):void 0!==Date.now?s.now=Date.now:s.now=function(){return(new Date).getTime()},s.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||s,this._id=s.nextId()},s.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?s.now()+parseFloat(t):t:s.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i,r,o,a;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,i=this._easingFunction(n),this._valuesEnd)void 0!==this._valuesStart[e]&&(r=this._valuesStart[e]||0,(o=this._valuesEnd[e])instanceof Array?this._object[e]=this._interpolationFunction(o,i):"number"==typeof(o="string"==typeof o?"+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o):o)&&(this._object[e]=r+(o-r)*i));if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)"string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo&&(a=this._valuesStartRepeat[e],this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a),this._valuesStart[e]=this._valuesStartRepeat[e];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Easing.Bounce.In(2*t):.5*s.Easing.Bounce.Out(2*t-1)+.5}}},s.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=s.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],i):1<e?o(t[n],t[n-1],n-i):o(t[r],t[n<r+1?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=s.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*o(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=s.Interpolation.Utils.CatmullRom;return t[0]===t[n]?o(t[((r=e<0?Math.floor(i=n*(1+e)):r)-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=s.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(i=[1],function(t){var e=1;if(i[t])return i[t];for(var n=t;1<n;n--)e*=n;return i[t]=e}),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),t=.5*(i-e),i=r*r;return(2*e-2*n+o+t)*(r*i)+(-3*e+3*n-2*o-t)*i+o*r+e}}},t=this,"function"==typeof define&&define.amd?define([],function(){return s}):void 0!==n&&"object"==typeof r?n.exports=s:void 0!==t&&(t.TWEEN=s)}).call(this)}).call(this,t("_process"))},{_process:4}],2:[function(t,e,i){(function(n){(function(){!function(){"use strict";function t(){this.init()}function e(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")}t.prototype={init:function(){var t=this||y;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||y;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&0<=t&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,y.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),r=0;r<i.length;r++){var o=e._howls[n]._soundById(i[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||y;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,y.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),r=0;r<i.length;r++){var o=e._howls[n]._soundById(i[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||y,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||y,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||y)._codecs[t.replace(/^x-/,"")]},_setup:function(){var e=this||y;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||y,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=i&&parseInt(i[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var s=this||y;if(!s._audioUnlocked&&s.ctx){s._audioUnlocked=!1,s.autoUnlock=!1,s._mobileUnloaded||44100===s.ctx.sampleRate||(s._mobileUnloaded=!0,s.unload()),s._scratchBuffer=s.ctx.createBuffer(1,1,22050);var l=function(t){for(;s._html5AudioPool.length<s.html5PoolSize;)try{var e=new Audio;e._unlocked=!0,s._releaseHtml5Audio(e)}catch(t){s.noAudio=!0;break}for(var n=0;n<s._howls.length;n++)if(!s._howls[n]._webAudio)for(var i=s._howls[n]._getSoundIds(),r=0;r<i.length;r++){var o=s._howls[n]._soundById(i[r]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}s._autoResume();var a=s.ctx.createBufferSource();a.buffer=s._scratchBuffer,a.connect(s.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof s.ctx.resume&&s.ctx.resume(),a.onended=function(){a.disconnect(0),s._audioUnlocked=!0,document.removeEventListener("touchstart",l,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("click",l,!0);for(var t=0;t<s._howls.length;t++)s._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",l,!0),document.addEventListener("touchend",l,!0),document.addEventListener("click",l,!0),s}},_obtainHtml5Audio:function(){var t=this||y;if(t._html5AudioPool.length)return t._html5AudioPool.pop();t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||y;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&y.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){var t;e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())},e.ctx.suspend().then(t,t))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&y.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var y=new t;e.prototype={init:function(t){var e=this;return y.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=y.usingWebAudio&&!e._html5,void 0!==y.ctx&&y.ctx&&y.autoUnlock&&y._unlockAudio(),y._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(y.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var n,i,r=0;r<t._src.length;r++){if(t._format&&t._format[r])n=t._format[r];else{if("string"!=typeof(i=t._src[r])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=(n=(n=/^data:audio\/([^;,]+);/i.exec(i))||/\.([^.]+)$/.exec(i.split("?",1)[0]))&&n[1].toLowerCase()}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&y.codecs(n)){e=t._src[r];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new o(t),t._webAudio&&s(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var i=this,t=null;if("number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var r=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(r++,t=i._sounds[o]._id);1===r?e=null:t=null}}var a=t?i._soundById(t):i._inactiveSound();if(!a)return null;if(t&&!e&&(e=a._sprite||"__default"),"loaded"!==i._state){a._sprite=e,a._ended=!1;var s=a._id;return i._queue.push({event:"play",action:function(){i.play(s)}}),s}if(t&&!a._paused)return n||i._loadQueue("play"),a._id;i._webAudio&&y._autoResume();var l=Math.max(0,0<a._seek?a._seek:i._sprite[e][0]/1e3),u=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-l),h=1e3*u/Math.abs(a._rate),p=i._sprite[e][0]/1e3,c=(i._sprite[e][0]+i._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;function d(){a._paused=!1,a._seek=l,a._start=p,a._stop=c,a._loop=!(!a._loop&&!i._sprite[e][2])}if(!(c<=l)){var f,m,g,_=a._node;return i._webAudio?(m=function(){i._playLock=!1,d(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;_.gain.setValueAtTime(t,y.ctx.currentTime),a._playStart=y.ctx.currentTime,void 0===_.bufferSource.start?a._loop?_.bufferSource.noteGrainOn(0,l,86400):_.bufferSource.noteGrainOn(0,l,u):a._loop?_.bufferSource.start(0,l,86400):_.bufferSource.start(0,l,u),h!=1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),h)),n||setTimeout(function(){i._emit("play",a._id),i._loadQueue()},0)},"running"===y.state&&"interrupted"!==y.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(a._id))):(f=function(){_.currentTime=l,_.muted=a._muted||i._muted||y._muted||_.muted,_.volume=a._volume*y.volume(),_.playbackRate=a._rate;try{var t=_.play();if(t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)?(i._playLock=!0,d(),t.then(function(){i._playLock=!1,_._unlocked=!0,n||(i._emit("play",a._id),i._loadQueue())}).catch(function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(i._playLock=!1,d(),i._emit("play",a._id),i._loadQueue()),_.playbackRate=a._rate,_.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),h):(i._endTimers[a._id]=function(){i._ended(a),_.removeEventListener("ended",i._endTimers[a._id],!1)},_.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}},"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===_.src&&(_.src=i._src,_.load()),m=window&&window.ejecta||!_.readyState&&y._navigator.isCocoonJS,3<=_.readyState||m?f():(i._playLock=!0,g=function(){f(),_.removeEventListener(y._canPlayEvent,g,!1)},_.addEventListener(y._canPlayEvent,g,!1),i._clearTimer(a._id))),a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var r=e._soundById(n[i]);if(r&&!r._paused&&(r._seek=e.seek(n[i]),r._rateSeek=0,r._paused=!0,e._stopFade(n[i]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var i=n._getSoundIds(t),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(i[r]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var i=n._getSoundIds(e),r=0;r<i.length;r++){var o=n._soundById(i[r]);o&&(o._muted=t,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,y.ctx.currentTime):o._node&&(o._node.muted=!!y._muted||t),n._emit("mute",o._id))}return n},volume:function(){var t,e,n,i=this,r=arguments;if(0===r.length)return i._volume;if(1===r.length||2===r.length&&void 0===r[1]?0<=i._getSoundIds().indexOf(r[0])?e=parseInt(r[0],10):t=parseFloat(r[0]):2<=r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10)),!(void 0!==t&&0<=t&&t<=1))return(n=e?i._soundById(e):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;void 0===e&&(i._volume=t),e=i._getSoundIds(e);for(var o=0;o<e.length;o++)(n=i._soundById(e[o]))&&(n._volume=t,r[2]||i._stopFade(e[o]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,y.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*y.volume()),i._emit("volume",n._id));return i},fade:function(t,e,n,i){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,n,i)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),r.volume(t,i);for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var s,l,u=r._soundById(o[a]);u&&(i||r._stopFade(o[a]),r._webAudio&&!u._muted&&(l=(s=y.ctx.currentTime)+n/1e3,u._volume=t,u._node.gain.setValueAtTime(t,s),u._node.gain.linearRampToValueAtTime(e,l)),r._startFadeInterval(u,t,e,n,o[a],void 0===i))}return r},_startFadeInterval:function(e,n,i,r,t,o){var a=this,s=n,l=i-n,u=Math.abs(l/.01),u=Math.max(4,0<u?r/u:r),h=Date.now();e._fadeTo=i,e._interval=setInterval(function(){var t=(Date.now()-h)/r;h=Date.now(),s+=l*t,s=Math.round(100*s)/100,s=l<0?Math.max(i,s):Math.min(i,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(i<n&&s<=i||n<i&&i<=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(i,e._id),a._emit("fade",e._id))},u)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(y.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;t=r[0],i._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var o=i._getSoundIds(e),a=0;a<o.length;a++)(n=i._soundById(o[a]))&&(n._loop=t,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t)&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop));return i},rate:function(){var t,e,n=this,i=arguments;if(0===i.length?e=n._sounds[0]._id:1===i.length?0<=n._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):t=parseFloat(i[0]):2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10)),"number"!=typeof t)return((o=n._soundById(e))||n)._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,i)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var r,o,a=0;a<e.length;a++)(o=n._soundById(e[a]))&&(n.playing(e[a])&&(o._rateSeek=n.seek(e[a]),o._playStart=n._webAudio?y.ctx.currentTime:o._playStart),o._rate=t,n._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.setValueAtTime(t,y.ctx.currentTime):o._node&&(o._node.playbackRate=t),r=n.seek(e[a]),r=1e3*((n._sprite[o._sprite][0]+n._sprite[o._sprite][1])/1e3-r)/Math.abs(o._rate),!n._endTimers[e[a]]&&o._paused||(n._clearTimer(e[a]),n._endTimers[e[a]]=setTimeout(n._ended.bind(n,o),r)),n._emit("rate",o._id));return n},seek:function(){var t,e,n=this,i=arguments;if(0===i.length?e=n._sounds[0]._id:1===i.length?0<=n._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(i[0])):2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10)),void 0===e)return n;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var r=n._soundById(e);if(r){if(!("number"==typeof t&&0<=t)){if(n._webAudio){var o=n.playing(e)?y.ctx.currentTime-r._playStart:0,a=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(a+o*Math.abs(r._rate))}return r._node.currentTime}var s=n.playing(e);s&&n.pause(e,!0),r._seek=t,r._ended=!1,n._clearTimer(e),n._webAudio||!r._node||isNaN(r._node.duration)||(r._node.currentTime=t);var l,u=function(){n._emit("seek",e),s&&n.play(e,!0)};s&&!n._webAudio?(l=function(){n._playLock?setTimeout(l,0):u()},setTimeout(l,0)):u()}return n},playing:function(t){if("number"==typeof t){t=this._soundById(t);return!!t&&!t._paused}for(var e=0;e<this._sounds.length;e++)if(!this._sounds[e]._paused)return!0;return!1},duration:function(t){var e=this._duration,t=this._soundById(t);return e=t?this._sprite[t._sprite][1]/1e3:e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(y._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),y._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var i=y._howls.indexOf(t);0<=i&&y._howls.splice(i,1);for(var r=!0,n=0;n<y._howls.length;n++)if(y._howls[n]._src===t._src||0<=t._src.indexOf(y._howls[n]._src)){r=!1;break}return a&&r&&delete a[t._src],y.noAudio=!1,t._state="unloaded",t._sounds=[],t=null},on:function(t,e,n,i){t=this["_on"+t];return"function"==typeof e&&t.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),this},off:function(t,e,n){var i=this,r=i["_on"+t],o=0;if("number"==typeof e&&(n=e,e=null),e||n)for(o=0;o<r.length;o++){var a=n===r[o].id;if(e===r[o].fn&&a||!e&&a){r.splice(o,1);break}}else if(t)i["_on"+t]=[];else for(var s=Object.keys(i),o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(i[s[o]])&&(i[s[o]]=[]);return i},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var i=this,r=i["_on"+t],o=r.length-1;0<=o;o--)r[o].id&&r[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,r[o].fn),0),r[o].once&&i.off(t,r[o].fn,r[o].id));return i._loadQueue(t),i},_loadQueue:function(t){var e,n=this;return 0<n._queue.length&&((e=n._queue[0]).event===t&&(n._queue.shift(),n._loadQueue()),t||e.action()),n},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var i=!(!t._loop&&!e._sprite[n][2]);return e._emit("end",t._id),!e._webAudio&&i&&e.stop(t._id,!0).play(t._id),e._webAudio&&i&&(e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=y.ctx.currentTime,n=1e3*(t._stop-t._start)/Math.abs(t._rate),e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),n)),e._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),y._autoSuspend()),e._webAudio||i||e.stop(t._id,!0),e},_clearTimer:function(t){var e,n=this;return n._endTimers[t]&&("function"!=typeof n._endTimers[t]?clearTimeout(n._endTimers[t]):(e=n._soundById(t))&&e._node&&e._node.removeEventListener("ended",n._endTimers[t],!1),delete n._endTimers[t]),n},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new o(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;0<=i;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){if(void 0!==t)return[t];for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e},_refreshBuffer:function(t){return t._node.bufferSource=y.ctx.createBufferSource(),t._node.bufferSource.buffer=a[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,y.ctx.currentTime),this},_cleanBuffer:function(t){var e=y._navigator&&0<=y._navigator.vendor.indexOf("Apple");if(y._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=y._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(y._navigator&&y._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++y._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=y._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),t._node.gain.setValueAtTime(n,y.ctx.currentTime),t._node.paused=!0,t._node.connect(y.masterGain)):y.noAudio||(t._node=y._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(y._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=n*y.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++y._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(y._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var a={},s=function(e){var t=e._src;if(a[t])return e._duration=a[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);u(i.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){o.setRequestHeader(t,e._xhr.headers[t])}),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?u(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete a[t],e.load())},l(o)}},l=function(e){try{e.send()}catch(t){e.onerror()}},u=function(t,e){function n(){e._emit("loaderror",null,"Decoding audio data failed.")}function i(t){t&&0<e._sounds.length?(a[e._src]=t,h(e,t)):n()}"undefined"!=typeof Promise&&1===y.ctx.decodeAudioData.length?y.ctx.decodeAudioData(t).then(i).catch(n):y.ctx.decodeAudioData(t,i,n)},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(y.usingWebAudio){try{"undefined"!=typeof AudioContext?y.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?y.ctx=new webkitAudioContext:y.usingWebAudio=!1}catch(t){y.usingWebAudio=!1}y.ctx||(y.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(y._navigator&&y._navigator.platform),e=y._navigator&&y._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),e=e?parseInt(e[1],10):null;t&&e&&e<9&&(e=/safari/.test(y._navigator&&y._navigator.userAgent.toLowerCase()),y._navigator&&!e&&(y.usingWebAudio=!1)),y.usingWebAudio&&(y.masterGain=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),y.masterGain.gain.setValueAtTime(y._muted?0:y._volume,y.ctx.currentTime),y.masterGain.connect(y.ctx.destination)),y._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:y,Howl:e}}),void 0!==i&&(i.Howler=y,i.Howl=e),void 0!==n?(n.HowlerGlobal=t,n.Howler=y,n.Howl=e,n.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=t,window.Howler=y,window.Howl=e,window.Sound=o)}(),function(){"use strict";var n,i,r;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;0<=n;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var i=this;return i.ctx&&i.ctx.listener?(e="number"!=typeof e?i._pos[1]:e,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof t?i._pos:(i._pos=[t,e,n],void 0!==i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(t,e,n,i,r,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return e="number"!=typeof e?s[1]:e,n="number"!=typeof n?s[2]:n,i="number"!=typeof i?s[3]:i,r="number"!=typeof r?s[4]:r,o="number"!=typeof o?s[5]:o,"number"!=typeof t?s:(a._orientation=[t,e,n,i,r,o],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,e,n,i,r,o),a)},Howl.prototype.init=(n=Howl.prototype.init,function(t){var e=this;return e._orientation=t.orientation||[1,0,0],e._stereo=t.stereo||null,e._pos=t.pos||null,e._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},e._onstereo=t.onstereo?[{fn:t.onstereo}]:[],e._onpos=t.onpos?[{fn:t.onpos}]:[],e._onorientation=t.onorientation?[{fn:t.onorientation}]:[],n.call(this,t)}),Howl.prototype.stereo=function(t,e){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,e)}}),n;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var r=n._getSoundIds(e),o=0;o<r.length;o++){var a=n._soundById(r[o]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||u(a,i),"spatial"==i?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,e,n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,e,n,i)}}),r;if(e="number"!=typeof e?0:e,n="number"!=typeof n?-.5:n,void 0===i){if("number"!=typeof t)return r._pos;r._pos=[t,e,n]}for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._pos;s._pos=[t,e,n],s._node&&(s._panner&&!s._panner.pan||u(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setPosition(t,e,n)),r._emit("pos",s._id)}}return r},Howl.prototype.orientation=function(t,e,n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,e,n,i)}}),r;if(e="number"!=typeof e?r._orientation[1]:e,n="number"!=typeof n?r._orientation[2]:n,void 0===i){if("number"!=typeof t)return r._orientation;r._orientation=[t,e,n]}for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._orientation;s._orientation=[t,e,n],s._node&&(s._panner||(s._pos||(s._pos=r._pos||[0,0,-.5]),u(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setOrientation(t,e,n)),r._emit("orientation",s._id)}}return r},Howl.prototype.pannerAttr=function(){var t,e,n=this,i=arguments;if(!n._webAudio)return n;if(0===i.length)return n._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return((a=n._soundById(parseInt(i[0],10)))||n)._pannerAttr;t=i[0],void 0===e&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var r,o,a,s=n._getSoundIds(e),l=0;l<s.length;l++)(a=n._soundById(s[l]))&&(r=a._pannerAttr,r={coneInnerAngle:(void 0!==t.coneInnerAngle?t:r).coneInnerAngle,coneOuterAngle:(void 0!==t.coneOuterAngle?t:r).coneOuterAngle,coneOuterGain:(void 0!==t.coneOuterGain?t:r).coneOuterGain,distanceModel:(void 0!==t.distanceModel?t:r).distanceModel,maxDistance:(void 0!==t.maxDistance?t:r).maxDistance,refDistance:(void 0!==t.refDistance?t:r).refDistance,rolloffFactor:(void 0!==t.rolloffFactor?t:r).rolloffFactor,panningModel:(void 0!==t.panningModel?t:r).panningModel},(o=a._panner)?(o.coneInnerAngle=r.coneInnerAngle,o.coneOuterAngle=r.coneOuterAngle,o.coneOuterGain=r.coneOuterGain,o.distanceModel=r.distanceModel,o.maxDistance=r.maxDistance,o.refDistance=r.refDistance,o.rolloffFactor=r.rolloffFactor,o.panningModel=r.panningModel):(a._pos||(a._pos=n._pos||[0,0,-.5]),u(a,"spatial")));return n},Sound.prototype.init=(i=Sound.prototype.init,function(){var t=this,e=t._parent;t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,i.call(this),t._stereo?e.stereo(t._stereo):t._pos&&e.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}),Sound.prototype.reset=(r=Sound.prototype.reset,function(){var t=this,e=t._parent;return t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,t._stereo?e.stereo(t._stereo):t._pos?e.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,e._refreshBuffer(t)),r.call(this)});var u=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){var i,r,o,a;i=function(){function s(){for(var t=0,e={};t<arguments.length;t++){var n,i=arguments[t];for(n in i)e[n]=i[n]}return e}function u(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(l){function a(){}function n(t,e,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(e);/^[\{\[]/.test(i)&&(e=i)}catch(t){}e=l.write?l.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r,o="";for(r in n)n[r]&&(o+="; "+r,!0!==n[r]&&(o+="="+n[r].split(";")[0]));return document.cookie=t+"="+e+o}}function e(t,e){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],r=0;r<i.length;r++){var o=i[r].split("="),a=o.slice(1).join("=");e||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=u(o[0]),a=(l.read||l)(a,s)||u(a);if(e)try{a=JSON.parse(a)}catch(t){}if(n[s]=a,t===s)break}catch(t){}}return t?n[t]:n}}return a.set=n,a.get=function(t){return e(t,!1)},a.getJSON=function(t){return e(t,!0)},a.remove=function(t,e){n(t,"",s(e,{expires:-1}))},a.defaults={},a.withConverter=t,a}(function(){})},"function"==typeof define&&define.amd&&(define(i),r=!0),"object"==typeof n&&(e.exports=i(),r=!0),r||(o=window.Cookies,(a=window.Cookies=i()).noConflict=function(){return window.Cookies=o,a})},{}],4:[function(t,e,n){var i,r,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,u=[],h=!1,p=-1;function c(){h&&l&&(h=!1,l.length?u=l.concat(u):p=-1,u.length&&d())}function d(){if(!h){var t=s(c);h=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||h||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],5:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Application=void 0;var o,r=(o=PIXI.utils.EventEmitter,r(a,o),Object.defineProperty(a.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this.size.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.size.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),a.prototype.render=function(){this.renderer.render(this.stage)},a.prototype.start=function(t){this.ticker.start()},a.prototype.stop=function(){this.ticker.stop()},a.prototype.destory=function(t){void 0===t&&(t={children:!1}),this.stage.destroy(t),this.ticker.destroy(),this.renderer.destroy(!0)},a);function a(t){var e=o.call(this)||this;return e.ticker=new PIXI.Ticker,e.stage=new PIXI.Container,e.loader=new PIXI.Loader,e.renderer=new PIXI.Renderer(t),e.renderer.plugins.interaction.moveWhenInside=!0,t.autoStart&&e.ticker.start(),e}n.Application=r},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GA=void 0;var i=(r.error=function(t,e){void 0===e&&(e=!1);var n=window.ga;n&&n("send","exception",{exDescription:t.message,exFatal:e})},r.log=function(t,e){var n=window.ga;n&&n("send","event",{eventCategory:t,eventLabel:JSON.stringify(e||"{}")})},r);function r(){}n.GA=i},{}],7:[function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.EmbeddedGameApi=n.FakeGameApi=void 0;var r=i(t("js-cookie")),o=t("./index"),a=t("./GA"),t=(s.prototype.invokeHook=function(t,e){this._hook[t]?(this._hook[t](e),console.warn("FakeAPI","Hook "+t+" executed with",e)):console.warn("FakeAPI","Hook "+t+" cant'be executed!")},s.prototype.cleanGameData=function(){r.default.set("_GameSaves_",{}),console.warn("FakeAPI","Game data was cleaned!")},s.prototype.openAllLevels=function(){var t,e={};for(t in o.App.instance.games)e[t]={level:3};r.default.set("_GameSaves_",e),console.warn("FakeAPI","God Mode enabled!")},s.prototype.getGameData=function(t){var e=(r.default.getJSON("_GameSaves_")||{})[t]||{data:{}};return console.log("FakeAPI","Game requiest data:",t,e),e},s.prototype.setGameData=function(t,e){var n=r.default.getJSON("_GameSaves_")||{};return n[t]=e,r.default.set("_GameSaves_",n),console.log("FakeAPI","Game send data:",t,e),n},s.prototype.submitGameState=function(t,e){console.log("FakeAPI","Game submit Phase:",t,e)},s.prototype.registerHook=function(t,e){this._hook[t]=e,console.log("FakeAPI","Register hook of",t)},s.prototype.removeHook=function(t){this._hook[t]=void 0,console.log("FakeAPI","Remove hook of",t)},s);function s(){this._hook={},console.warn("FakeAPI","GameAPI object not found! Used Fake API")}n.FakeGameApi=t;l.prototype.invokeHook=function(t,e){this._hook[t]&&this._hook[t](e)},l.prototype.getGameData=function(t){var e=this._invokeMethod("getGameData",{gameId:t,data:{}},!0);if(e&&e.gameId!==t){t=new Error("Inlegal gameId. Expected: "+t+", got: "+e.gameId);throw a.GA.error(t,!0),t}return e?e.data:void 0},l.prototype.setGameData=function(t,e){e=this._invokeMethod("setGameData",{gameId:t,data:e});return e?e.data:void 0},l.prototype.submitGameState=function(t,e){this._invokeMethod("submitGameState",{gameId:t,data:e})},l.prototype.registerHook=function(t,e){this._hook[t]=e},l.prototype.removeHook=function(t){this._hook[t]=void 0},l.prototype._invokeMethod=function(t,e,n){void 0===n&&(n=!1);var i=JSON.stringify(e||{});try{var r=this.api[t](i);return JSON.parse(r||"null")}catch(t){throw a.GA.error(t,!0),t}},t=l;function l(){if(this._hook={},this.api=window.InternalAPI,!this.api){var t=new Error("Illegal state, InternalAPI is missing");throw a.GA.error(t,!0),t}}n.EmbeddedGameApi=t},{"./GA":6,"./index":9,"js-cookie":3}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalConfig=void 0,n.GlobalConfig={Settings:{ControlsBottomOffset:240},Maze:{stepDuration:.45,gemtopower:30,levels:[{size:10,power:6e5,gems:10},{size:15,power:6e4,gems:20},{size:17,power:6e5,gems:30}]}}},{}],9:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.App=void 0,a(t("./pixi-utils")).default();var s,l=a(t("@tweenjs/tween.js")),a=t("./Application"),u=t("./shared/Config"),h=t("./shared/AssetsLib"),p=t("./shared/ui/UiManager"),c=t("./GameAPI"),d=t("./shared/Multilang"),f=t("./maze/index"),m=t("./GA"),g=t("./shared/Sound"),_=!0,r=(s=a.Application,r(y,s),y.prototype.load=function(){var t=this;this.loader.baseUrl=h.Assets.BaseDir,g.SoundGrouper.createManager("Any");try{var e=this.api.getGameData("Loader");this.lang=e.lang||e.data&&e.data.lang||this.lang}catch(t){m.GA.error(t,!0),console.error("Critical",t)}var n=h.Assets.AssetsTranslated[this.lang]||{};this.loader.add(Object.values(o(o({},h.Assets.Assets),n))),this.loader.add("mainfest",u.Config.Translations),this.loader.load(function(){t.init()})},y.prototype.init=function(){var e=this;this.multilang=new d.Multilang(this.loader.resources.mainfest.data),this.multilang.preload(this.lang),this.lang=this.multilang._lang,this.uiManager.init(this.loader.resources),this.uiManager.visible=!1,this.stage.addChild(this.uiManager.stage),this.multilang.once("loaded",function(){e.api.registerHook("Loader",function(t){e.apiHook(t)}),e._init=!0,e.emit("loaded"),e.api.submitGameState("Loader",{type:"init",data:{message:"Game loader init"}})})},y.prototype.apiHook=function(t){if("start"==t.type){if(!t.data)return void this.api.submitGameState("Loader",{type:"error",data:{game:void 0,message:"Data can't be empty! ",variants:{data:{name:Object.keys(this.games)[0]}}}});var e=t.data.name||t.data.game;this.startGameByName(e)||this.api.submitGameState("Loader",{type:"error",data:{game:e,message:"Can't found",variants:Object.keys(this.games)}})}"close"==t.type&&(this.stop(),this.api.submitGameState("Loader",{type:"close",data:{message:"Stoped by API Request"}}))},y.prototype.startGameByName=function(t){return!(!t||!this.games[t])&&(this.preparedStart(new this.games[t]),!0)},y.prototype.preparedStart=function(t){var e=this;if(!this._init)throw Error("App can't init!");if(!t)throw Error("Game can't be null!");this.stop(),t.preload().load(function(){e.start(t)})},y.prototype.start=function(t){this._currentGame=t,this.uiManager.bindListener(t),this._currentGame.init(this),this.uiManager.postInit(),this.stage.addChildAt(this._currentGame.stage,0),this.resume(),s.prototype.start.call(this)},y.prototype.stop=function(){this._currentGame&&(this.stage.removeChild(this._currentGame.stage),this.uiManager.reset(),this._currentGame.stop(),this._currentGame.sounds&&this._currentGame.sounds.Stop()),this._currentGame=void 0,s.prototype.render.call(this),s.prototype.stop.call(this)},y.prototype.pause=function(){this.ticker.stop(),this._currentGame&&this._currentGame.pause(),this.update()},y.prototype.resume=function(){this._currentGame&&(this._currentGame.resume(),s.prototype.start.call(this))},y.prototype.update=function(){l.default.update(this.ticker.lastTime),null!=this._currentGame&&this._currentGame.update(this.ticker),this.render()},y);function y(t){var e=this;if(!t)throw new Error("aprent element must be div!");var n=window.innerWidth/window.innerHeight,i=o({},u.Config.ReferenceSize);return n<i.width/i.height&&(i.height=i.width/n),PIXI.settings.PREFER_ENV=PIXI.ENV.WEBGL,e=s.call(this,o({autoStart:!1,powerPreference:"low-power",backgroundColor:13421772},i))||this,t.appendChild(e.view),e.games={Maze:f.Maze},e.lang="en_US",e.api=_?new c.FakeGameApi:window.GameAPI||new c.EmbeddedGameApi,window.GameAPI=e.api,e.uiManager=new p.UiManager(e),e.uiManager.visible=!1,e.ticker.add(e.update,e),u.Config.PausedInBackground&&(window.addEventListener("blur",function(){e.pause()}),window.addEventListener("focus",function(){e.resume()})),e.render(),window.AppInstance=e,y.instance=e}n.App=r,window.GamesFromHell=r},{"./Application":5,"./GA":6,"./GameAPI":7,"./maze/index":18,"./pixi-utils":23,"./shared/AssetsLib":25,"./shared/Config":27,"./shared/Multilang":30,"./shared/Sound":31,"./shared/ui/UiManager":41,"@tweenjs/tween.js":1}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Assets=void 0;t=t("../shared/Config");n.Assets={BaseDir:t.Config.BaseResDir+"/game6",Assets:{"map-atlas":{name:"game-atlas",url:"/map-atlas.json"},player:{name:"player",url:"/Player/Game Character (up).json"}}}},{"../shared/Config":27}],11:[function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.GameConfig=void 0;t=t("../GlobalConfig");n.GameConfig=i({stepLen:444,offsets:{top:500,bottom:500,left:300,right:300}},t.GlobalConfig.Maze)},{"../GlobalConfig":8}],12:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Ghost=void 0;var o,a=t("./Assets"),s=t("@tweenjs/tween.js"),r=(o=PIXI.Container,r(l,o),l.prototype.setAmount=function(t){this._text.text="x"+(0|t)},l.prototype.showBalloon=function(t){if(!this._showed)return this._showed=!0,this.setAmount(t),this._baloon.alpha=1,this._baloon.visible=!0,this._baloon.scale.set(.001),new s.Tween(this._baloon.scale).to({x:1,y:1},300).start()},l.prototype.hideBaloon=function(){var t=this;if(this._showed)return this._showed=!1,new s.Tween(this._baloon).to({alpha:0},300).onComplete(function(){t._baloon.visible=!1}).start()},l.prototype.reset=function(){this.angle=0,this._baloon.visible=!1,this._showed=!1},l);function l(t){var e=o.call(this)||this;e._showed=!1;t=t[a.Assets.Assets["map-atlas"].name].textures;return e._body=new PIXI.Sprite(t["ghost.png"]),e._body.pivot.set(.5),e._body.x-=e._body.width>>1,e._body.y-=e._body.height>>1,e._baloon=new PIXI.Sprite(t["balloon.png"]),e._baloon.anchor.set(1,1),e._text=new PIXI.Text("x00",new PIXI.TextStyle({fontFamily:"Carter One MultiCyr, CarterOne",fontSize:30,fill:0})),e._baloon.addChild(e._text),e._text.anchor.set(0,.5),e._text.y-=75,e._text.x-=100,e._baloon.y+=e._baloon.height>>1,e._baloon.visible=!1,e.addChild(e._body,e._baloon),e}n.Ghost=r},{"./Assets":10,"@tweenjs/tween.js":1}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Maze=n.MazeType=void 0;var o,u=[0,1,2,3],h=[1,0,3,2],p={x:[0,0,-1,1],y:[-1,1,0,0]};Math.random();function r(e){switch(e.type){case o.ELLEE:for(var n=new Array,i=new Array,t=0;t<e.columns;t++)n[t]=t,i[t]=t;s(function(t){return function(t,e,n,i){var r=t.columns,o=t.rows;for(a=0;a<t.columns;a++)if(s()&&n[a]!=a+1&&a!=r-1&&(e[n[a]]=e[a+1],n[e[a+1]]=n[a],n[a]=a+1,e[a+1]=a,t.cells[a][i].wall[3]=!1,t.cells[a+1][i].wall[2]=!1),s()&&n[a]!=a?(e[n[a]]=e[a],n[e[a]]=n[a],e[a]=n[a]=a):(t.cells[a][i].wall[1]=!1,t.cells[a][i+1].wall[0]=!1),a==r-1&&i==o-2)for(var a=0;a<r-1;a++)n[a]!=a+1&&(e[n[a]]=e[a+1],n[e[a+1]]=n[a],n[a]=a+1,e[a+1]=a,t.cells[a][o-1].wall[3]=!1,t.cells[a+1][o-1].wall[2]=!1);return i+1;function s(){return 14<Math.floor(32*l())}}(e,n,i,t)},e.rows-1,function(){e.complete()},void 0);break;case o.DFS:var r=[{x:l()*e.columns|0,y:l()*e.rows|0,neighbors:c(u)}];s(function(){return function(t,e){var n=e[e.length-1],i=n.x,r=n.y,o=n.neighbors;0==t.cells[i][r].visited&&(t.cells[i][r].visited=!0,t.visitedCount++);for(;0<o.length;){var a=o.pop();0==o.length&&e.pop();var s=i+p.x[a],l=r+p.y[a];if(0<=s&&0<=l&&s<t.columns&&l<t.rows&&0==t.cells[s][l].visited){t.cells[i][r].wall[a]=!1,t.cells[s][l].wall[h[a]]=!1,e.push({x:s,y:l,neighbors:c(u)});break}}return t.visitedCount}(e,r)},e.rows*e.columns,function(){e.complete()},void 0)}}(i=o=n.MazeType||(n.MazeType={}))[i.ELLEE=0]="ELLEE",i[i.DFS=1]="DFS";var i=(a.prototype.build=function(t,e,n){var i=this;return void 0===n&&(n=o.ELLEE),this.columns=t,this.rows=e,this.type=n,this.cells=[],new Promise(function(t){i.complete=t;for(var e=0;e<i.columns;e++)i.rowInitializer(e);r(i)})},a.prototype.rowInitializer=function(t){this.cells[t]=new Array(this.columns);for(var e=0;e<this.rows;e++)this.cells[t][e]={visited:!1,x:t,y:e,wall:[!0,!0,!0,!0]};return t+1},a);function a(){this.cells=new Array,this.visitedCount=0,this.columns=4,this.rows=4,this.type=0}n.Maze=i;var c=function(t){for(var e,n,i=t.slice(),r=i.length;r;e=l()*r|0,n=i[--r],i[r]=i[e],i[e]=n);return i};function s(e,n,i,r){var o=0,a=function(t){for(;(t=e(t))!=n;){if(!(o<50)){o=0,setTimeout(function(){a(t)},0);break}o++}r&&r(t,n),i&&t==n&&setTimeout(function(){i()},0)};a(0)}function l(){return Math.random()}},{}],14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MazeBuilder=r.ArrayToCell=r.MazeCelType=void 0;var P=t("./MazeView");function a(t){if(4!=t.length)throw Error("FTW??? Array length must be 4");for(var e=0,n=0;n<4;n++)e|=~~t[n]<<n;var i=r.MazeCelType[e];return{baseType:i.t,flip:i.r||0}}r.MazeCelType={0:{t:"cross"},1:{t:"t"},2:{t:"t",r:4},8:{t:"t",r:6},4:{t:"t",r:2},13:{t:"deadend"},14:{t:"deadend",r:4},11:{t:"deadend",r:6},7:{t:"deadend",r:2},5:{t:"corner"},6:{t:"corner",r:2},9:{t:"corner",r:6},10:{t:"corner",r:4},12:{t:"straight"},3:{t:"straight",r:2}},r.ArrayToCell=a;M.prototype.getCellSize=function(){return this.textures["t.png"].width},M.prototype.buildMaze=function(t,e){void 0===e&&(e=0);var n=1+(t.columns-2)*Math.random()|0,i=1+(t.columns-2)*Math.random()|0;t.cells[n][0].wall[0]=!1,t.cells[i][t.rows-1].wall[1]=!1;var r=M.mazeCellsToTyped(t);t.rows+=2;for(var o=new P.MazeView,a=this.textures["t.png"].width,s=this.textures["t.png"].height,l=[],u=[],h=this.textures["empty.png"],p=this.textures["deadend.png"],c=new PIXI.Texture(p.baseTexture,p.frame,p.orig,p.trim,8|p.rotate),d=this.textures["straight.png"],f=0;f<t.columns;f++){var m=new P.CellView(f===i?c:h),g=new P.CellView(f===n?d:h);m.x=g.x=f*a,m.data={wall:[!1,!0,!0,!0],x:f,y:t.rows-1,visited:!1},m.y=m.data.y*s,g.data={wall:[!0,!1,!0,!0],x:f,y:0,visited:!1},g.y=g.data.y*s,o.addChild(m,g),l[f*t.rows+m.data.y]=m,l[f*t.rows+g.data.y]=g}for(var _=0,y=r;_<y.length;_++){var v=y[_],x=this.textures[v.baseType+".png"],x=new PIXI.Texture(x.baseTexture,x.frame,x.orig,x.trim,x.rotate|v.flip),x=new P.CellView(x);v.orig.y+=1,x.data=v.orig,x.type=v.baseType,x.x=v.orig.x*a,x.y=v.orig.y*s,l[v.orig.x*t.rows+v.orig.y]=x,o.addChild(x)}for(var w=[],f=0;f<e;f++){var b=this.textures["normal "+(1+4*Math.random()|0)+".png"],b=new PIXI.Sprite(b);b.anchor.set(.5),b.scale.set(.35);var A=0;do{var T=t.columns*Math.random()|0,I=1+(t.rows-2)*Math.random()|0,A=T*t.rows+I}while(w[A]);w[A]=!0,b.x=l[A].x+.5*a,b.y=l[A].y+.5*s,u.push(b),o.addChild(b)}return o.data=t,o.cells=l,o.gems=u,o.endCell=o.getCellByIndex(n,0),o.startCell=o.getCellByIndex(i,t.rows-1),o},M.mazeCellsToTyped=function(t){for(var e=t.cells,n=[],i=0;i<e.length;i++)n.push.apply(n,this.mazeRowToTyped(e[i]));return n},M.mazeRowToTyped=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n],o=a(r.wall);o.orig=r,e.push(o)}return e},t=M;function M(t){this.textures=t}r.MazeBuilder=t},{"./MazeView":15}],15:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MazeView=n.CellView=void 0;var o,a=(o=PIXI.Sprite,r(s,o),s.prototype.getGlobalCenter=function(){var t=this.parent.parent.toLocal(this.position,this.parent,void 0,!1);return t.x+=this.width>>1,t.y+=this.height>>1,t},s);function s(){return null!==o&&o.apply(this,arguments)||this}n.CellView=a;var l,r=(l=PIXI.Container,r(u,l),u.prototype.getCellByPoint=function(t){var e=this.mapGlobalToCell(t),t=e.x,e=e.y;return this.getCellByIndex(t,e)},u.prototype.getCellByIndex=function(t,e){if(!(t<0||t>=this.data.columns||e<0||e>=this.data.rows)){e=t*this.data.rows+e;return this.cells[e]}},u.prototype.mapGlobalToCell=function(t){t=new PIXI.Point(t.x,t.y);return this.toLocal(t,this.parent,t,!1),t.x=t.x/this.width*this.data.columns|0,t.y=t.y/this.height*this.data.rows|0,t},u);function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.cells=[],t}n.MazeView=r},{}],16:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Player=void 0;var o,a=t("./Assets"),s=t("@tweenjs/tween.js"),l=t("./GameConfig"),u=t("../shared/M2");(t=o=o||{}).NONE="none",t.LEFT="left",t.RIGHT="right",t.UP="up",t.DOWN="down";var h={up:"Step up",left:"Step left 90",right:"Step right 90"};function p(t){return 0<t.y?1:t.y<0?0:0<t.x?3:t.x<0?2:-1}var c,r=(c=PIXI.Container,r(d,c),d.prototype.tilt=function(t){var e,n,i=this,r=this._targetAngle;0<t.y?r=180:t.y<0?r=0:0<Math.abs(t.x)&&(r=90*t.x),Math.abs(u.M2.AngleDist(this._targetAngle,r))<.1||(this._tiltTween&&this._tiltTween.isPlaying()&&this._tiltTween.stop(),e=u.M2.AngleDist(this._targetAngle,r),n=this._targetAngle,this._tiltTween=new s.Tween({a:0}).to({a:1},200).onUpdate(function(t){i.angle=n+t.a*e}).start(),this._targetAngle=r)},d.prototype.place=function(t){this.currentCell=t,this.localPos.x=t.data.x,this.localPos.y=t.data.y,this.position.copyFrom(this.currentCell.getGlobalCenter()),this._targetPoint.copyFrom(this.position),this.lastDirection=new PIXI.Point(0,-1)},d.prototype.move=function(t){var e,n,i,r;this.moved||(e=o.NONE,-1!=(r=p(t))?((0<Math.abs(t.x)||0<Math.abs(t.y))&&(e=o.UP),.05<Math.abs(t.y)&&(t.x=0),this.lastDirection=t,this.tilt(t),this.currentCell.data.wall[r]||(n=this.localPos.x+t.x,i=this.localPos.y+t.y,(r=this.mazeView.getCellByIndex(n,i))&&!r.data.wall[p({x:-t.x,y:-t.y})]?(this.localPos.set(n,i),this.currentCell=r,this._targetPoint=r.getGlobalCenter(),"deadend"==r.type&&(this.deadmask.visible=!0,this.deadmask.texture.rotate=r.texture.rotate,this.deadmask.zIndex=this.zIndex+10,this.parent.addChild(this.deadmask),this.deadmask.position.copyFrom(this._targetPoint))):this.deadmask.visible=!1)):this._setAnim(e))},d.prototype.reset=function(){this._spine.scale.set(1)},Object.defineProperty(d.prototype,"moved",{get:function(){return!this._moveComplete},enumerable:!1,configurable:!0}),d.prototype.update=function(t){this._spine.update(t.deltaMS/1e3);var e=this._targetPoint.x-this.x,n=this._targetPoint.y-this.y,t=l.GameConfig.stepLen*t.deltaMS*.001/l.GameConfig.stepDuration;Math.abs(e)>2*t||Math.abs(n)>2*t?(this._moveComplete=!1,this.x+=Math.sign(e)*t,this.y+=Math.sign(n)*t,this._setAnim(o.UP)):this._moveComplete||(this._moveComplete=!0,this.currentCell==this.mazeView.endCell&&this.emit("endreached"),this.position.copyFrom(this._targetPoint),this._setAnim(o.NONE))},d.prototype._setAnim=function(t){t!==this._prevDirection&&(t==o.NONE?(this._spine.state.clearTracks(),this._spine.skeleton.setToSetupPose()):(this._spine.state.setAnimation(0,h[t],!0),this._spine.state.timeScale=this._spine.state.getCurrent(0).animation.duration/l.GameConfig.stepDuration),this._prevDirection=t)},d);function d(t){var e=c.call(this)||this;e.localPos=new PIXI.Point(0,0),e._prevDirection=o.NONE,e._drowned=!1,e._targetPoint=new PIXI.Point,e._targetAngle=0,e._moveComplete=!1;var n=t[a.Assets.Assets.player.name].spineData,n=new PIXI.spine.Spine(n);n.autoUpdate=!1,n.pivot.y-=60,e._spine=n;t=t[a.Assets.Assets["map-atlas"].name].textures["deadend_mask.png"];return e.deadmask=new PIXI.Sprite(t),e.deadmask.anchor.set(.5),e.addChild(n),e}n.Player=r},{"../shared/M2":29,"./Assets":10,"./GameConfig":11,"@tweenjs/tween.js":1}],17:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Spot=void 0;var o,r=(o=PIXI.Sprite,r(a,o),a);function a(t,e){void 0===t&&(t=100),void 0===e&&(e=220);var n=this,i=document.createElement("canvas"),r=.5*e|0;i.width=i.height=2*r;e=i.getContext("2d");e.clearRect(0,0,2*r,2*r);t=e.createRadialGradient(r,r,.1*t,r,r,t);return t.addColorStop(0,"#00000080"),t.addColorStop(1,"#FFFFFF"),e.fillStyle=t,e.fillRect(0,0,2*r,2*r),(n=o.call(this,PIXI.Texture.from(i))||this).blendMode=PIXI.BLEND_MODES.SUBTRACT,n.anchor.set(.5),n.context=e,n}n.Spot=r},{}],18:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function i(t){try{o(l.next(t))}catch(t){e(t)}}function r(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,r)}o((l=l.apply(t,a||[])).next())})},a=this&&this.__generator||function(n,i){var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Maze=void 0;var s,l=t("../shared/BaseGame"),u=t("../shared/APIData"),h=t("./Assets"),p=t("./GameConfig"),c=t("../shared/M2"),d=t("../shared/ui/Popup"),f=t("../shared/ui/UiManager"),m=t("../shared/CrossplatformInputHandler"),g=t("../shared/ui/IUIListener"),_=t("./Maze"),y=t("./MazeBuilder"),v=t("./Player"),x=t("./Spot"),w=t("@tweenjs/tween.js"),b=t("./Ghost"),A=t("../shared/Sound"),r=(s=l.BaseGame,r(T,s),Object.defineProperty(T.prototype,"spotPower",{get:function(){return this._power},set:function(t){if(!this.levelData||!this.levelData.power)return this._power=1/0,void(this.overlay.alpha=0);var e=this.levelData.power;this._power=c.M2.clamp(t,0,e),this.overlay.alpha=1-this._power/e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=t,this.ui.progress=t},enumerable:!1,configurable:!0}),T.prototype.init=function(t){var e=this;this.app=t,this.lang=this.app.multilang.getTextBase("Maze"),this.sounds=A.SoundGrouper.createManager("Labirint"),this.sounds.Play("main_theme5",{loop:!0,volume:.25}),this.gameState.on("enter",this.onStateEnter,this),this.res=this.loader.resources,this.maze=new _.Maze,this.stage.y=t.height,this.ui=this.app.uiManager,this.ui.setOptions({showArrows:!1,showProgress:!1,level:this.apiData.lastOpenedLevel,controlLayout:f.ControlsLayout.FULL,levelHint:this.lang.levels[0],progressHint:this.lang.progress[0]}),this.input.mobileControlls=this.ui.controls,this.player=new v.Player(this.res),this.player.on("endreached",this.onEndReached,this),this.player.zIndex=100,this.ghost=new b.Ghost(this.res),this.ghost.zIndex=110,this.spot=new x.Spot(500,1.5*t.height),this.spot.scale.set(2),this.spot.zIndex=200,this.overlay=new PIXI.Sprite(PIXI.Texture.WHITE),this.overlay.anchor.set(0,1),this.overlay.width=this.app.width,this.overlay.height=this.app.height,this.overlay.zIndex=300,this.overlay.alpha=0,this.overlay.tint=0,this.mazeBuilder=new y.MazeBuilder(this.res[h.Assets.Assets["map-atlas"].name].textures);var n=p.GameConfig.levels[0];this.maze.build(n.size,n.size).then(function(){return e.onMazeBuilded()}),this.gameState.current=l.GameState.PRE,this.gameLevel.addChild(this.player,this.ghost,this.spot),this.stage.addChild(this.gameLevel,this.overlay),this.app.uiManager.hint.open(this.lang.hello),s.prototype.init.call(this,t),s.prototype.start.call(this)},T.prototype.preload=function(){return this.loader.add(Object.values(h.Assets.Assets)),s.prototype.preload.call(this)},T.prototype.reset=function(){this._progress=0,this.mazeView.destroy({children:!0}),this.mazeView=void 0,this.gameState.current=void 0,this.ghost.reset(),this._allowMovement=!1},T.prototype.onPlayerNearAtEnd=function(t){var e,n,i=this;void 0===t&&(t=!1),this._lastNear==t||this._allowMovement||(this._lastNear=t,this.levelData&&(n=this.progress==this.levelData.gems,t?(e=this.ghost.showBalloon(this.levelData.gems),this.sounds.Play("ghost"),n&&(t=new w.Tween(this.ghost).to({angle:180},200),n=new w.Tween(this.ghost.position).to({y:this.ghost.y-600},800),e.chain(t,this.ghost.hideBaloon()),t.chain(n),n.onComplete(function(){i.mazeView.endCell.data.wall[1]=!1}),this._allowMovement=!0)):this.ghost.hideBaloon()))},T.prototype.onEndReached=function(){var t=this;this.progress<this.levelData.gems||(this.gameState.current=l.GameState.PREWIN,new w.Tween(this.player.position).to({y:this.player.y-2*p.GameConfig.stepLen},2*p.GameConfig.stepDuration*1e3).onComplete(function(){t.gameState.current=l.GameState.WIN}).start())},T.prototype.onMazeBuilded=function(){this.mazeView=this.mazeBuilder.buildMaze(this.maze,this.levelData?this.levelData.gems:5),this.mazeView.y-=this.mazeView.height,this.gameLevel.addChild(this.mazeView),this.player.mazeView=this.mazeView,this.player.place(this.mazeView.startCell),this.ghost.position=this.mazeView.endCell.getGlobalCenter(),this.ghost.y+=200,this.mazeView.endCell.data.wall[1]=!0,this.levelData&&this.ghost.setAmount(this.levelData.gems),this.spot.position.copyFrom(this.player.position),this.updateCamera()},T.prototype.setLevel=function(t){var e=this;this.apiData.current=t,this.levelData=p.GameConfig.levels[t-1],this.spotPower=this.levelData.power,this.player.move(new PIXI.Point),this.reset(),this.maze.build(this.levelData.size,this.levelData.size).then(function(){e.onMazeBuilded(),e.gameState.current=l.GameState.GAME})},T.prototype.reload=function(){this.setLevel(this.apiData.current)},T.prototype.popupOpened=function(t){t==g.IPopup.MENU&&this.app.uiManager.setOptions({showArrows:!1,level:this.apiData.lastOpenedLevel})},T.prototype.softPause=function(){return this.player.move(new PIXI.Point(0,0)),s.prototype.softPause.call(this)},T.prototype.onStateEnter=function(n){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:switch(n){case l.GameState.PRE:return[3,1];case l.GameState.GAME:return[3,2];case l.GameState.PREWIN:return[3,3];case l.GameState.WIN:return[3,4];case l.GameState.LOSE:return[3,7]}return[3,11];case 1:return this.ui.setOptions({showProgress:!1,progress:0,level:this.apiData.lastOpenedLevel}),this.ui.pushPopup(g.IPopup.MENU,!0,d.PopupType.START),[3,11];case 2:return this.ui.setOptions({showProgress:!0,progress:0,showArrows:c.M2.mobile,level:this.apiData.current,progressMax:this.levelData.gems}),this.ui.progress=0,[3,11];case 3:return[3,11];case 4:return this.apiData.levelSucsess(),this.ui.setOptions({showProgress:!1,progress:0,showArrows:!1,level:this.apiData.lastOpenedLevel}),[4,this.ui.pushPopup(g.IPopup.MENU,!0,d.PopupType.WIN)];case 5:return t.sent(),[4,c.M2.Delay(1e3)];case 6:return(t.sent(),this.gameState.current!==l.GameState.WIN)?[2]:(this.ui.hint.open(this.lang.endings),[3,11]);case 7:return this.apiData.levelFailed(),this.ui.setOptions({showProgress:!1,progress:0,showArrows:!1,level:this.apiData.lastOpenedLevel}),this.sounds.Play("dark"),[4,c.M2.Delay(1e3)];case 8:return t.sent(),[4,this.ui.pushPopup(g.IPopup.MENU,!0,d.PopupType.LOSE)];case 9:return t.sent(),[4,c.M2.Delay(2e3)];case 10:return(t.sent(),this.gameState.current!==l.GameState.LOSE)?[2]:(e=this.apiData.loosesAtRun%3==0&&0<this.apiData.loosesAtRun,this.ui.hint.open(e?this.lang.falling_3times:this.lang.falling,this.ui.sadNeoo),[3,11]);case 11:return[2]}})})},T.prototype.pause=function(){this.player.move(new PIXI.Point(0,0)),this.app.uiManager.onPause(),s.prototype.pause.call(this)},T.prototype.resume=function(){this.app.uiManager.onResume(),s.prototype.resume.call(this)},T.prototype.update=function(t){var e;this._isPaused||(this.spot.x=this.player.x+100*Math.sin(this.player.rotation),this.spot.y=this.player.y-100*Math.cos(this.player.rotation),this.gameState.current==l.GameState.GAME&&this.mazeView&&(this.input.update(),this.player.move(this.input.axis),this.player.update(t),this.spotPower-=.001*t.deltaMS,this.spotPower<=1&&(this.gameState.current=l.GameState.LOSE),e=this.player.currentCell,t=this.mazeView.endCell,t=Math.abs(e.data.x-t.data.x)+Math.abs(e.data.y-t.data.y),this.onPlayerNearAtEnd(t<=1),this.updateGems(),this.updateCamera()))},T.prototype.updateGems=function(){for(var r=this,o=this.mazeView.gems,a=this.mazeView.toLocal(this.player.position,this.gameLevel,void 0,!0),s=this,t=o.length-1;0<=t;t--)!function(t){var e=o[t],n=Math.abs(a.x-e.x),i=Math.abs(a.y-e.y);Math.sqrt(Math.pow(n,2)+Math.pow(i,2))<=.75*p.GameConfig.stepLen&&(s.progress++,s.spotPower+=p.GameConfig.gemtopower,o.splice(t,1),s.gameLevel.addChild(e),s.gameLevel.toLocal(e.position,s.mazeView,e.position,!0),new w.Tween({a:0}).to({a:1},200).onUpdate(function(t){e.x-=(e.x-r.player.x)*t.a,e.y-=(e.y-r.player.y)*t.a}).onComplete(function(){e.destroy(),r.sounds.Play("catching")}).start())}(t)},T.prototype.updateCamera=function(){var t,e;this.mazeView&&(t=this.player.x-.5*this.app.width,e=this.player.y+.5*this.app.height,this.gameLevel.pivot.x=c.M2.clamp(t,0,this.mazeView.width-this.app.width),this.gameLevel.pivot.y=c.M2.clamp(e,-this.mazeView.height+this.app.height,0))},T);function T(){var t=s.call(this)||this;return t._progress=0,t._power=0,t._lastNear=!1,t._allowMovement=!1,t.input=new m.InputHandler(!1,c.M2.mobile),t.apiData=new u.APIData("Maze",t),t.stage=new PIXI.Container,t.gameLevel=new PIXI.Container,t.gameLevel.sortableChildren=!0,t.loader=new PIXI.Loader(h.Assets.BaseDir),t}n.Maze=r},{"../shared/APIData":24,"../shared/BaseGame":26,"../shared/CrossplatformInputHandler":28,"../shared/M2":29,"../shared/Sound":31,"../shared/ui/IUIListener":37,"../shared/ui/Popup":39,"../shared/ui/UiManager":41,"./Assets":10,"./GameConfig":11,"./Ghost":12,"./Maze":13,"./MazeBuilder":14,"./Player":16,"./Spot":17,"@tweenjs/tween.js":1}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){PIXI.Container.prototype.getChildByPath=function(t){if(this instanceof PIXI.Container&&0!=this.children.length){for(var e=this,t=t.split("/"),n=new RegExp("(?:{{0})-?d+(?=})"),i=0,r=t;i<r.length;i++){var o,a=r[i];if(null==e||!(e instanceof PIXI.Container)){e=void 0;break}0!=a.trim().length&&(e=(o=a.match(n))?((o=parseInt(o[0]))<0&&(o+=e.children.length),o>=e.children.length?void 0:e.children[o]):e.getChildByName(a))}return e}},PIXI.Container.prototype.addGlobalChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.transform.updateLocalTransform();for(var n=new PIXI.Matrix,i=this.transform.localTransform.clone().invert(),r=0;r<t.length;r++){var o=t[r];o.transform.updateLocalTransform(),n.copyFrom(i),n.append(o.localTransform),t[r].transform.setFromMatrix(n)}return this.addChild.apply(this,t)}}},{}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){PIXI.DisplayObject.prototype.replaceWithTransform=function(t){t.updateTransform(),t.parent&&t.parent.addChildAt(this,t.parent.getChildIndex(t)),this.position.copy(t.position),this.scale.copy(t.scale),this.rotation=t.rotation,this.updateTransform()}}},{}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.KeyInputHandler=void 0;var i=(r.upHandler=function(t){t.preventDefault(),r.IsKeyDown[t.keyCode]=!1,r.events.emit("keyup",t)},r.downHandler=function(t){t.preventDefault(),r.IsKeyDown[t.keyCode]=!0,r.events.emit("keydown",t)},r.focusOut=function(t){r.IsKeyDown=[]},r.BindKeyHandler=function(t){(r.latestDom=t).addEventListener("keydown",r.downHandler),t.addEventListener("keyup",r.upHandler),t.addEventListener("blur",r.focusOut)},r.ReleaseKeyHandler=function(){r.latestDom&&(r.latestDom.removeEventListener("keydown",r.downHandler),r.latestDom.removeEventListener("keyup",r.upHandler),r.latestDom.removeEventListener("blur",r.focusOut),r.latestDom=void 0),r.IsKeyDown=[],r.events.removeAllListeners()},r.IsKeyDown=[],r.events=new PIXI.utils.EventEmitter,r);function r(){}n.KeyInputHandler=i},{}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){PIXI.Loader.prototype.filter=function(e){if(!e)return[];var n=this.resources,i=[];return Object.keys(n).forEach(function(t){e(n[t])&&i.push(n[t])}),i}}},{}],23:[function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("./ContainerExt")),o=i(t("./DisplayExt")),a=i(t("./LoaderExt"));n.default=function(){r.default(),o.default(),a.default()}},{"./ContainerExt":19,"./DisplayExt":20,"./LoaderExt":22}],24:[function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.APIData=void 0;var r=t("../index"),o=t("../GA"),t=(a.prototype.init=function(){if(!this._inited)try{var t=this._apiBridge.getGameData(this._name),t=i(i({},{level:1,score:0}),t||{});if(o.GA.log(this._name,{eventAction:"getData",data:t}),t&&!t.error){if(t.data instanceof Array){for(var e=0;e<Math.min(t.data.length,this.levels.length);e++)this.levels[e].opened=t.data[e].opened,this.levels[e].playing=t.data[e].playing;return void(this._inited=!0)}for(e=0;e<this.levels.length;e++)this.levels[e].opened=t.level>=e+1,this.levels[e].playing=~~this.levels[e].opened;this.levels[t.level-1].playing=0}this._inited=!0}catch(t){o.GA.error(t,!0)}},Object.defineProperty(a.prototype,"lastOpenedLevel",{get:function(){this.init();for(var t=0,e=0;e<this.levels.length;e++)this.levels[e].opened&&t++;return t},enumerable:!1,configurable:!0}),a.prototype.levelFailed=function(){this._loosesAtRun++,this._winsAtRun=0,this._apiBridge.setGameData(this._name,{level:this.lastOpenedLevel,score:2e3*(this.lastOpenedLevel-1),data:this.levels}),this._apiBridge.submitGameState(this._name,{type:"other",data:{reason:"fail",message:"Level failed"}})},a.prototype.levelSucsess=function(){this._loosesAtRun=0,this._winsAtRun++,this.levels[this._current].playing++,this._current+1<this.levels.length&&(this.levels[this._current+1].opened=!0),this._apiBridge.submitGameState(this._name,{type:"other",data:{reason:this._current==this.levels.length-1?"gameComplete":"success",message:"Level success"}}),this._apiBridge.setGameData(this._name,{level:this.lastOpenedLevel,score:2e3*(this.lastOpenedLevel-1),data:this.levels})},a.prototype.submitLoadingProgress=function(t,e){this._apiBridge.submitGameState(this._name,{type:"loading",progress:t,data:e})},a.prototype.submitState=function(t){this._apiBridge.submitGameState(this._name,t)},Object.defineProperty(a.prototype,"current",{get:function(){return this._current+1},set:function(t){this._current=Math.min(this.lastOpenedLevel-1,t-1)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loosesAtRun",{get:function(){return this._loosesAtRun},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"winsAtRun",{get:function(){return this._winsAtRun},enumerable:!1,configurable:!0}),a);function a(t,e){if(this.levels=[{opened:!0,playing:0},{opened:!1,playing:0},{opened:!1,playing:0}],!r.App.instance)throw new Error("Main app must be instanced!");this._name=t,this._loosesAtRun=0,this._winsAtRun=0,this._apiBridge=r.App.instance.api,this._game=e}n.APIData=t},{"../GA":6,"../index":9}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Assets=void 0;t=t("./Config");n.Assets={BaseDir:t.Config.BaseResDir,Assets:{"ui-atlas":{name:"ui-atlas",url:"./ui/en_US/ui-atlas.json"},"ui-map":{name:"ui-map",url:"./ui/ui-map.json"}},AssetsTranslated:{en_US:{"ui-atlas":{name:"ui-atlas",url:"./ui/en_US/ui-atlas.json"}}}}},{"./Config":27}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BaseGame=n.GameState=void 0;var i,r=t("./StateBech");(t=i=n.GameState||(n.GameState={}))[t.PRE=0]="PRE",t[t.GAME=1]="GAME",t[t.PREWIN=2]="PREWIN",t[t.WIN=3]="WIN",t[t.LOSE=4]="LOSE";o.prototype.init=function(t){this.app=t,this.apiData.submitState({type:"init"})},o.prototype.start=function(){this.apiData.submitState({type:"start"})},o.prototype.preload=function(){var n=this;return this.apiData&&this.loader.on("progress",function(t,e){n.apiData.submitLoadingProgress(t.progress,{name:e.name})}),this.loader},o.prototype.softPause=function(){var t=this.gameState.current==i.GAME&&!this._isPaused;return this._isPaused=!0,t},o.prototype.softResume=function(){this._isPaused&&(this._isPaused=!1)},o.prototype.pause=function(){this.softPause(),this.input&&this.input.unbindInput(),this.apiData.submitState({type:"pause"})},o.prototype.resume=function(){this.input&&this.input.bindInput(),this.apiData.submitState({type:"resume"})},o.prototype.stop=function(){for(var t in this.input&&this.input.unbindInput(),this.loader.resources){var e=this.loader.resources[t];if(e.texture&&e.texture.destroy(!0),e.textures)for(var n in e.textures)e.textures[n]&&e.textures[n].destroy(!0)}this.stage.destroy({children:!0,texture:!0,baseTexture:!0}),this.loader.reset(),this.apiData.submitState({type:"close"})},o.prototype.update=function(t){this.input&&this.input.update()},t=o;function o(){this.gameState=new r.StateBech,this._isPaused=!1}n.BaseGame=t},{"./StateBech":32}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0,n.Config={ReferenceSize:{width:1080,height:1720,resolution:1},AllowAudio:!0,PausedInBackground:!0,TextStyle:{fontSize:32},BaseResDir:"./res",Translations:"/translations/manifest.json"}},{}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=void 0;var i,r,o=t("../pixi-utils/InputHandler");(t=i=i||{}).LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",(t=r=r||{})[t.MOBILE=0]="MOBILE",t[t.ACCEL=1]="ACCEL",t[t.KEY=2]="KEY",t[t.NONE=-1]="NONE";a.prototype.accelIsSupported=function(){return"ondevicemotion"in window},a.prototype.bindInput=function(){this._binded||(this.useMobile?(this._bindMobile(),this.useAccel&&this._bindAccel()):this._bindKeys(),this._binded=!0,console.log("Input binded"))},a.prototype._bindMobile=function(){var n=this;if(this.mobileControlls)for(var i=this,t=0,e=["left","right","top","bottom"];t<e.length;t++)!function(t){var e=i.mobileControlls[t+"Button"];e&&(e.on("touchstart",function(){n._mobileKeysStatus[t]=!0,n._active=r.MOBILE}),e.on("touchend",function(){n._mobileKeysStatus[t]=!1}),e.on("touchcancel",function(){n._mobileKeysStatus[t]=!1}),e.on("touchendoutside",function(){n._mobileKeysStatus[t]=!1}))}(e[t]);else console.warn("Mobile Controlls UI cant found\n Assign it in c `controlls` property!")},a.prototype._bindAccel=function(){if(this.accelIsSupported())return this._accelHandlerBinding=this._accelHandler.bind(this),void window.addEventListener("devicemotion",this._accelHandlerBinding);console.log("Sorry, but  device orientaon can't support on you device!")},a.prototype._bindKeys=function(){o.KeyInputHandler.BindKeyHandler(window)},a.prototype.unbindInput=function(){this._unbindMobile(),this._unbindAccel(),this._unbindKeys(),this._binded=!1},a.prototype._unbindMobile=function(){if(this.mobileControlls)for(var t=0,e=["left","right","top","bottom"];t<e.length;t++){var n=e[t],n=this.mobileControlls[n+"Button"];n&&(n.removeAllListeners("touchstart"),n.removeAllListeners("touchend"),n.removeAllListeners("touchcancel"),n.removeAllListeners("touchendoutside"),n.removeAllListeners("touchmove"))}},a.prototype._accelHandler=function(t){this.useAccel&&(this._latestAccelX=this._accelX,this._accelX=t.accelerationIncludingGravity.x,this._latestAccelX&&.25<Math.abs(this._accelX-this._latestAccelX)&&(this._active=r.ACCEL))},a.prototype._unbindAccel=function(){window.removeEventListener("devicemotion",this._accelHandlerBinding)},a.prototype._unbindKeys=function(){o.KeyInputHandler.ReleaseKeyHandler()},Object.defineProperty(a.prototype,"axis",{get:function(){return this._axis.clone()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"keys",{get:function(){return o.KeyInputHandler.IsKeyDown},enumerable:!1,configurable:!0}),a.prototype.update=function(){switch(this._axis.x=0,this._axis.y=0,this.useAccel||this.useMobile||(this._active=r.KEY),this._active){case r.MOBILE:this._axis.x=~~this._mobileKeysStatus[i.RIGHT]-~~this._mobileKeysStatus[i.LEFT],this._axis.y=~~this._mobileKeysStatus[i.BOTTOM]-~~this._mobileKeysStatus[i.TOP];break;case r.KEY:this._axis.x=~~o.KeyInputHandler.IsKeyDown[39]-~~o.KeyInputHandler.IsKeyDown[37],this._axis.y=~~o.KeyInputHandler.IsKeyDown[40]-~~o.KeyInputHandler.IsKeyDown[38];case r.ACCEL:if(Math.abs(this._accelX)<.25)return;var t=Math.max(-3,Math.min(3,this._accelX))/3;this._axis.x=-t}},t=a;function a(t,e){void 0===t&&(t=!1),this._axis=new PIXI.Point,this.useMobile=!1,this.useAccel=!1,this._binded=!1,this._active=r.NONE,this._mobileKeysStatus={},this._latestAccelX=void 0,this._accelX=0,e=null==e?PIXI.utils.isMobile.any:e,this.useAccel=t&&e,this.useMobile=e}n.InputHandler=t},{"../pixi-utils/InputHandler":21}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.M2=void 0;var i=(r.randint=function(t,e){return null==e?Math.floor(r.rand(t)):Math.floor(r.rand(e-t))+t},r.rand=function(t,e){return null==e?Math.random()*t:Math.random()*(e-t)+t},Object.defineProperty(r,"mobile",{get:function(){return PIXI.utils.isMobile.any},enumerable:!1,configurable:!0}),r.randKey=function(t,e){var n=t,i=1,r=0;if(!e)for(var o in i=0,n)r<n[o]&&(r=n[o],e=o),i+=n[o];var a=Math.random()*i;for(o in n){if(a<n[o])return o;a-=n[o]}return e},r.AngleDist=function(t,e,n){n=(n=void 0===n?!0:n)?360:2*Math.PI,t=(e-t)%n;return 2*t%n-t},r.clamp=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),Math.max(e,Math.min(n,t))},r.Delay=function(e){return new Promise(function(t){return setTimeout(t,e)})},r);function r(){}n.M2=i},{}],30:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.Multilang=void 0;var a,s=t("./Config"),r=(a=PIXI.utils.EventEmitter,r(l,a),l.prototype.preload=function(t){var n=this;this.manifest[t]||(t="en_US");var e=this.manifest[t];this._lang=t;t=s.Config.Translations.substr(0,s.Config.Translations.lastIndexOf("/"));this.loader.add(t+"/"+e.url).load().on("load",function(t,e){n.langdata=e.data,n.emit("loaded")})},l.prototype.getTextBase=function(t){var e=this.langdata[t]||{},t=this.langdata.ANY||{};return o(o({},t),e)},l.prototype.map=function(t,e,n){t=this.getTextBase(t);if(!t)return[e];var i,t=t[e],r=[];if(!t)return[e];for(i in r=t instanceof Array?t:[t],n=n||{})for(var o=0;o<r.length;o++)r[o]=r[o].replace(new RegExp("{"+i+"}","g"),""+i);return r},l);function l(t){var e=a.call(this)||this;return e.langdata={},e.manifest=t,e._lang="en_US",e.loader=new PIXI.Loader(s.Config.BaseResDir),e}n.Multilang=r},{"./Config":27}],31:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.SoundManager=n.SoundGrouper=void 0;var a=t("./Config"),s=o(t("../sounds.json")),l=t("howler"),t=(u.createManager=function(e){var t=new p;if(this.managers[e]=t,!a.Config.AllowAudio)return console.warn("Audio disabled in Config.AllowAudio! SoundManager is blank"),t;var i=a.Config.BaseResDir;e=e||"Any";var n=s.default.list.filter(function(t){return t.split("/")[1].trim()==e}).map(function(t){var e=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")),n=0<s.default.preloads.filter(function(t){return-1<e.indexOf(t)}).length;return{name:e,src:i+"/"+s.default.baseDir+"/"+t,preload:s.default.preloadAny||n}});return t.preload(n||[]),t},u.managers={},u);function u(){}n.SoundGrouper=t;var h,p=(h=PIXI.utils.EventEmitter,r(c,h),c.prototype.preload=function(t){for(var e=this,n=(t.length,0),i=t;n<i.length;n++){var r=i[n],o=new l.Howl({src:r.src,preload:r.preload});r.preload&&(this._totalsPreloads++,o.on("load",function(){e._loaded++,e.emit("progress",{progress:e._loaded/e._totalsPreloads}),e._totalsPreloads==e._errors+e._loaded&&e.emit("load",e)}),o.on("loaderror",function(t){e._errors++,e.emit("loaderror",t),e._totalsPreloads==e._errors+e._loaded&&e.emit("load",e)})),this.sounds[r.name]=o}},c.prototype.Play=function(t,e){var n=this;void 0===e&&(e={}),console.log("Request sound:",t);var i=this.sounds[t];if(i){if("unloaded"==i.state())return i.load(),void i.once("load",function(){n.Play(t,e)});i.loop(e.loop),i.play(),e.fade?i.fade(0,null==e.volume?1:e.volume,1):i.volume(null==e.volume?1:e.volume)}return i},c.prototype.PlayShotAsync=function(t){var e=this.Play(t);return e&&new Promise(function(t){e.once("end",function(){return t(e)})})},c.prototype.Stop=function(t,e){var n=this;void 0===e&&(e=!1),t?this.sounds[t]&&(e?(e=this.sounds[t].volume(),this.sounds[t].fade(e,0,1),setTimeout(function(){n.sounds[t].stop()},500)):this.sounds[t].stop()):Object.values(this.sounds).forEach(function(t){return t.stop()})},c);function c(){var t=null!==h&&h.apply(this,arguments)||this;return t.sounds={},t._totalsPreloads=0,t._loaded=0,t._errors=0,t}n.SoundManager=p},{"../sounds.json":43,"./Config":27,howler:2}],32:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StateBech=void 0;var o,r=(o=PIXI.utils.EventEmitter,r(a,o),a.prototype.send=function(t){this._before=this._current,this._current=t,this._current&&this.emit("leave",this._current),this.emit("enter",t)},Object.defineProperty(a.prototype,"current",{get:function(){return this._current},set:function(t){this.send(t)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"before",{get:function(){return this._before},enumerable:!1,configurable:!0}),a.prototype.release=function(){this.removeAllListeners()},a);function a(){return o.call(this)||this}n.StateBech=r},{}],33:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AnimatedPopup=void 0;var h,p=t("./Button"),o=t("@tweenjs/tween.js"),a=t("../../index"),r=(h=PIXI.Container,r(s,h),s.prototype.open=function(t){var n=this;return void 0===t&&(t=!1),this.visible=!0,this._animated?Promise.resolve():t?(this._animated=!1,Promise.resolve()):new Promise(function(t){n._animated=!0;var e=n.y;n.y=-(n.width-n.pivot.y),new o.Tween(n).to({y:e},n.fadeDuration).onComplete(function(){t(),n._animated=!1}).start()})},s.prototype.close=function(t){var e=this;if(void 0===t&&(t=!1),this._animated)return Promise.resolve();if(t)return this.visible=!1,this._animated=!1,Promise.resolve();this._animated=!0;var n=this.y,i=a.App.instance.height+this.pivot.y;return new Promise(function(t){new o.Tween(e).to({y:i},e.fadeDuration).onComplete(function(){e.visible=!1,e.y=n,e._animated=!1,t()}).start()})},s.prototype.reset=function(){for(var t in this.close(!0),this.buttons)this.buttons[t].reset();this.interactiveChildren=!0},s);function s(t,e){void 0===e&&(e={});var n=h.call(this)||this;n.fadeDuration=250,n.buttons={},n.texts={},n._animated=!1,n.name=t.name;var i=t.getBounds();n.position.set(i.x,i.y),n.addGlobalChild.apply(n,t.children);for(var r=0,o=e.buttons||[];r<o.length;r++){var a=o[r],s=n.getChildByPath(a+"-btn"),l=n.getChildByPath(a+"-btn:disabled"),u=n.getChildByPath(a+"-btn:text");s&&((u=new p.Button(s,l,u)).name=a,n.buttons[a]=u,n.addChild(u))}return t.destroy(),n.pivot.x=n.width>>1,n.pivot.y=n.height>>1,n}n.AnimatedPopup=r},{"../../index":9,"./Button":34,"@tweenjs/tween.js":1}],34:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Button=void 0;var o,r=(o=PIXI.Container,r(a,o),a.prototype.on=function(t,e,n){return o.prototype.on.call(this,t,e,n),this},a.prototype.clicked=function(t){this.emit("b-click",this)},Object.defineProperty(a.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this.interactive=this.buttonMode=!t,this._mainSprite.visible=!t,this._disabledSprite&&(this._disabledSprite.visible=t)},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.removeAllListeners(),this.on("click",this.clicked,this),this.on("tap",this.clicked,this)},a);function a(t,e,n){var i=o.call(this)||this;if(!t)return i;[t,e,n].forEach(function(t){t&&(t.interactive=t.buttonMode=!1)}),i.interactive=i.buttonMode=!0,i._mainSprite=t,i._disabledSprite=e,i._text=n?n.text:void 0,i._disabled=!1,i.addChild.apply(i,[t,e,n].filter(function(t){return t}));var r=i.getLocalBounds();return i.children.forEach(function(t){t.x-=r.x,t.y-=r.y}),i.x=r.x,i.y=r.y,i.disabled=!1,i.reset(),i}n.Button=r},{}],35:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Controls=void 0;var l,r=(l=PIXI.Container,r(o,l),o.prototype.reset=function(){this.rightButton&&this.rightButton.removeAllListeners(),this.leftButton&&this.leftButton.removeAllListeners(),this.topButton&&this.topButton.removeAllListeners(),this.downButton&&this.downButton.removeAllListeners(),this.interactiveChildren=!0},o);function o(t){var e=l.call(this)||this,n=[],i=t.getBounds();e.position.set(i.x,i.y);for(var r=0,o=["left","right","top","bottom"];r<o.length;r++){var a=o[r],s=t.getChildByPath("arrow-"+a+"-btn");s&&(s.interactive=s.buttonMode=!0,n.push(s),e[a+"Button"]=s)}return e.addGlobalChild.apply(e,n),e}n.Controls=r},{}],36:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Hint=void 0;var o,a=t("./Button"),s=t("../Sound"),r=(o=PIXI.Container,r(l,o),l.prototype.open=function(t,e){var n=this;return this._avatar.texture=e||this._avatarInitTex,this._textData=t,this._textData&&0!=this._textData.length?(this.visible=!0,this._nextStory(),new Promise(function(t){n._comlite=t})):Promise.resolve()},l.prototype.close=function(){this._comlite&&this._comlite(),this._storyIndex=0,this._textData=[],this._comlite=void 0,this.visible=!1},l.prototype._nextStory=function(){this._storyIndex>=this._textData.length?this.close():(this._text.text=this._textData[this._storyIndex],this._storyIndex+=1,s.SoundGrouper.managers.Any.Play("stuckout"))},l);function l(t,e){var n=o.call(this)||this;n._storyIndex=0;var i=t.getChildByPath("hint");n.name=i.name;var r=i.getBounds();n.position.set(r.x,r.y);t=i.height,r=new PIXI.Sprite(PIXI.Texture.WHITE);return r.tint=0,r.alpha=.5,r.width=e.width+50,r.height=e.height+50,r.y=-e.height+t,r.interactive=!0,n.addChild(r),n.addGlobalChild.apply(n,i.children),n._avatar=n.getChildByName("avatar"),n._avatar.anchor.set(0,1),n._avatarInitTex=n._avatar.texture,n._text=n.getChildByPath("text").text,n._text.style.align="left",n._next=new a.Button(n.getChildByName("next-btn")),n.addChild(n._next),n.pivot=i.pivot,i.destroy(),n.pivot.y=t,n._next.on("b-click",function(){n._nextStory()}),n.visible=!1,n}n.Hint=r},{"../Sound":31,"./Button":34}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IPopup=void 0,(n=n.IPopup||(n.IPopup={}))[n.MENU=0]="MENU",n[n.PAUSE=1]="PAUSE",n[n.CLOSING=2]="CLOSING"},{}],38:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Pause=void 0;var o,t=t("./AnimatedPopup"),r=(o=t.AnimatedPopup,r(a,o),a);function a(t){var e=this,t=t.getChildByPath("pause");return(e=o.call(this,t,{buttons:["play","reload","menu"]})||this).reloadButton=e.buttons.reload,e.menuButton=e.buttons.menu,e.playButton=e.buttons.play,e}n.Pause=r},{"./AnimatedPopup":33}],39:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PopupDifficulty=n.LevelButton=n.PopupType=void 0;var l,u=t("./Utils"),o=t("./Button"),a=t("./AnimatedPopup");(t=l=n.PopupType||(n.PopupType={})).START="start",t.LOSE="lose",t.WIN="win";var s,o=(s=o.Button,r(h,s),h);function h(){return null!==s&&s.apply(this,arguments)||this}n.LevelButton=o;var p,r=(p=a.AnimatedPopup,r(c,p),c.prototype.show=function(t,e){for(var n in void 0===t&&(t=l.START),void 0===e&&(e=!1),this._titles)this._titles[n].visible=t==n;return p.prototype.open.call(this,e)},c.prototype.reset=function(){var t,i=this;for(t in p.prototype.reset.call(this),this.close(!0),this.removeAllListeners(),this.buttons)this.buttons[t].reset();this.levelButtons.forEach(function(t,e){var n=e+1;t.on("b-click",function(){i.emit("level-click",n)})}),this.interactiveChildren=!0},c.prototype.setLevelStatus=function(t){for(var e=0;e<this.levelButtons.length;e++){var n=this.levelButtons[e];n.disabled=!t[e].opened,n.icon.visible=!t[e].complete&&t[e].opened}},c.prototype.applyTranslation=function(t){for(var e=0;e<3;e++){var n=this.buttons["level-"+e],i=t[e];n&&i&&(n._text.text=i)}},c);function c(t,e){var n=this,t=u.Utils.findOn(t,"popup");(n=p.call(this,t,{buttons:["menu","level-0","level-1","level-2"]})||this).levelButtons=[];for(var i=0;i<3;i++){var r=n.buttons["level-"+i];r.icon=new PIXI.Sprite(e["cancel-btn.png"]),r.addChild(r.icon),r.icon.x=40,r.icon.y=20,n.levelButtons[i]=r}n.exitButton=n.buttons.menu;t=[l.WIN,l.LOSE,l.START];n._titles={};for(var o=0,a=t;o<a.length;o++){var s=a[o];n._titles[s]=n.getChildByPath("title-"+s)}t=n.getChildByPath("bg");return n.pivot.x=t.x+(t.width>>1),n.pivot.y=t.y-(t.height>>1),n}n.PopupDifficulty=r},{"./AnimatedPopup":33,"./Button":34,"./Utils":42}],40:[function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(r,"__esModule",{value:!0}),r.Progress=r.EXT_FONT_SETTING=void 0;var o=t("./Utils");r.EXT_FONT_SETTING={dropShadow:!0,dropShadowAlpha:.4,dropShadowAngle:.4,dropShadowBlur:2,dropShadowColor:"#307a37",dropShadowDistance:4,stroke:"#307a37",strokeThickness:2};var a,n=(a=PIXI.Container,n(s,a),Object.defineProperty(s.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=Math.max(this.minValue,Math.min(t,this.maxValue)),this._progressSprite.scale.x=(this._progress-this.minValue)/(this.maxValue-this.minValue),this._text.text=this._formatText()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"levelIndex",{get:function(){return this._levelIndex},set:function(t){this._levelIndex=t;t=this.levelHint.replace("{current}",""+t).replace("{total}",""+this.maxLevels);this._levelText.text=t},enumerable:!1,configurable:!0}),s.prototype._formatText=function(){return this.progressHint.replace("{current}",this._progress.toFixed(0)).replace("{total}",this.maxValue.toFixed(0))},s);function s(t){var e=a.call(this)||this;e.maxValue=100,e.minValue=0,e.maxLevels=3,e._progress=0,e.progressHint="Platform: {current}/{from} Done",e.levelHint="Level {index}/{from}";var n=o.Utils.findOn(t,"progress-bar");e.addChild.apply(e,n.children);var i,t=o.Utils.findOn(e,"progress-bar-text");for(i in e._text=t.text,e._progressSprite=o.Utils.findOn(e,"slider"),e.name=n.name,e._levelText=o.Utils.findOn(e,"progress-title-text").text,r.EXT_FONT_SETTING)e._text.style[i]=r.EXT_FONT_SETTING[i],e._levelText.style[i]=r.EXT_FONT_SETTING[i];return n.destroy(),e.progress=0,e}r.Progress=n},{"./Utils":42}],41:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};Object.defineProperty(n,"__esModule",{value:!0}),n.UiManager=n.EXT_FONT_SETTINGS=n.ControlsLayout=void 0;var s,l=t("./Progress"),u=t("./Button"),h=t("./Popup"),p=t("../AssetsLib"),c=t("./Utils"),d=t("./Hint"),f=t("./Pause"),m=t("./AnimatedPopup"),g=t("./IUIListener"),_=t("./Controls"),y=t("../Sound"),v=t("../../GlobalConfig");(t=s=n.ControlsLayout||(n.ControlsLayout={}))[t.NONE=0]="NONE",t[t.HOR=1]="HOR";var x={progress:0,progressMax:100,showProgress:!0,showArrows:!(t[t.FULL=2]="FULL"),level:1,levelHint:"Level {current}/{total}",progressHint:"Progress {current}/{total}",controlLayout:s.NONE};n.EXT_FONT_SETTINGS={dropShadowAlpha:.4,dropShadowAngle:.4,dropShadowBlur:2,dropShadowColor:"#260e00",dropShadowDistance:2,stroke:"#260e00"};var w,r=(w=PIXI.utils.EventEmitter,r(b,w),b.prototype.init=function(t,e){e=e||x;this.app.size;var n=t["ui-atlas"].spritesheet;this.textures=n.textures,this.sadNeoo=this.textures["neeo-dialog-fail.png"],this.happyNeeo=this.textures["neeo-dialog.png"];t=t[p.Assets.Assets["ui-map"].name].data,n=PIXI.tiled.CreateStage(n,t);this.popup=new h.PopupDifficulty(n,this.textures),this.popup.position.set(this.app.width>>1,this.app.height>>1),this.popup.visible=!1,this.popup.setLevelStatus([{opened:!0,complete:!1},{},{}]),this._progress=new l.Progress(n),this._progress.progress=50,this._progress.levelIndex=2,this._exitBtn=new u.Button(n.getChildByPath("settings/exit-btn")),this._pauseBtn=new u.Button(c.Utils.findOn(n,"settings/pause-btn"));t=n.getChildByName("controls_hor");this._controls=new _.Controls(t),this._controls.pivot.y=this._controls.height,this._controls.position.y=this.app.height-v.GlobalConfig.Settings.ControlsBottomOffset,this._controls.visible=!1;t=n.getChildByName("controls_full");this._controls_full=new _.Controls(t),this._controls_full.pivot.y=this._controls_full.height,this._controls_full.position.y=this.app.height-v.GlobalConfig.Settings.ControlsBottomOffset,this._controls_full.visible=!1,this.hint=new d.Hint(n,this.app.size),this.hint.position.y=this.app.height,this.pause=new f.Pause(n),this.pause.position.set(this.app.width>>1,this.app.height>>1),this.pause.close(!0).then();t=n.getChildByPath("exit");this.exit=new m.AnimatedPopup(t,{buttons:["ok","cancel"]}),this.exit.position.set(this.app.width>>1,this.app.height>>1),this.exit.close(!0).then(),n.addChild(this._progress,this._pauseBtn,this._exitBtn,this._controls,this._controls_full,this.popup,this.pause,this.exit,this.hint),this.stage.addChild(n),this.setOptions(o(o({},e),x)),this.reset()},b.prototype.bindListener=function(t){this.reset(),this._uiListener=t},b.prototype.postInit=function(){this.popup.applyTranslation(this._uiListener.lang.levels_button)},b.prototype.update=function(t){},b.prototype.setOptions=function(t){this._options=o(o({},this._options),t),this.level=this._options.level,this.progress=this._options.progress,this._progress.maxValue=this._options.progressMax,this._progress.levelHint=this._options.levelHint,this._progress.progressHint=this._options.progressHint,this._progress.visible=this._options.showProgress,this._controls.visible=this._options.controlLayout==s.HOR&&this._options.showArrows,this._controls_full.visible=this._options.controlLayout==s.FULL&&this._options.showArrows,this._uiListener&&this.popup.setLevelStatus(this._uiListener.apiData.levels.map(function(t){return{opened:t.opened,complete:0<t.playing}})),this.visible=!0},b.prototype.reset=function(){var e=this;this.removeAllListeners(),this._pauseBtn.reset(),this.visible=!1,this.pause.reset(),this.popup.reset(),this.exit.reset(),this._controls.reset(),this._controls_full.reset(),this.clearPopupStack(),this.popup.exitButton.on("b-click",function(){e.controls&&(e.controls.interactiveChildren=!1),e.pause.interactiveChildren=!1,e.popup.interactiveChildren=!1,e.exit.interactiveChildren=!0,e.pushPopup(g.IPopup.CLOSING)}),this.exit.buttons.cancel.on("b-click",function(){e.controls&&(e.controls.interactiveChildren=!0),e.pause.interactiveChildren=!0,e.popup.interactiveChildren=!0,e.exit.interactiveChildren=!0,e.popPopup(!0)}),this.exit.buttons.ok.on("b-click",function(){e.app.stop()}),this._exitBtn.on("b-click",function(){var t;0<e.openedPopup.length||(e.controls&&(e.controls.interactiveChildren=!1),e.pause.interactiveChildren=!1,e.popup.interactiveChildren=!1,e.exit.interactiveChildren=!0,t=function(){e.controls&&(e.controls.interactiveChildren=!0),e.pause.interactiveChildren=!0,e.popup.interactiveChildren=!0,e.exit.interactiveChildren=!0,e._uiListener.softResume(),e.popPopup(!0),e.exit.buttons.cancel.off("b-click",t,e)},e.exit.buttons.cancel.on("b-click",t),e.pushPopup(g.IPopup.CLOSING),e.onPause(!0))}),this._pauseBtn.on("b-click",function(){0==e.openedPopup.length&&e.onPause(!1)}),this.pause.playButton.on("b-click",function(){e.popPopup(!0),e._uiListener.softResume()}),this.pause.reloadButton.on("b-click",function(){e.clearPopupStack(),e._uiListener.reload(),e._uiListener.softResume()}),this.pause.menuButton.on("b-click",function(){e.setOptions({showArrows:!1,showProgress:!1}),e.pushPopup(g.IPopup.MENU,!0,h.PopupType.START)}),this.popup.on("level-click",function(t){e._uiListener.setLevel(t),e._uiListener.softResume(),e.clearPopupStack()})},b.prototype.clearPopupStack=function(){this.openedPopup.forEach(function(t){return t.close(!1)}),this.openedPopup=[]},b.prototype.popPopup=function(t){void 0===t&&(t=!0);var e=this.openedPopup.splice(-1,1)[0];e&&e.close(!t);e=this.openedPopup[this.openedPopup.length-1];return e?e.open(!t):Promise.resolve()},b.prototype.pushPopup=function(t,e){var n=this;void 0===e&&(e=!0);for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];i&&(i==h.PopupType.LOSE?y.SoundGrouper.managers.Any.Play("lose"):i==h.PopupType.WIN&&setTimeout(function(){3==n._uiListener.apiData.current?y.SoundGrouper.managers.Any.Play("win"):y.SoundGrouper.managers.Any.Play("next_level")},0));var o=this.openedPopup[this.openedPopup.length-1];if(o&&o.close(),this._uiListener.popupOpened(t),null!=t)return t==g.IPopup.CLOSING?(this.openedPopup.push(this.exit),this.exit.open(!e)):t==g.IPopup.PAUSE?(this.openedPopup.push(this.pause),this.pause.open(!e)):t==g.IPopup.MENU?(this.openedPopup.push(this.popup),(t=this.popup).show.apply(t,a(i||h.PopupType.START,[!e]))):void 0},b.prototype.onPause=function(t){void 0===t&&(t=!0),this.emit("soft-pause"),this._uiListener.softPause(),0==this.openedPopup.length&&this.pushPopup(g.IPopup.PAUSE,!t)},b.prototype.onResume=function(){},Object.defineProperty(b.prototype,"visible",{get:function(){return this.stage.visible},set:function(t){this.stage.visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"progress",{get:function(){return this._progress.progress},set:function(t){this._progress.progress=t},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"level",{get:function(){return this._progress.levelIndex},set:function(t){this._progress.levelIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"controls",{get:function(){if(this._options.controlLayout!=s.NONE)return this._options.controlLayout==s.HOR?this._controls:this._controls_full},enumerable:!1,configurable:!0}),b);function b(t){var e=w.call(this)||this;return e.stage=new PIXI.Container,e._options=o({},x),e.fromMenu=!1,e.openedPopup=[],e.app=t,e}n.UiManager=r},{"../../GlobalConfig":8,"../AssetsLib":25,"../Sound":31,"./AnimatedPopup":33,"./Button":34,"./Controls":35,"./Hint":36,"./IUIListener":37,"./Pause":38,"./Popup":39,"./Progress":40,"./Utils":42}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var i=(r.LightCopy=function(t){var e;return t instanceof PIXI.Sprite?((e=new PIXI.Sprite(t.texture)).tint=t.tint,e.anchor=t.anchor):t instanceof PIXI.Container&&(e=new PIXI.Container),this._mapTransform(t,e),e},r._mapTransform=function(t,e){t.parent&&t.parent.addChild(e),e.pivot.copyFrom(t.pivot),e.position.copyFrom(t.position),e.scale.copyFrom(t.scale),e.rotation=t.rotation,e.updateTransform()},r.findOn=function(t,e){if(t instanceof PIXI.Container&&0!=t.children.length){for(var n=t,e=e.split("/"),i=new RegExp("(?:{{0})-?d+(?=})"),r=0,o=e;r<o.length;r++){var a,s=o[r];if(null==n||!(n instanceof PIXI.Container)){n=void 0;break}0!=s.trim().length&&(n=(a=s.match(i))?((a=parseInt(a[0]))<0&&(a+=n.children.length),a>=n.children.length?void 0:n.children[a]):n.getChildByName(s))}return n}},r);function r(){}n.Utils=i},{}],43:[function(t,e,n){e.exports={preloadAny:!0,preloads:["main_theme"],baseDir:"/snd/",list:["/Any/lose.mp3","/Any/next_level.mp3","/Any/win.mp3","/Any/stuckout.mp3","/Labirint/catching.mp3","/Labirint/dark.mp3","/Labirint/ghost.mp3","/Labirint/main_theme5.mp3"]}},{}]},{},[9]),function(i){var t;function n(e,n){n.name=e.name,n.tiledId=e.id,n.width=e.width||n.width,n.height=e.height||n.height,n.rotation=(e.rotation||0)*Math.PI/180,e.x&&(n.x=e.x),e.y&&(n.y=e.y),n.visible=null==e.visible||e.visible,n.types=e.type?e.type.split(":"):[];i.Utils.Objectype(e);n.primitive=i.Primitives.BuildPrimitive(e),e.properties&&(n.alpha=e.properties.opacity||1,Object.assign(n,e.properties)),i.Config.debugContainers&&setTimeout(function(){var t=new PIXI.Graphics;t.lineStyle(2,16711680,.7).drawRect(n.x,n.y,e.width,e.height).endFill(),n instanceof PIXI.Sprite&&(t.y-=n.height),n.parent.addChild(t)},30)}(t=i.ContainerBuilder||(i.ContainerBuilder={})).ApplyMeta=n,t.Build=function(t){var e=void 0,e=-1<(t.type?t.type.split(":"):[]).indexOf("mask")?new PIXI.Sprite(PIXI.Texture.WHITE):new i.TiledContainer;return t.gid&&(e instanceof PIXI.Sprite?e.anchor=i.Config.defSpriteAnchor:(e.pivot=i.Config.defSpriteAnchor,e.hitArea=new PIXI.Rectangle(0,0,t.width,t.height))),n(t,e),e}}(TiledOG=TiledOG||{}),function(t){PIXI.tiled=t}(TiledOG=TiledOG||{}),function(i){(i.SpriteBuilder||(i.SpriteBuilder={})).Build=function(t){return function(t){var e=new PIXI.Sprite(PIXI.Texture.EMPTY);t.fromImageLayer||(e.anchor=i.Config.defSpriteAnchor),i.ContainerBuilder.ApplyMeta(t,e);var n=t.img.objectgroup;return n&&(e.primitive=i.Primitives.BuildPrimitive(n.objects[0])),n=t.properties.hFlip,t=t.properties.vFlip,n&&(e.scale.x*=-1,e.anchor.x=1),t&&(e.scale.y*=-1,e.anchor.y=0),e}(t)}}(TiledOG=TiledOG||{}),function(r){function t(t){var e=new r.TiledContainer,n=new PIXI.Text(t.text.text,{wordWrap:t.text.wrap,wordWrapWidth:t.width,fill:r.Utils.HexStringToHexInt(t.text.color)||0,align:t.text.valign||"center",fontFamily:t.text.fontfamily||"Arial",fontWeight:t.text.bold?"bold":"normal",fontStyle:t.text.italic?"italic":"normal",fontSize:t.text.pixelsize||"16px"});n.name=t.name+"_Text",r.Config.roundFontAlpha&&n.texture.once("update",function(){!function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),i=3;i<n.data.length;i+=4)n.data[i]=200<n.data[i]?255:0;e.putImageData(n,0,0)}(n.canvas),n.texture.baseTexture.update(),console.log("update")});var i=t.properties;switch(t.properties={},r.ContainerBuilder.ApplyMeta(t,e),e.pivot.set(0,0),t.text.halign){case"right":n.anchor.x=1,n.position.x=t.width;break;case"center":n.anchor.x=.5,n.position.x=.5*t.width;break;default:n.anchor.x=0,n.position.x=0}switch(t.text.valign){case"bottom":n.anchor.y=1,n.position.y=t.height;break;case"center":n.anchor.y=.5,n.position.y=.5*t.height;break;default:n.anchor.y=0,n.position.y=0}return i&&(n.style.stroke=r.Utils.HexStringToHexInt(t.properties.strokeColor)||0,n.style.strokeThickness=t.properties.strokeThickness||0,n.style.padding=t.properties.fontPadding||0,Object.assign(n,i)),e.addChild(n),e.text=n,e}(r.TextBuilder||(r.TextBuilder={})).Build=t}(TiledOG=TiledOG||{}),function(t){var e=(n.prototype.add=function(t){if(!t)throw"Sheet can't be undefined";this.sheets.push(t)},n.prototype.addTexture=function(t,e){this.images[e]=t},Object.defineProperty(n.prototype,"textures",{get:function(){for(var t={},e=0,n=this.sheets;e<n.length;e++){var i=n[e];Object.assign(t,i.textures)}return Object.assign(t,this.images),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"animations",{get:function(){for(var t={},e=0,n=this.sheets;e<n.length;e++){var i=n[e];Object.assign(t,i.animations)}return t},enumerable:!0,configurable:!0}),n);function n(t){var e=this;this.sheets=[],this.images={},t&&t.forEach(function(t){e.add(t)})}t.MultiSpritesheet=e}(Tiled=Tiled||{});var TiledOG,__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e,n=(e=PIXI.Container,__extends(i,e),i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.layerHeight=0,t.layerWidth=0,t}t.TiledContainer=n}(TiledOG=TiledOG||{}),function(v){var x=!0;function w(t){var e,n,i,r,o={};if(t.properties)if(t.properties instanceof Array)for(var a=0,s=t.properties;a<s.length;a++){var l=s[a],u=l.value;"color"==l.type&&(u=v.Utils.HexStringToHexInt(u)),o[l.name]=u}else o=t.properties;t.gid&&(e=1073741824&(r=t.gid),n=2147483648&r,i=536870912&r,o.vFlip=e,o.hFlip=n,o.dFlip=i,r=536870911&r,t.gid=r),t.properties=o}function i(o,a){var s={};if((s=o instanceof PIXI.LoaderResource?o.data:a)&&"map"==s.type){x&&(console.log("Tiled OG importer!\n eXponenta {rondo.devil[a]gmail.com}"),x=!1);var t=null!=v.Config.usePixiDisplay&&v.Config.usePixiDisplay&&null!=PIXI.display,e=t?PIXI.display.Layer:{},n=t?PIXI.display.Group:{},l=(t&&PIXI.display.Stage,new v.TiledContainer),i=new RegExp(/^.*[\\\/]/);l.layerHeight=s.height,l.layerWidth=s.width;var u="";if(o instanceof PIXI.LoaderResource&&(l.name=o.url.replace(i,"").split(".")[0],u=(u=o.url.replace(a.baseUrl,"")).match(i)[0]),s.layers){var r=0;t&&(s.layers=s.layers.reverse());for(var h=0,p=s.layers;h<p.length;h++){var c=p[h];if("objectgroup"===c.type||"imagelayer"===c.type){w(c);var d=c.properties;if(d.ignore||d.ignoreLoad)console.log("OGParser: ignore loading layer:"+c.name);else{var f=t?new e(new n(void 0!==d.zOrder?d.zOrder:r,!0)):new v.TiledContainer;if(r++,f.tiledId=c.id,f.name=c.name,l.layers={},(l.layers[c.name]=f).visible=c.visible,f.position.set(c.x,c.y),f.alpha=c.opacity||1,v.ContainerBuilder.ApplyMeta(c,f),l.addChild(f),"imagelayer"==c.type&&(c.objects=[{img:{image:u+c.image},gid:123456789,name:c.name,x:c.x+c.offsetx,y:c.y+c.offsety,fromImageLayer:!0,properties:c.properties}]),!c.objects)return;function m(e){if(w(e),e.properties.ignore)return"continue";var t=null;switch(v.Utils.Objectype(e)){case v.Utils.TiledObjectType.IMAGE:if(!e.fromImageLayer){var n=function(t,e,n){for(var i=void 0,r=0;r<t.length;r++)t[r].firstgid<=n&&(i=t[r]);if(!i)return console.log("Image with gid:"+n+" not found!"),null;var o=n-i.firstgid,a=i.tiles.filter(function(t){return t.id==o})[0];return(a=Object.assign({},a))?(a.image=e+a.image,a):(console.log("Load res MISSED gid:"+o),null)}(s.tilesets,u,e.gid);if(!n)return"continue";e.img=n}var i=t=v.SpriteBuilder.Build(e),r=void 0;if(a instanceof PIXI.Loader?r=a.resources[e.img.image]:o instanceof PIXI.Spritesheet&&(r=o.textures[e.img.image]),r)r instanceof PIXI.LoaderResource?r.isComplete?(i.texture=r.texture,e.fromImageLayer&&i.scale.set(1)):r.onAfterMiddleware.once(function(t){i.texture=r.texture,e.fromImageLayer&&i.scale.set(1)}):r&&(i.texture=r,e.fromImageLayer&&i.scale.set(1));else{if(!(a instanceof PIXI.Loader))return"continue";a.add(e.img.image,{parentResource:o},function(){var t=a.resources[e.img.image].texture;i.texture=t,e.fromImageLayer&&i.scale.set(1)})}break;case v.Utils.TiledObjectType.TEXT:t=v.TextBuilder.Build(e);break;default:t=v.ContainerBuilder.Build(e)}v.Config.usePixiDisplay?(t.parentGroup=f.group,l.addChildAt(t,g)):f.addChildAt(t,g),g++}for(var g=0,_=0,y=c.objects;_<y.length;_++)m(y[_])}}else console.warn("OGParser support only OBJECT or IMAGE layes!!")}}return l}}v.CreateStage=i,v.Parser={Parse:function(t,e){var n=i(t,this);t.stage=n,e()},use:function(t,e){v.Parser.Parse.call(this,t,e)},add:function(){console.log("Now you use Tiled!")}}}(TiledOG=TiledOG||{}),function(f){!function(t){var e,r=(e=PIXI.Rectangle,__extends(n,e),n);function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="",t.types=[],t.visible=!0,t}t.TiledRect=r;var i,o=(i=PIXI.Point,__extends(a,i),a);function a(t,e){e=i.call(this,t,e)||this;return e.name="",e.types=[],e.visible=!0,e}t.TiledPoint=o;var s,l=(s=PIXI.Polygon,__extends(u,s),Object.defineProperty(u.prototype,"x",{get:function(){return this._x},set:function(t){var e=t-this._x;this._x=t;for(var n=0;n<this.points.length;n+=2)this.points[n]+=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"y",{get:function(){return this._y},set:function(t){var e=t-this._y;this._y=t;for(var n=1;n<this.points.length;n+=2)this.points[n]+=e},enumerable:!0,configurable:!0}),u.prototype.getBounds=function(){for(var t=new PIXI.Rectangle,e=this._x,n=this._y,i=0;i<this.points.length;i+=2){var r=this.points[i],o=this.points[i+1];t.x=r<t.x?r:t.x,t.y=o<t.y?o:t.y,e=e<r?r:e,n=n<o?o:n}return t.width=e-t.x,t.height=n-t.y,t},Object.defineProperty(u.prototype,"width",{get:function(){return this.getBounds().width},set:function(t){for(var e=t/this.width,n=0;n<this.points.length;n+=2){var i=(this.points[n]-this._x)*e;this.points[n]=this._x+i}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"height",{get:function(){return this.getBounds().height},set:function(t){for(var e=t/this.height,n=1;n<this.points.length;n+=2){var i=(this.points[n]-this._y)*e;this.points[n]=this._y+i}},enumerable:!0,configurable:!0}),u);function u(t){t=s.call(this,t)||this;return t.name="",t.types=[],t.visible=!0,t._x=0,t._y=0,t}t.TiledPolygon=l;var h=function(t){this.name="",this.types=[],this.visible=!0,this.points=[],this.points=t.slice()};t.TiledPolypine=h;var p,c=(p=PIXI.Ellipse,__extends(d,p),d);function d(t,e,n,i){i=p.call(this,t,e,n,i)||this;return i.name="",i.types=[],i.visible=!0,i}t.TiledEllipse=c,t.BuildPrimitive=function(e){if(e){var t=void 0,n=f.Utils.Objectype(e);switch(e.x=e.x||0,e.y=e.y||0,n){case f.Utils.TiledObjectType.ELLIPSE:t=new c(e.x+.5*e.width,e.y+.5*e.height,.5*e.width,.5*e.height);break;case f.Utils.TiledObjectType.POLYGON:var i=e.polygon.map(function(t){return new PIXI.Point(t.x+e.x,t.y+e.y)}),t=new l(i);break;case f.Utils.TiledObjectType.POLYLINE:i=e.polygon.map(function(t){return new PIXI.Point(t.x+e.x,t.y+e.y)});t=new h(i);break;default:t=new r(e.x,e.y,e.width,e.height)}return t.types=e.type?e.type.split(":"):[],t.visible=e.visible,t.name=e.name,t}}}(f.Primitives||(f.Primitives={}))}(TiledOG=TiledOG||{}),function(t){var e,n;(e=t.Utils||(t.Utils={})).HexStringToHexInt=function(t){if(!t)return 0;if("number"==typeof t)return t;t=7<t.length?t.substr(3,6):t.substr(1,6);try{return parseInt(t,16)}catch(t){return console.warn("Color parse error:",t.message),0}},e.HexStringToAlpha=function(t){if(!t)return 1;if("number"==typeof t)return t;if(t.length<=7)return 1;try{return parseInt(t.substr(1,2),16)/255}catch(t){return console.warn("Alpha parse error:",t.message),1}},(t=n=e.TiledObjectType||(e.TiledObjectType={}))[t.DEFAULT=0]="DEFAULT",t[t.POINT=1]="POINT",t[t.POLYGON=2]="POLYGON",t[t.POLYLINE=3]="POLYLINE",t[t.ELLIPSE=4]="ELLIPSE",t[t.TEXT=5]="TEXT",t[t.IMAGE=6]="IMAGE",e.Objectype=function(t){return t.properties&&t.properties.container?n.DEFAULT:t.gid||t.image?n.IMAGE:null!=t.text?n.TEXT:t.point?n.POINT:t.polygon?n.POLYGON:t.polyline?n.POLYLINE:t.ellipse?n.ELLIPSE:n.DEFAULT}}(TiledOG=TiledOG||{}),function(e){e.Config={defSpriteAnchor:new PIXI.Point(0,1),debugContainers:!1,usePixiDisplay:!1,roundFontAlpha:!1},e.Builders=[e.ContainerBuilder.Build,e.SpriteBuilder.Build,e.TextBuilder.Build],e.InjectToPixi=function(t){(t=void 0===t?void 0:t)&&(e.Config.defSpriteAnchor=t.defSpriteAnchor||e.Config.defSpriteAnchor,e.Config.debugContainers=(null!=t.debugContainers?t:e.Config).debugContainers,e.Config.usePixiDisplay=(null!=t.usePixiDisplay?t:e.Config).usePixiDisplay,e.Config.roundFontAlpha=(null!=t.roundFontAlpha?t:e.Config).roundFontAlpha),PIXI.Loader.registerPlugin(e.Parser)}}(TiledOG=TiledOG||{});var pixi_spine,__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(C){var O,c,t,R=(e.prototype.apply=function(t,e,n,i,r,o,a,s){if(null==t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var l=this.timelines,u=0,h=l.length;u<h;u++)l[u].apply(t,e,n,r,o,a,s)},e.binarySearch=function(t,e,n){void 0===n&&(n=1);var i=0,r=t.length/n-2;if(0==r)return n;for(var o=r>>>1;;){if(t[(o+1)*n]<=e?i=o+1:r=o,i==r)return(i+1)*n;o=i+r>>>1}},e.linearSearch=function(t,e,n){for(var i=0,r=t.length-n;i<=r;i+=n)if(t[i]>e)return i;return-1},e);function e(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=n}C.Animation=R,(n=O=C.MixPose||(C.MixPose={}))[n.setup=0]="setup",n[n.current=1]="current",n[n.currentLayered=2]="currentLayered",(r=c=C.MixDirection||(C.MixDirection={}))[r.in=0]="in",r[r.out=1]="out",(a=t=C.TimelineType||(C.TimelineType={}))[a.rotate=0]="rotate",a[a.translate=1]="translate",a[a.scale=2]="scale",a[a.shear=3]="shear",a[a.attachment=4]="attachment",a[a.color=5]="color",a[a.deform=6]="deform",a[a.event=7]="event",a[a.drawOrder=8]="drawOrder",a[a.ikConstraint=9]="ikConstraint",a[a.transformConstraint=10]="transformConstraint",a[a.pathConstraintPosition=11]="pathConstraintPosition",a[a.pathConstraintSpacing=12]="pathConstraintSpacing",a[a.pathConstraintMix=13]="pathConstraintMix",a[a.twoColor=14]="twoColor";var n=(y.prototype.getFrameCount=function(){return this.curves.length/y.BEZIER_SIZE+1},y.prototype.setLinear=function(t){this.curves[t*y.BEZIER_SIZE]=y.LINEAR},y.prototype.setStepped=function(t){this.curves[t*y.BEZIER_SIZE]=y.STEPPED},y.prototype.getCurveType=function(t){t*=y.BEZIER_SIZE;if(t==this.curves.length)return y.LINEAR;t=this.curves[t];return t==y.LINEAR?y.LINEAR:t==y.STEPPED?y.STEPPED:y.BEZIER},y.prototype.setCurve=function(t,e,n,i,r){var o=.03*(2*-e+i),a=.03*(2*-n+r),s=.006*(3*(e-i)+1),l=.006*(3*(n-r)+1),u=2*o+s,h=2*a+l,p=.3*e+o+.16666667*s,c=.3*n+a+.16666667*l,d=t*y.BEZIER_SIZE,f=this.curves;f[d++]=y.BEZIER;for(var m=p,g=c,_=d+y.BEZIER_SIZE-1;d<_;d+=2)f[d]=m,f[d+1]=g,p+=u,c+=h,u+=s,h+=l,m+=p,g+=c},y.prototype.getCurvePercent=function(t,e){e=C.MathUtils.clamp(e,0,1);var n=this.curves,i=t*y.BEZIER_SIZE,t=n[i];if(t==y.LINEAR)return e;if(t==y.STEPPED)return 0;for(var r=0,o=++i,a=i+y.BEZIER_SIZE-1;i<a;i+=2)if(e<=(r=n[i])){var s=void 0,l=void 0;return(l=i==o?s=0:(s=n[i-2],n[i-1]))+(n[i+1]-l)*(e-s)/(r-s)}t=n[i-1];return t+(1-t)*(e-r)/(1-r)},y.LINEAR=0,y.STEPPED=1,y.BEZIER=2,y.BEZIER_SIZE=19,y);function y(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=C.Utils.newFloatArray((t-1)*y.BEZIER_SIZE)}C.CurveTimeline=n;var i,r=(__extends(d,i=n),d.prototype.getPropertyId=function(){return(t.rotate<<24)+this.boneIndex},d.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+d.ROTATION]=n},d.prototype.apply=function(t,e,n,i,r,o,a){var s,l,u=this.frames,h=t.bones[this.boneIndex];if(n<u[0])switch(o){case O.setup:return void(h.rotation=h.data.rotation);case O.current:var p=h.data.rotation-h.rotation;p-=360*(16384-(16384.499999999996-p/360|0)),h.rotation+=p*r}else n>=u[u.length-d.ENTRIES]?o==O.setup?h.rotation=h.data.rotation+u[u.length+d.PREV_ROTATION]*r:(s=h.data.rotation+u[u.length+d.PREV_ROTATION]-h.rotation,s-=360*(16384-(16384.499999999996-s/360|0)),h.rotation+=s*r):(t=u[(l=R.binarySearch(u,n,d.ENTRIES))+d.PREV_ROTATION],s=u[l],s=this.getCurvePercent((l>>1)-1,1-(n-s)/(u[l+d.PREV_TIME]-s)),l=u[l+d.ROTATION]-t,l=t+(l-=360*(16384-(16384.499999999996-l/360|0)))*s,o==O.setup?(l-=360*(16384-(16384.499999999996-l/360|0)),h.rotation=h.data.rotation+l*r):(l=h.data.rotation+l-h.rotation,l-=360*(16384-(16384.499999999996-l/360|0)),h.rotation+=l*r))},d.ENTRIES=2,d.PREV_TIME=-2,d.PREV_ROTATION=-1,d.ROTATION=1,d);function d(t){var e=i.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t<<1),e}C.RotateTimeline=r;var o,a=(__extends(f,o=n),f.prototype.getPropertyId=function(){return(t.translate<<24)+this.boneIndex},f.prototype.setFrame=function(t,e,n,i){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.X]=n,this.frames[t+f.Y]=i},f.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case O.setup:return l.x=l.data.x,void(l.y=l.data.y);case O.current:l.x+=(l.data.x-l.x)*r,l.y+=(l.data.y-l.y)*r}else{var u,h=0,p=0;n>=s[s.length-f.ENTRIES]?(h=s[s.length+f.PREV_X],p=s[s.length+f.PREV_Y]):(h=s[(u=R.binarySearch(s,n,f.ENTRIES))+f.PREV_X],p=s[u+f.PREV_Y],t=s[u],t=this.getCurvePercent(u/f.ENTRIES-1,1-(n-t)/(s[u+f.PREV_TIME]-t)),h+=(s[u+f.X]-h)*t,p+=(s[u+f.Y]-p)*t),o==O.setup?(l.x=l.data.x+h*r,l.y=l.data.y+p*r):(l.x+=(l.data.x+h-l.x)*r,l.y+=(l.data.y+p-l.y)*r)}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_X=-2,f.PREV_Y=-1,f.X=1,f.Y=2,f);function f(t){var e=o.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*f.ENTRIES),e}C.TranslateTimeline=a;var s,r=(__extends(m,s=a),m.prototype.getPropertyId=function(){return(t.scale<<24)+this.boneIndex},m.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case O.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case O.current:l.scaleX+=(l.data.scaleX-l.scaleX)*r,l.scaleY+=(l.data.scaleY-l.scaleY)*r}else{var u,h,p=0,t=0;t=n>=s[s.length-m.ENTRIES]?(p=s[s.length+m.PREV_X]*l.data.scaleX,s[s.length+m.PREV_Y]*l.data.scaleY):(p=s[(u=R.binarySearch(s,n,m.ENTRIES))+m.PREV_X],t=s[u+m.PREV_Y],h=s[u],h=this.getCurvePercent(u/m.ENTRIES-1,1-(n-h)/(s[u+m.PREV_TIME]-h)),p=(p+(s[u+m.X]-p)*h)*l.data.scaleX,(t+(s[u+m.Y]-t)*h)*l.data.scaleY),1==r?(l.scaleX=p,l.scaleY=t):(h=u=0,h=o==O.setup?(u=l.data.scaleX,l.data.scaleY):(u=l.scaleX,l.scaleY),a==c.out?(p=Math.abs(p)*C.MathUtils.signum(u),t=Math.abs(t)*C.MathUtils.signum(h)):(u=Math.abs(u)*C.MathUtils.signum(p),h=Math.abs(h)*C.MathUtils.signum(t)),l.scaleX=u+(p-u)*r,l.scaleY=h+(t-h)*r)}},m);function m(t){return s.call(this,t)||this}C.ScaleTimeline=r;var l,a=(__extends(g,l=a),g.prototype.getPropertyId=function(){return(t.shear<<24)+this.boneIndex},g.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case O.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case O.current:l.shearX+=(l.data.shearX-l.shearX)*r,l.shearY+=(l.data.shearY-l.shearY)*r}else{var u,h=0,p=0;n>=s[s.length-g.ENTRIES]?(h=s[s.length+g.PREV_X],p=s[s.length+g.PREV_Y]):(h=s[(u=R.binarySearch(s,n,g.ENTRIES))+g.PREV_X],p=s[u+g.PREV_Y],t=s[u],t=this.getCurvePercent(u/g.ENTRIES-1,1-(n-t)/(s[u+g.PREV_TIME]-t)),h+=(s[u+g.X]-h)*t,p+=(s[u+g.Y]-p)*t),o==O.setup?(l.shearX=l.data.shearX+h*r,l.shearY=l.data.shearY+p*r):(l.shearX+=(l.data.shearX+h-l.shearX)*r,l.shearY+=(l.data.shearY+p-l.shearY)*r)}},g);function g(t){return l.call(this,t)||this}C.ShearTimeline=a;var u,a=(__extends(_,u=n),_.prototype.getPropertyId=function(){return(t.color<<24)+this.slotIndex},_.prototype.setFrame=function(t,e,n,i,r,o){t*=_.ENTRIES,this.frames[t]=e,this.frames[t+_.R]=n,this.frames[t+_.G]=i,this.frames[t+_.B]=r,this.frames[t+_.A]=o},_.prototype.apply=function(t,e,n,i,r,o,a){var s=t.slots[this.slotIndex],l=this.frames;if(n<l[0])switch(o){case O.setup:return void s.color.setFromColor(s.data.color);case O.current:var u=s.color,h=s.data.color;u.add((h.r-u.r)*r,(h.g-u.g)*r,(h.b-u.b)*r,(h.a-u.a)*r)}else{var p,c=0,d=0,f=0,m=0;n>=l[l.length-_.ENTRIES]?(c=l[(p=l.length)+_.PREV_R],d=l[p+_.PREV_G],f=l[p+_.PREV_B],m=l[p+_.PREV_A]):(c=l[(t=R.binarySearch(l,n,_.ENTRIES))+_.PREV_R],d=l[t+_.PREV_G],f=l[t+_.PREV_B],m=l[t+_.PREV_A],p=l[t],p=this.getCurvePercent(t/_.ENTRIES-1,1-(n-p)/(l[t+_.PREV_TIME]-p)),c+=(l[t+_.R]-c)*p,d+=(l[t+_.G]-d)*p,f+=(l[t+_.B]-f)*p,m+=(l[t+_.A]-m)*p),1==r?s.color.set(c,d,f,m):(u=s.color,o==O.setup&&u.setFromColor(s.data.color),u.add((c-u.r)*r,(d-u.g)*r,(f-u.b)*r,(m-u.a)*r))}},_.ENTRIES=5,_.PREV_TIME=-5,_.PREV_R=-4,_.PREV_G=-3,_.PREV_B=-2,_.PREV_A=-1,_.R=1,_.G=2,_.B=3,_.A=4,_);function _(t){var e=u.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*_.ENTRIES),e}C.ColorTimeline=a;var h,a=(__extends(w,h=n),w.prototype.getPropertyId=function(){return(t.twoColor<<24)+this.slotIndex},w.prototype.setFrame=function(t,e,n,i,r,o,a,s,l){t*=w.ENTRIES,this.frames[t]=e,this.frames[t+w.R]=n,this.frames[t+w.G]=i,this.frames[t+w.B]=r,this.frames[t+w.A]=o,this.frames[t+w.R2]=a,this.frames[t+w.G2]=s,this.frames[t+w.B2]=l},w.prototype.apply=function(t,e,n,i,r,o,a){var s=t.slots[this.slotIndex],l=this.frames;if(n<l[0])switch(o){case O.setup:return s.color.setFromColor(s.data.color),void s.darkColor.setFromColor(s.data.darkColor);case O.current:var u=s.color,h=s.darkColor,p=s.data.color,c=s.data.darkColor;u.add((p.r-u.r)*r,(p.g-u.g)*r,(p.b-u.b)*r,(p.a-u.a)*r),h.add((c.r-h.r)*r,(c.g-h.g)*r,(c.b-h.b)*r,0)}else{var d,f=0,m=0,g=0,_=0,y=0,v=0,x=0;n>=l[l.length-w.ENTRIES]?(f=l[(d=l.length)+w.PREV_R],m=l[d+w.PREV_G],g=l[d+w.PREV_B],_=l[d+w.PREV_A],y=l[d+w.PREV_R2],v=l[d+w.PREV_G2],x=l[d+w.PREV_B2]):(f=l[(t=R.binarySearch(l,n,w.ENTRIES))+w.PREV_R],m=l[t+w.PREV_G],g=l[t+w.PREV_B],_=l[t+w.PREV_A],y=l[t+w.PREV_R2],v=l[t+w.PREV_G2],x=l[t+w.PREV_B2],d=l[t],d=this.getCurvePercent(t/w.ENTRIES-1,1-(n-d)/(l[t+w.PREV_TIME]-d)),f+=(l[t+w.R]-f)*d,m+=(l[t+w.G]-m)*d,g+=(l[t+w.B]-g)*d,_+=(l[t+w.A]-_)*d,y+=(l[t+w.R2]-y)*d,v+=(l[t+w.G2]-v)*d,x+=(l[t+w.B2]-x)*d),1==r?(s.color.set(f,m,g,_),s.darkColor.set(y,v,x,1)):(u=s.color,h=s.darkColor,o==O.setup&&(u.setFromColor(s.data.color),h.setFromColor(s.data.darkColor)),u.add((f-u.r)*r,(m-u.g)*r,(g-u.b)*r,(_-u.a)*r),h.add((y-h.r)*r,(v-h.g)*r,(x-h.b)*r,0))}},w.ENTRIES=8,w.PREV_TIME=-8,w.PREV_R=-7,w.PREV_G=-6,w.PREV_B=-5,w.PREV_A=-4,w.PREV_R2=-3,w.PREV_G2=-2,w.PREV_B2=-1,w.R=1,w.G=2,w.B=3,w.A=4,w.R2=5,w.G2=6,w.B2=7,w);function w(t){var e=h.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*w.ENTRIES),e}function p(t){this.frames=C.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}C.TwoColorTimeline=a,p.prototype.getPropertyId=function(){return(t.attachment<<24)+this.slotIndex},p.prototype.getFrameCount=function(){return this.frames.length},p.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},p.prototype.apply=function(t,e,n,i,r,o,a){var s,l=t.slots[this.slotIndex];a!=c.out||o!=O.setup?n<(a=this.frames)[0]?o==O.setup&&(o=l.data.attachmentName,l.setAttachment(null==o?null:t.getAttachment(this.slotIndex,o))):(s=0,s=n>=a[a.length-1]?a.length-1:R.binarySearch(a,n,1)-1,s=this.attachmentNames[s],t.slots[this.slotIndex].setAttachment(null==s?null:t.getAttachment(this.slotIndex,s))):(s=l.data.attachmentName,l.setAttachment(null==s?null:t.getAttachment(this.slotIndex,s)))},a=p,C.AttachmentTimeline=a;var v,k=null,a=(__extends(x,v=n),x.prototype.getPropertyId=function(){return(t.deform<<27)+ +this.attachment.id+this.slotIndex},x.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},x.prototype.apply=function(t,e,n,i,r,o,a){var s=t.slots[this.slotIndex],l=s.getAttachment();if(l instanceof C.VertexAttachment&&l.applyDeform(this.attachment)){var u=s.attachmentVertices,t=this.frameVertices,h=t[0].length,p=C.Utils.setArraySize(u,h),s=this.frames;if(n<s[0]){var c=l;switch(o){case O.setup:var d=void 0;return null==c.bones?d=c.vertices:(d=k).length<h&&(k=d=C.Utils.newFloatArray(h)),void C.Utils.arrayCopy(d,0,p,0,h);case O.current:if(1==r)break;if(null==c.bones)for(var f=c.vertices,m=0;m<h;m++)p[m]+=(f[m]-p[m])*r;else{r=1-r;for(var g=0;g<h;g++)p[g]*=r}}}else if(n>=s[s.length-1]){var _=t[s.length-1];if(1==r)C.Utils.arrayCopy(_,0,p,0,h);else if(o==O.setup)if(null==(c=l).bones)for(var f=c.vertices,y=0;y<h;y++){var v=f[y];p[y]=v+(_[y]-v)*r}else for(var x=0;x<h;x++)p[x]=_[x]*r;else for(var w=0;w<h;w++)p[w]+=(_[w]-p[w])*r}else{var u=R.binarySearch(s,n),b=t[u-1],A=t[u],t=s[u],T=this.getCurvePercent(u-1,1-(n-t)/(s[u-1]-t));if(1==r)for(var I=0;I<h;I++){var P=b[I];p[I]=P+(A[I]-P)*T}else if(o==O.setup)if(null==(c=l).bones)for(var f=c.vertices,M=0;M<h;M++){P=b[M],v=f[M];p[M]=v+(P+(A[M]-P)*T-v)*r}else for(var E=0;E<h;E++){P=b[E];p[E]=(P+(A[E]-P)*T)*r}else for(var S=0;S<h;S++){P=b[S];p[S]+=(P+(A[S]-P)*T-p[S])*r}}}},x);function x(t){var e=v.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==k&&(k=C.Utils.newFloatArray(64)),e}function b(t){this.frames=C.Utils.newFloatArray(t),this.events=new Array(t)}function A(t){this.frames=C.Utils.newFloatArray(t),this.drawOrders=new Array(t)}C.DeformTimeline=a,b.prototype.getPropertyId=function(){return t.event<<24},b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},b.prototype.apply=function(t,e,n,i,r,o,a){if(null!=i){var s=this.frames,l=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,i,r,o,a),e=-1;else if(e>=s[l-1])return;if(!(n<s[0])){var u=0;if(e<s[0])u=0;else for(var h=s[u=R.binarySearch(s,e)];0<u&&s[u-1]==h;)u--;for(;u<l&&n>=s[u];u++)i.push(this.events[u])}}},a=b,C.EventTimeline=a,A.prototype.getPropertyId=function(){return t.drawOrder<<24},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},A.prototype.apply=function(t,e,n,i,r,o,a){var s=t.drawOrder,l=t.slots;if(a!=c.out||o!=O.setup){a=this.frames;if(n<a[0])o==O.setup&&C.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var o=0,o=n>=a[a.length-1]?a.length-1:R.binarySearch(a,n)-1,u=this.drawOrders[o];if(null==u)C.Utils.arrayCopy(l,0,s,0,l.length);else for(var h=0,p=u.length;h<p;h++)s[h]=l[u[h]]}}else C.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},a=A,C.DrawOrderTimeline=a;var T,a=(__extends(I,T=n),I.prototype.getPropertyId=function(){return(t.ikConstraint<<24)+this.ikConstraintIndex},I.prototype.setFrame=function(t,e,n,i){t*=I.ENTRIES,this.frames[t]=e,this.frames[t+I.MIX]=n,this.frames[t+I.BEND_DIRECTION]=i},I.prototype.apply=function(t,e,n,i,r,o,a){var s,l,u=this.frames,h=t.ikConstraints[this.ikConstraintIndex];if(n<u[0])switch(o){case O.setup:return h.mix=h.data.mix,void(h.bendDirection=h.data.bendDirection);case O.current:h.mix+=(h.data.mix-h.mix)*r,h.bendDirection=h.data.bendDirection}else n>=u[u.length-I.ENTRIES]?o==O.setup?(h.mix=h.data.mix+(u[u.length+I.PREV_MIX]-h.data.mix)*r,h.bendDirection=a==c.out?h.data.bendDirection:u[u.length+I.PREV_BEND_DIRECTION]):(h.mix+=(u[u.length+I.PREV_MIX]-h.mix)*r,a==c.in&&(h.bendDirection=u[u.length+I.PREV_BEND_DIRECTION])):(l=u[(s=R.binarySearch(u,n,I.ENTRIES))+I.PREV_MIX],t=u[s],t=this.getCurvePercent(s/I.ENTRIES-1,1-(n-t)/(u[s+I.PREV_TIME]-t)),o==O.setup?(h.mix=h.data.mix+(l+(u[s+I.MIX]-l)*t-h.data.mix)*r,h.bendDirection=a==c.out?h.data.bendDirection:u[s+I.PREV_BEND_DIRECTION]):(h.mix+=(l+(u[s+I.MIX]-l)*t-h.mix)*r,a==c.in&&(h.bendDirection=u[s+I.PREV_BEND_DIRECTION])))},I.ENTRIES=3,I.PREV_TIME=-3,I.PREV_MIX=-2,I.PREV_BEND_DIRECTION=-1,I.MIX=1,I.BEND_DIRECTION=2,I);function I(t){var e=T.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*I.ENTRIES),e}C.IkConstraintTimeline=a;var P,a=(__extends(M,P=n),M.prototype.getPropertyId=function(){return(t.transformConstraint<<24)+this.transformConstraintIndex},M.prototype.setFrame=function(t,e,n,i,r,o){t*=M.ENTRIES,this.frames[t]=e,this.frames[t+M.ROTATE]=n,this.frames[t+M.TRANSLATE]=i,this.frames[t+M.SCALE]=r,this.frames[t+M.SHEAR]=o},M.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(n<s[0]){var u=l.data;switch(o){case O.setup:return l.rotateMix=u.rotateMix,l.translateMix=u.translateMix,l.scaleMix=u.scaleMix,void(l.shearMix=u.shearMix);case O.current:l.rotateMix+=(u.rotateMix-l.rotateMix)*r,l.translateMix+=(u.translateMix-l.translateMix)*r,l.scaleMix+=(u.scaleMix-l.scaleMix)*r,l.shearMix+=(u.shearMix-l.shearMix)*r}}else{var h,p=0,c=0,d=0,f=0;n>=s[s.length-M.ENTRIES]?(p=s[(h=s.length)+M.PREV_ROTATE],c=s[h+M.PREV_TRANSLATE],d=s[h+M.PREV_SCALE],f=s[h+M.PREV_SHEAR]):(p=s[(t=R.binarySearch(s,n,M.ENTRIES))+M.PREV_ROTATE],c=s[t+M.PREV_TRANSLATE],d=s[t+M.PREV_SCALE],f=s[t+M.PREV_SHEAR],h=s[t],h=this.getCurvePercent(t/M.ENTRIES-1,1-(n-h)/(s[t+M.PREV_TIME]-h)),p+=(s[t+M.ROTATE]-p)*h,c+=(s[t+M.TRANSLATE]-c)*h,d+=(s[t+M.SCALE]-d)*h,f+=(s[t+M.SHEAR]-f)*h),o==O.setup?(u=l.data,l.rotateMix=u.rotateMix+(p-u.rotateMix)*r,l.translateMix=u.translateMix+(c-u.translateMix)*r,l.scaleMix=u.scaleMix+(d-u.scaleMix)*r,l.shearMix=u.shearMix+(f-u.shearMix)*r):(l.rotateMix+=(p-l.rotateMix)*r,l.translateMix+=(c-l.translateMix)*r,l.scaleMix+=(d-l.scaleMix)*r,l.shearMix+=(f-l.shearMix)*r)}},M.ENTRIES=5,M.PREV_TIME=-5,M.PREV_ROTATE=-4,M.PREV_TRANSLATE=-3,M.PREV_SCALE=-2,M.PREV_SHEAR=-1,M.ROTATE=1,M.TRANSLATE=2,M.SCALE=3,M.SHEAR=4,M);function M(t){var e=P.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*M.ENTRIES),e}C.TransformConstraintTimeline=a;var E,a=(__extends(S,E=n),S.prototype.getPropertyId=function(){return(t.pathConstraintPosition<<24)+this.pathConstraintIndex},S.prototype.setFrame=function(t,e,n){t*=S.ENTRIES,this.frames[t]=e,this.frames[t+S.VALUE]=n},S.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(o){case O.setup:return void(l.position=l.data.position);case O.current:l.position+=(l.data.position-l.position)*r}else{var u,h=0;n>=s[s.length-S.ENTRIES]?h=s[s.length+S.PREV_VALUE]:(h=s[(u=R.binarySearch(s,n,S.ENTRIES))+S.PREV_VALUE],t=s[u],t=this.getCurvePercent(u/S.ENTRIES-1,1-(n-t)/(s[u+S.PREV_TIME]-t)),h+=(s[u+S.VALUE]-h)*t),o==O.setup?l.position=l.data.position+(h-l.data.position)*r:l.position+=(h-l.position)*r}},S.ENTRIES=2,S.PREV_TIME=-2,S.PREV_VALUE=-1,S.VALUE=1,S);function S(t){var e=E.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*S.ENTRIES),e}C.PathConstraintPositionTimeline=a;var D,a=(__extends(L,D=a),L.prototype.getPropertyId=function(){return(t.pathConstraintSpacing<<24)+this.pathConstraintIndex},L.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(o){case O.setup:return void(l.spacing=l.data.spacing);case O.current:l.spacing+=(l.data.spacing-l.spacing)*r}else{var u,h=0;n>=s[s.length-L.ENTRIES]?h=s[s.length+L.PREV_VALUE]:(h=s[(u=R.binarySearch(s,n,L.ENTRIES))+L.PREV_VALUE],t=s[u],t=this.getCurvePercent(u/L.ENTRIES-1,1-(n-t)/(s[u+L.PREV_TIME]-t)),h+=(s[u+L.VALUE]-h)*t),o==O.setup?l.spacing=l.data.spacing+(h-l.data.spacing)*r:l.spacing+=(h-l.spacing)*r}},L);function L(t){return D.call(this,t)||this}C.PathConstraintSpacingTimeline=a;var V,n=(__extends(N,V=n),N.prototype.getPropertyId=function(){return(t.pathConstraintMix<<24)+this.pathConstraintIndex},N.prototype.setFrame=function(t,e,n,i){t*=N.ENTRIES,this.frames[t]=e,this.frames[t+N.ROTATE]=n,this.frames[t+N.TRANSLATE]=i},N.prototype.apply=function(t,e,n,i,r,o,a){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(o){case O.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case O.current:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*r,l.translateMix+=(l.data.translateMix-l.translateMix)*r}else{var u,h=0,p=0;n>=s[s.length-N.ENTRIES]?(h=s[s.length+N.PREV_ROTATE],p=s[s.length+N.PREV_TRANSLATE]):(h=s[(u=R.binarySearch(s,n,N.ENTRIES))+N.PREV_ROTATE],p=s[u+N.PREV_TRANSLATE],t=s[u],t=this.getCurvePercent(u/N.ENTRIES-1,1-(n-t)/(s[u+N.PREV_TIME]-t)),h+=(s[u+N.ROTATE]-h)*t,p+=(s[u+N.TRANSLATE]-p)*t),o==O.setup?(l.rotateMix=l.data.rotateMix+(h-l.data.rotateMix)*r,l.translateMix=l.data.translateMix+(p-l.data.translateMix)*r):(l.rotateMix+=(h-l.rotateMix)*r,l.translateMix+=(p-l.translateMix)*r)}},N.ENTRIES=3,N.PREV_TIME=-3,N.PREV_ROTATE=-2,N.PREV_TRANSLATE=-1,N.ROTATE=1,N.TRANSLATE=2,N);function N(t){var e=V.call(this,t)||this;return e.frames=C.Utils.newFloatArray(t*N.ENTRIES),e}C.PathConstraintMixTimeline=n}(t.core||(t.core={}))}(pixi_spine=pixi_spine||{}),function(t){!function(A){var f=(T.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,i=e.length;n<i;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var o=t*r.timeScale;if(0<r.delay){if(r.delay-=o,0<r.delay)continue;o=-r.delay,r.delay=0}var a=r.next;if(null!=a){var s=r.trackLast-a.delay;if(0<=s){for(a.delay=0,a.trackTime=s+t*a.timeScale,r.trackTime+=o,this.setCurrent(n,a,!0);null!=a.mixingFrom;)a.mixTime+=o,a=a.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var l=r.mixingFrom;for(r.mixingFrom=null;null!=l;)this.queue.end(l),l=l.mixingFrom}r.trackTime+=o}}this.queue.drain()},T.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var i=this.updateMixingFrom(n,e);return 0<t.mixTime&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0==n.totalAlpha&&(t.mixingFrom=n.mixingFrom,t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,n.trackTime+=e*n.timeScale,t.mixTime+=e*t.timeScale,!1)},T.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,i=!1,r=0,o=n.length;r<o;r++){var a=n[r];if(!(null==a||0<a.delay)){i=!0;var s=0==r?A.MixPose.current:A.MixPose.currentLayered,l=a.alpha;null!=a.mixingFrom?l*=this.applyMixingFrom(a,t,s):a.trackTime>=a.trackEnd&&null==a.next&&(l=0);var u=a.animationLast,h=a.getAnimationTime(),p=a.animation.timelines.length,c=a.animation.timelines;if(1==l)for(var d=0;d<p;d++)c[d].apply(t,u,h,e,1,A.MixPose.setup,A.MixDirection.in);else{var f=a.timelineData,m=0==a.timelinesRotation.length;m&&A.Utils.setArraySize(a.timelinesRotation,p<<1,null);for(var g=a.timelinesRotation,d=0;d<p;d++){var _=c[d],y=f[d]>=T.FIRST?A.MixPose.setup:s;_ instanceof A.RotateTimeline?this.applyRotateTimeline(_,t,h,l,y,g,d<<1,m):_.apply(t,u,h,e,l,y,A.MixDirection.in)}}this.queueEvents(a,h),e.length=0,a.nextAnimationLast=h,a.nextTrackLast=a.trackTime}}return this.queue.drain(),i},T.prototype.applyMixingFrom=function(t,e,n){var i=t.mixingFrom;null!=i.mixingFrom&&this.applyMixingFrom(i,e,n);var r=0,o=(r=0==t.mixDuration||1<(r=t.mixTime/t.mixDuration)?1:r)<i.eventThreshold?this.events:null,a=r<i.attachmentThreshold,s=r<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),h=i.animation.timelines.length,p=i.animation.timelines,c=i.timelineData,d=i.timelineDipMix,f=0==i.timelinesRotation.length;f&&A.Utils.setArraySize(i.timelinesRotation,h<<1,null);for(var m,g=i.timelinesRotation,_=i.alpha*t.interruptAlpha,y=_*(1-r),v=0,x=i.totalAlpha=0;x<h;x++){var w=p[x];switch(c[x]){case T.SUBSEQUENT:if(!a&&w instanceof A.AttachmentTimeline)continue;if(!s&&w instanceof A.DrawOrderTimeline)continue;m=n,v=y;break;case T.FIRST:m=A.MixPose.setup,v=y;break;case T.DIP:m=A.MixPose.setup,v=_;break;default:m=A.MixPose.setup,v=_;var b=d[x];v*=Math.max(0,1-b.mixTime/b.mixDuration)}i.totalAlpha+=v,w instanceof A.RotateTimeline?this.applyRotateTimeline(w,e,u,v,m,g,x<<1,f):w.apply(e,l,u,o,v,m,A.MixDirection.out)}return 0<t.mixDuration&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,r},T.prototype.applyRotateTimeline=function(t,e,n,i,r,o,a,s){var l,u,h,p,c,d,f,m;s&&(o[a]=0),1!=i?(h=(l=t).frames,u=e.bones[l.boneIndex],n<h[0]?r==A.MixPose.setup&&(u.rotation=u.data.rotation):(m=0,n>=h[h.length-A.RotateTimeline.ENTRIES]?m=u.data.rotation+h[h.length+A.RotateTimeline.PREV_ROTATION]:(d=h[(c=A.Animation.binarySearch(h,n,A.RotateTimeline.ENTRIES))+A.RotateTimeline.PREV_ROTATION],p=h[c],f=l.getCurvePercent((c>>1)-1,1-(n-p)/(h[c+A.RotateTimeline.PREV_TIME]-p)),m=h[c+A.RotateTimeline.ROTATION]-d,m=d+(m-=360*(16384-(16384.499999999996-m/360|0)))*f+u.data.rotation,m-=360*(16384-(16384.499999999996-m/360|0))),(p=0)==(c=m-(h=(r==A.MixPose.setup?u.data:u).rotation))?p=o[a]:(c-=360*(16384-(16384.499999999996-c/360|0)),f=d=0,f=s?(d=0,c):(d=o[a],o[a+1]),m=0<c,s=0<=d,A.MathUtils.signum(f)!=A.MathUtils.signum(c)&&Math.abs(f)<=90&&(180<Math.abs(d)&&(d+=360*A.MathUtils.signum(d)),s=m),p=c+d-d%360,s!=m&&(p+=360*A.MathUtils.signum(d)),o[a]=p),o[a+1]=c,h+=p*i,u.rotation=h-360*(16384-(16384.499999999996-h/360|0)))):t.apply(e,0,n,null,1,r,A.MixDirection.in)},T.prototype.queueEvents=function(t,e){for(var n=t.animationStart,i=t.animationEnd,r=i-n,o=t.trackLast%r,a=this.events,s=0,l=a.length;s<l;s++){var u=a[s];if(u.time<o)break;u.time>i||this.queue.event(t,u)}for((t.loop?o>t.trackTime%r:i<=e&&t.animationLast<i)&&this.queue.complete(t);s<l;s++)a[s].time<n||this.queue.event(t,a[s])},T.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},T.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){t=this.tracks[t];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var n=e.mixingFrom;if(null==n)break;this.queue.end(n),e.mixingFrom=null,e=n}this.tracks[t.trackIndex]=null,this.queue.drain()}}},T.prototype.setCurrent=function(t,e,n){var i=this.expandToIndex(t);this.tracks[t]=e,null!=i&&(n&&this.queue.interrupt(i),e.mixingFrom=i,e.mixTime=0,null!=i.mixingFrom&&0<i.mixDuration&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)},T.prototype.setAnimation=function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,n)},T.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var i=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,i=!1):this.disposeNext(r));r=this.trackEntry(t,e,n,r);return this.setCurrent(t,r,i),this.queue.drain(),r},T.prototype.addAnimation=function(t,e,n,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,i)},T.prototype.addAnimationWith=function(t,e,n,i){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;n=this.trackEntry(t,e,n,r);return null==r?(this.setCurrent(t,n,!0),this.queue.drain()):(r.next=n,i<=0&&(0!=(t=r.animationEnd-r.animationStart)?i+=t*(1+(r.trackTime/t|0))-this.data.getMix(r.animation,e):i=0)),n.delay=i,n},T.prototype.setEmptyAnimation=function(t,e){t=this.setAnimationWith(t,T.emptyAnimation,!1);return t.mixDuration=e,t.trackEnd=e,t},T.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);n=this.addAnimationWith(t,T.emptyAnimation,!1,n);return n.mixDuration=e,n.trackEnd=e,n},T.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},T.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(A.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},T.prototype.trackEntry=function(t,e,n,i){var r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=n,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==i?0:this.data.getMix(i.animation,e),r},T.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},T.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&r.setTimelineData(null,e,t)}},T.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},T.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},T.prototype.removeListener=function(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)},T.prototype.clearListeners=function(){this.listeners.length=0},T.prototype.clearListenerNotifications=function(){this.queue.clear()},T.prototype.setAnimationByName=function(t,e,n){T.deprecatedWarning1||(T.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,n)},T.prototype.addAnimationByName=function(t,e,n,i){T.deprecatedWarning2||(T.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,n,i)},T.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},T.prototype.hasAnimationByName=function(t){return T.deprecatedWarning3||(T.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},T.emptyAnimation=new A.Animation("<empty>",[],0),T.SUBSEQUENT=0,T.FIRST=1,T.DIP=2,T.DIP_MIX=3,T.deprecatedWarning1=!1,T.deprecatedWarning2=!1,T.deprecatedWarning3=!1,T);function T(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new i(this),this.propertyIDs=new A.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new A.Pool(function(){return new e}),this.data=t}A.AnimationState=f;var e=(n.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},n.prototype.setTimelineData=function(t,e,n){null!=t&&e.push(t);var i=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,e,n):this;null!=t&&e.pop();var r=e,o=e.length-1,a=this.animation.timelines,s=this.animation.timelines.length,l=A.Utils.setArraySize(this.timelineData,s);this.timelineDipMix.length=0;var u=A.Utils.setArraySize(this.timelineDipMix,s);t:for(var h=0;h<s;h++){var p=a[h].getPropertyId();if(n.add(p))if(null!=t&&t.hasTimeline(p)){for(var c=o;0<=c;c--){var d=r[c];if(!d.hasTimeline(p)&&0<d.mixDuration){l[h]=f.DIP_MIX,u[h]=d;continue t}}l[h]=f.DIP}else l[h]=f.FIRST;else l[h]=f.SUBSEQUENT}return i},n.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,n=0,i=e.length;n<i;n++)if(e[n].getPropertyId()==t)return!0;return!1},n.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},n.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},n.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},n.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(n.prototype,"time",{get:function(){return n.deprecatedWarning1||(n.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){n.deprecatedWarning1||(n.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endTime",{get:function(){return n.deprecatedWarning2||(n.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){n.deprecatedWarning2||(n.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),n.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},n.deprecatedWarning1=!1,n.deprecatedWarning2=!1,n);function n(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}A.TrackEntry=e;var l,i=(t.prototype.start=function(t){this.objects.push(l.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(l.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(l.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(l.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(l.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(l.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];switch(i){case l.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(var o=0;o<e.length;o++)e[o].start&&e[o].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case l.interrupt:null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(o=0;o<e.length;o++)e[o].interrupt&&e[o].interrupt(r);break;case l.end:null!=r.listener&&r.listener.end&&r.listener.end(r);for(o=0;o<e.length;o++)e[o].end&&e[o].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case l.dispose:null!=r.listener&&r.listener.dispose&&r.listener.dispose(r);for(o=0;o<e.length;o++)e[o].dispose&&e[o].dispose(r);this.animState.trackEntryPool.free(r);break;case l.complete:null!=r.listener&&r.listener.complete&&r.listener.complete(r);for(o=0;o<e.length;o++)e[o].complete&&e[o].complete(r);var a=A.MathUtils.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,a),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,a);break;case l.event:var s=t[2+n++];null!=r.listener&&r.listener.event&&r.listener.event(r,s);for(o=0;o<e.length;o++)e[o].event&&e[o].event(r,s);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,s)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t);function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}A.EventQueue=i,(r=l=A.EventType||(A.EventType={}))[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event";var r=(o.prototype.start=function(t){},o.prototype.interrupt=function(t){},o.prototype.end=function(t){},o.prototype.dispose=function(t){},o.prototype.complete=function(t){},o.prototype.event=function(t,e){},o);function o(){}A.AnimationStateAdapter2=r}(t.core||(t.core={}))}(pixi_spine=pixi_spine||{}),function(t){var e;function i(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}e=t.core||(t.core={}),i.prototype.setMix=function(t,e,n){var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(null==t)throw new Error("Animation not found: "+e);this.setMixWith(i,t,n)},i.prototype.setMixByName=function(t,e,n){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,n)},i.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");e=t.name+e.name;this.animationToMixTime[e]=n},i.prototype.getMix=function(t,e){e=t.name+e.name,e=this.animationToMixTime[e];return void 0===e?this.defaultMix:e},i.deprecatedWarning1=!1,t=i,e.AnimationStateData=t}(pixi_spine=pixi_spine||{}),function(t){var r;function e(t){this.atlas=t}r=t.core||(t.core={}),e.prototype.newRegionAttachment=function(t,e,n){var i=this.atlas.findRegion(n);if(null==i)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");e=new r.RegionAttachment(e);return e.region=i,e},e.prototype.newMeshAttachment=function(t,e,n){var i=this.atlas.findRegion(n);if(null==i)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");e=new r.MeshAttachment(e);return e.region=i,e},e.prototype.newBoundingBoxAttachment=function(t,e){return new r.BoundingBoxAttachment(e)},e.prototype.newPathAttachment=function(t,e){return new r.PathAttachment(e)},e.prototype.newPointAttachment=function(t,e){return new r.PointAttachment(e)},e.prototype.newClippingAttachment=function(t,e){return new r.ClippingAttachment(e)},t=e,r.AtlasAttachmentLoader=t}(pixi_spine=pixi_spine||{}),function(t){(t=(t=t.core||(t.core={})).BlendMode||(t.BlendMode={}))[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(pixi_spine=pixi_spine||{}),function(t){var T;function I(t,e,n){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}T=t.core||(t.core={}),Object.defineProperty(I.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),I.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},I.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},I.prototype.updateWorldTransformWith=function(t,e,n,i,r,o,a){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=i,this.ascaleY=r,this.ashearX=o,this.ashearY=a,this.appliedValid=!0;var s=this.parent,l=this.matrix;if(null==s){var u=n+90+a,h=T.MathUtils.cosDeg(n+o)*i,p=T.MathUtils.cosDeg(u)*r,c=T.MathUtils.sinDeg(n+o)*i,d=T.MathUtils.sinDeg(u)*r,f=this.skeleton;return f.flipX&&(t=-t,h=-h,p=-p),f.flipY!==I.yDown&&(e=-e,c=-c,d=-d),l.a=h,l.c=p,l.b=c,l.d=d,l.tx=t+f.x,void(l.ty=e+f.y)}var m=s.matrix.a,g=s.matrix.c,_=s.matrix.b,y=s.matrix.d;switch(l.tx=m*t+g*e+s.matrix.tx,l.ty=_*t+y*e+s.matrix.ty,this.data.transformMode){case T.TransformMode.Normal:u=n+90+a,h=T.MathUtils.cosDeg(n+o)*i,p=T.MathUtils.cosDeg(u)*r,c=T.MathUtils.sinDeg(n+o)*i,d=T.MathUtils.sinDeg(u)*r;return l.a=m*h+g*c,l.c=m*p+g*d,l.b=_*h+y*c,void(l.d=_*p+y*d);case T.TransformMode.OnlyTranslation:u=n+90+a;l.a=T.MathUtils.cosDeg(n+o)*i,l.c=T.MathUtils.cosDeg(u)*r,l.b=T.MathUtils.sinDeg(n+o)*i,l.d=T.MathUtils.sinDeg(u)*r;break;case T.TransformMode.NoRotationOrReflection:var v=0,x=n+o-(v=1e-4<(A=m*m+_*_)?(g=_*(A=Math.abs(m*y-g*_)/A),y=m*A,Math.atan2(_,m)*T.MathUtils.radDeg):(_=m=0,90-Math.atan2(y,g)*T.MathUtils.radDeg)),w=n+a-v+90,h=T.MathUtils.cosDeg(x)*i,p=T.MathUtils.cosDeg(w)*r,c=T.MathUtils.sinDeg(x)*i,d=T.MathUtils.sinDeg(w)*r;l.a=m*h-g*c,l.c=m*p-g*d,l.b=_*h+y*c,l.d=_*p+y*d;break;case T.TransformMode.NoScale:case T.TransformMode.NoScaleOrReflection:var b=T.MathUtils.cosDeg(n),v=T.MathUtils.sinDeg(n),x=m*b+g*v,w=_*b+y*v;x*=A=1e-5<(A=Math.sqrt(x*x+w*w))?1/A:A,w*=A,A=Math.sqrt(x*x+w*w);var b=Math.PI/2+Math.atan2(w,x),v=Math.cos(b)*A,A=Math.sin(b)*A,h=T.MathUtils.cosDeg(o)*i,p=T.MathUtils.cosDeg(90+a)*r,c=T.MathUtils.sinDeg(o)*i,d=T.MathUtils.sinDeg(90+a)*r;return l.a=x*h+v*c,l.c=x*p+v*d,l.b=w*h+A*c,l.d=w*p+A*d,void((this.data.transformMode!=T.TransformMode.NoScaleOrReflection?m*y-g*_<0:this.skeleton.flipX!=this.skeleton.flipY!=I.yDown)&&(l.c=-l.c,l.d=-l.d))}this.skeleton.flipX&&(l.a=-l.a,l.c=-l.c),this.skeleton.flipY!=I.yDown&&(l.b=-l.b,l.d=-l.d)},I.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},I.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*T.MathUtils.radDeg},I.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*T.MathUtils.radDeg},I.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},I.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},I.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*T.MathUtils.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*T.MathUtils.radDeg);var n=t.matrix,i=1/(n.a*n.d-n.b*n.c),r=e.tx-n.tx,o=e.ty-n.ty;this.ax=r*n.d*i-o*n.c*i,this.ay=o*n.a*i-r*n.b*i;t=i*n.d,o=i*n.a,r=i*n.c,i*=n.b,n=t*e.a-r*e.b,t=t*e.c-r*e.d,r=o*e.b-i*e.a,i=o*e.d-i*e.c;this.ashearX=0,this.ascaleX=Math.sqrt(n*n+r*r),1e-4<this.ascaleX?(e=n*i-t*r,this.ascaleY=e/this.ascaleX,this.ashearY=Math.atan2(n*t+r*i,e)*T.MathUtils.radDeg,this.arotation=Math.atan2(r,n)*T.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(t*t+i*i),this.ashearY=0,this.arotation=90-Math.atan2(i,t)*T.MathUtils.radDeg)},I.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,i=e.c,r=e.b,o=e.d,a=1/(n*o-i*r),s=t.x-e.tx,e=t.y-e.ty;return t.x=s*o*a-e*i*a,t.y=e*n*a-s*r*a,t},I.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,i=t.y;return t.x=n*e.a+i*e.c+e.tx,t.y=n*e.b+i*e.d+e.ty,t},I.prototype.worldToLocalRotation=function(t){var e=T.MathUtils.sinDeg(t),n=T.MathUtils.cosDeg(t),t=this.matrix;return Math.atan2(t.a*e-t.b*n,t.d*n-t.c*e)*T.MathUtils.radDeg},I.prototype.localToWorldRotation=function(t){var e=T.MathUtils.sinDeg(t),n=T.MathUtils.cosDeg(t),t=this.matrix;return Math.atan2(n*t.b+e*t.d,n*t.a+e*t.c)*T.MathUtils.radDeg},I.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,i=e.c,r=e.b,o=e.d,a=T.MathUtils.cosDeg(t),t=T.MathUtils.sinDeg(t);e.a=a*n-t*r,e.c=a*i-t*o,e.b=t*n+a*r,e.d=t*i+a*o,this.appliedValid=!1},I.yDown=!1,t=I,T.Bone=t}(pixi_spine=pixi_spine||{}),function(t){var i;function e(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n}(t=t.core||(t.core={})).BoneData=e,(t=i=t.TransformMode||(t.TransformMode={}))[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(pixi_spine=pixi_spine||{}),function(t){function e(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}(t.core||(t.core={})).Event=e}(pixi_spine=pixi_spine||{}),function(t){function e(t){this.name=t}(t.core||(t.core={})).EventData=e}(pixi_spine=pixi_spine||{}),function(t){var W;function e(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}W=t.core||(t.core={}),e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(t,e,n,i){t.appliedValid||t.updateAppliedTransform();var r=t.parent.matrix,o=1/(r.a*r.d-r.b*r.c),a=e-r.tx,e=n-r.ty,n=(a*r.d-e*r.c)*o-t.ax,o=(e*r.a-a*r.b)*o-t.ay,n=Math.atan2(o,n)*W.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(n+=180),180<n?n-=360:n<-180&&(n+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+n*i,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,e,n,i,r,o){if(0!=o){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var a=t.ax,s=t.ay,l=t.ascaleX,u=t.ascaleY,h=e.ascaleX,p=t.matrix,c=0,d=0,f=0,f=l<0?(l=-l,c=180,-1):(c=0,1);u<0&&(u=-u,f=-f),d=h<0?(h=-h,180):0;var m=e.ax,g=0,_=0,y=0,v=p.a,x=p.c,w=p.b,b=p.d,A=Math.abs(l-u)<=1e-4,y=A?(_=v*m+x*(g=e.ay)+p.tx,w*m+b*g+p.ty):(g=0,_=v*m+p.tx,w*m+p.ty),T=t.parent.matrix,v=T.a,x=T.c;w=T.b;var p=1/(v*(b=T.d)-x*w),I=n-T.tx,P=i-T.ty,M=(I*b-P*x)*p-a,E=(P*v-I*w)*p-s,T=((I=_-T.tx)*b-(P=y-T.ty)*x)*p-a,p=(P*v-I*w)*p-s,S=Math.sqrt(T*T+p*p),C=e.data.length*h,O=0,R=0;t:if(A){var k=(M*M+E*E-S*S-(C*=l)*C)/(2*S*C);k<-1?k=-1:1<k&&(k=1),R=Math.acos(k)*r,v=S+C*k,x=C*Math.sin(R),O=Math.atan2(E*v-M*x,M*v+E*x)}else{var D=(v=l*C)*v,L=(x=u*C)*x,V=M*M+E*E,N=Math.atan2(E,M),B=-2*L*S,X=L-D;if(0<=(b=B*B-4*X*(w=L*S*S+D*V-D*L))){var F=Math.sqrt(b),U=(F=-(B+(F=B<0?-F:F))/2)/X,G=w/F,j=Math.abs(U)<Math.abs(G)?U:G;if(j*j<=V){P=Math.sqrt(V-j*j)*r,O=N-Math.atan2(P,j),R=Math.atan2(P/u,(j-S)/l);break t}}var Y=W.MathUtils.PI,k=S-v,B=k*k,X=0,F=0,U=S+v,G=U*U,j=0;-1<=(w=-v*S/(D-L))&&w<=1&&(w=Math.acos(w),(b=(I=v*Math.cos(w)+S)*I+(P=x*Math.sin(w))*P)<B&&(Y=w,B=b,k=I,X=P),G<b&&(F=w,G=b,U=I,j=P)),R=V<=(B+G)/2?(O=N-Math.atan2(X*r,k),Y*r):(O=N-Math.atan2(j*r,U),F*r)}p=Math.atan2(g,m)*f,h=t.arotation;180<(O=(O-p)*W.MathUtils.radDeg+c-h)?O-=360:O<-180&&(O+=360),t.updateWorldTransformWith(a,s,h+O*o,t.ascaleX,t.ascaleY,0,0),h=e.arotation,180<(R=((R+p)*W.MathUtils.radDeg-e.ashearX)*f+d-h)?R-=360:R<-180&&(R+=360),e.updateWorldTransformWith(m,g,h+R*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t=e,W.IkConstraint=t}(pixi_spine=pixi_spine||{}),function(t){function e(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t}(t.core||(t.core={})).IkConstraintData=e}(pixi_spine=pixi_spine||{}),function(t){var q;function K(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}q=t.core||(t.core={}),K.prototype.apply=function(){this.update()},K.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof q.PathAttachment){var e=this.rotateMix,n=this.translateMix,i=0<e;if(0<n||i){var r=this.data,o=r.spacingMode,a=o==q.SpacingMode.Length,s=r.rotateMode,l=s==q.RotateMode.Tangent,u=s==q.RotateMode.ChainScale,h=this.bones.length,p=l?h:h+1,c=this.bones,d=q.Utils.setArraySize(this.spaces,p),f=null,m=this.spacing;if(u||a){u&&(f=q.Utils.setArraySize(this.lengths,h));for(var g=0,_=p-1;g<_;){var y=(E=c[g]).data.length,v=y*E.matrix.a,x=y*E.matrix.b,w=Math.sqrt(v*v+x*x);u&&(f[g]=w),d[++g]=(a?y+m:m)*w/y}}else for(g=1;g<p;g++)d[g]=m;var b=this.computeWorldPositions(t,p,l,r.positionMode==q.PositionMode.Percent,o==q.SpacingMode.Percent),A=b[0],T=b[1],I=r.offsetRotation,P=!1;0==I?P=s==q.RotateMode.Chain:(P=!1,I*=0<(M=this.target.bone.matrix).a*M.d-M.b*M.c?q.MathUtils.degRad:-q.MathUtils.degRad);for(var g=0,M=3;g<h;g++,M+=3){var E,S=(E=c[g]).matrix;S.tx+=(A-S.tx)*n,S.ty+=(T-S.ty)*n;var C,O,R,k,D,L,V,N,B=(v=b[M])-A,X=(x=b[M+1])-T;!u||0!=(L=f[g])&&(V=(Math.sqrt(B*B+X*X)/L-1)*e+1,S.a*=V,S.b*=V),A=v,T=x,i&&(C=S.a,O=S.c,R=S.b,k=S.d,L=D=N=0,N=l?b[M-1]:0==d[g+1]?b[M+2]:Math.atan2(X,B),N-=Math.atan2(R,C),P?(D=Math.cos(N),L=Math.sin(N),A+=((V=E.data.length)*(D*C-L*R)-B)*e,T+=(V*(L*C+D*R)-X)*e):N+=I,N>q.MathUtils.PI?N-=q.MathUtils.PI2:N<-q.MathUtils.PI&&(N+=q.MathUtils.PI2),N*=e,D=Math.cos(N),L=Math.sin(N),S.a=D*C-L*R,S.c=D*O-L*k,S.b=L*C+D*R,S.d=L*O+D*k),E.appliedValid=!1}}}},K.prototype.computeWorldPositions=function(t,e,n,i,r){var o=this.target,a=this.position,s=this.spaces,l=q.Utils.setArraySize(this.positions,3*e+2),u=null,h=t.closed,p=t.worldVerticesLength,c=p/6,d=K.NONE;if(!t.constantSpeed){var f=t.lengths,m=f[c-=h?1:2];if(i&&(a*=m),r)for(var g=0;g<e;g++)s[g]*=m;u=q.Utils.setArraySize(this.world,8);for(var g=0,_=0,y=0;g<e;g++,_+=3){var v=a+=j=s[g];if(h)(v%=m)<0&&(v+=m),y=0;else{if(v<0){d!=K.BEFORE&&(d=K.BEFORE,t.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(v,u,0,l,_);continue}if(m<v){d!=K.AFTER&&(d=K.AFTER,t.computeWorldVertices(o,p-6,4,u,0,2)),this.addAfterPosition(v-m,u,0,l,_);continue}}for(;;y++){var x=f[y];if(!(x<v)){0==y?v/=x:v=(v-(H=f[y-1]))/(x-H);break}}y!=d&&(d=y,h&&y==c?(t.computeWorldVertices(o,p-4,4,u,0,2),t.computeWorldVertices(o,0,4,u,4,2)):t.computeWorldVertices(o,6*y+2,8,u,0,2)),this.addCurvePosition(v,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,_,n||0<g&&0==j)}return l}h?(p+=2,u=q.Utils.setArraySize(this.world,p),t.computeWorldVertices(o,2,p-4,u,0,2),t.computeWorldVertices(o,0,2,u,p-4,2),u[p-2]=u[0],u[p-1]=u[1]):(c--,p-=4,u=q.Utils.setArraySize(this.world,p),t.computeWorldVertices(o,2,p,u,0,2));for(var w=q.Utils.setArraySize(this.curves,c),b=0,A=u[0],T=u[1],I=0,P=0,M=0,E=0,S=0,C=0,O=0,R=0,k=0,D=0,L=0,V=0,N=0,B=0,g=0,X=2;g<c;g++,X+=6)I=u[X],P=u[X+1],M=u[X+2],E=u[X+3],L=2*(O=.1875*(A-2*I+M))+(k=.09375*(3*(I-M)-A+(S=u[X+4]))),V=2*(R=.1875*(T-2*P+E))+(D=.09375*(3*(P-E)-T+(C=u[X+5]))),N=.75*(I-A)+O+.16666667*k,B=.75*(P-T)+R+.16666667*D,b+=Math.sqrt(N*N+B*B),N+=L,B+=V,L+=k,V+=D,b+=Math.sqrt(N*N+B*B),N+=L,B+=V,b+=Math.sqrt(N*N+B*B),N+=L+k,B+=V+D,b+=Math.sqrt(N*N+B*B),w[g]=b,A=S,T=C;if(i&&(a*=b),r)for(g=0;g<e;g++)s[g]*=b;for(var F=this.segments,U=0,g=0,_=0,y=0,G=0;g<e;g++,_+=3){var j,v=a+=j=s[g];if(h)(v%=b)<0&&(v+=b),y=0;else{if(v<0){this.addBeforePosition(v,u,0,l,_);continue}if(b<v){this.addAfterPosition(v-b,u,p-4,l,_);continue}}for(;;y++){var Y=w[y];if(!(Y<v)){0==y?v/=Y:v=(v-(H=w[y-1]))/(Y-H);break}}if(y!=d){var W=6*(d=y),A=u[W],T=u[W+1],I=u[W+2],P=u[W+3],M=u[W+4],E=u[W+5],L=2*(O=.03*(A-2*I+M))+(k=.006*(3*(I-M)-A+(S=u[W+6]))),V=2*(R=.03*(T-2*P+E))+(D=.006*(3*(P-E)-T+(C=u[W+7]))),N=.3*(I-A)+O+.16666667*k,B=.3*(P-T)+R+.16666667*D,U=Math.sqrt(N*N+B*B);for(F[0]=U,W=1;W<8;W++)N+=L,B+=V,L+=k,V+=D,U+=Math.sqrt(N*N+B*B),F[W]=U;N+=L,B+=V,U+=Math.sqrt(N*N+B*B),F[8]=U,N+=L+k,B+=V+D,U+=Math.sqrt(N*N+B*B),F[9]=U,G=0}for(v*=U;;G++){var H,z=F[G];if(!(z<v)){0==G?v/=z:v=G+(v-(H=F[G-1]))/(z-H);break}}this.addCurvePosition(.1*v,A,T,I,P,M,E,S,C,l,_,n||0<g&&0==j)}return l},K.prototype.addBeforePosition=function(t,e,n,i,r){var o=e[n],a=e[n+1],s=e[n+2]-o,n=e[n+3]-a,s=Math.atan2(n,s);i[r]=o+t*Math.cos(s),i[r+1]=a+t*Math.sin(s),i[r+2]=s},K.prototype.addAfterPosition=function(t,e,n,i,r){var o=e[n+2],a=e[n+3],s=o-e[n],n=a-e[n+1],s=Math.atan2(n,s);i[r]=o+t*Math.cos(s),i[r+1]=a+t*Math.sin(s),i[r+2]=s},K.prototype.addCurvePosition=function(t,e,n,i,r,o,a,s,l,u,h,p){var c=(t=0==t||isNaN(t)?1e-4:t)*t,d=c*t,f=1-t,m=f*f,g=m*f,_=f*t,y=3*_,f=f*y,t=y*t,s=e*g+i*f+o*t+s*d,d=n*g+r*f+a*t+l*d;u[h]=s,u[h+1]=d,p&&(u[h+2]=Math.atan2(d-(n*m+r*_*2+a*c),s-(e*m+i*_*2+o*c)))},K.prototype.getOrder=function(){return this.data.order},K.NONE=-1,K.BEFORE=-2,K.AFTER=-3,t=K,q.PathConstraint=t}(pixi_spine=pixi_spine||{}),function(t){var e;e=t.core||(t.core={}),t=function(t){this.order=0,this.bones=new Array,this.name=t},e.PathConstraintData=t,(t=e.PositionMode||(e.PositionMode={}))[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",(t=e.SpacingMode||(e.SpacingMode={}))[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",(e=e.RotateMode||(e.RotateMode={}))[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(pixi_spine=pixi_spine||{}),function(t){var y;function e(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n,i=t.bones[e],r=void 0;null==i.parent?r=new y.Bone(i,this,null):(n=this.bones[i.parent.index],r=new y.Bone(i,this,n),n.children.push(r)),this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var o=t.slots[e],r=this.bones[o.boneData.index],o=new y.Slot(o,r);this.slots.push(o),this.drawOrder.push(o)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var a=t.ikConstraints[e];this.ikConstraints.push(new y.IkConstraint(a,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var s=t.transformConstraints[e];this.transformConstraints.push(new y.TransformConstraint(s,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new y.PathConstraint(l,this))}this.color=new y.Color(1,1,1,1),this.updateCache()}y=t.core||(t.core={}),e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].sorted=!1;var i=this.ikConstraints,r=this.transformConstraints,o=this.pathConstraints,a=i.length,s=r.length,l=o.length,u=a+s+l;t:for(e=0;e<u;e++){for(var h=0;h<a;h++)if((p=i[h]).data.order==e){this.sortIkConstraint(p);continue t}for(h=0;h<s;h++)if((p=r[h]).data.order==e){this.sortTransformConstraint(p);continue t}for(var p,h=0;h<l;h++)if((p=o[h]).data.order==e){this.sortPathConstraint(p);continue t}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var n=t.bones,i=n[0];this.sortBone(i),1<n.length&&(e=n[n.length-1],-1<this._updateCache.indexOf(e)||this.updateCacheReset.push(e)),this._updateCache.push(t),this.sortReset(i.children),n[n.length-1].sorted=!0},e.prototype.sortPathConstraint=function(t){var e=t.target,n=e.data.index,i=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var r=0,o=this.data.skins.length;r<o;r++)this.sortPathConstraintAttachment(this.data.skins[r],n,i);e=e.getAttachment();e instanceof y.PathAttachment&&this.sortPathConstraintAttachmentWith(e,i);for(var a=t.bones,s=a.length,r=0;r<s;r++)this.sortBone(a[r]);this._updateCache.push(t);for(r=0;r<s;r++)this.sortReset(a[r].children);for(r=0;r<s;r++)a[r].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var i=0;i<n;i++){var r=e[i];this.sortBone(r.parent),-1<this._updateCache.indexOf(r)||this.updateCacheReset.push(r)}else for(i=0;i<n;i++)this.sortBone(e[i]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(e[o].children);for(o=0;o<n;o++)e[o].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,n){var i=t.attachments[e];if(i)for(var r in i)this.sortPathConstraintAttachmentWith(i[r],n)},e.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof y.PathAttachment){var n=t.bones;if(null==n)this.sortBone(e);else for(var i=this.bones,r=0;r<n.length;)for(var o=n[r++],a=r+o;r<a;r++){var s=n[r];this.sortBone(i[s])}}},e.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},e.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];i.sorted&&this.sortReset(i.children),i.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var r=this._updateCache,e=0,n=r.length;e<n;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var i=this.ikConstraints,e=0,n=i.length;e<n;e++)(s=i[e]).bendDirection=s.data.bendDirection,s.mix=s.data.mix;for(var r=this.transformConstraints,e=0,n=r.length;e<n;e++){var o=(s=r[e]).data;s.rotateMix=o.rotateMix,s.translateMix=o.translateMix,s.scaleMix=o.scaleMix,s.shearMix=o.shearMix}for(var a=this.pathConstraints,e=0,n=a.length;e<n;e++){var s,o=(s=a[e]).data;s.position=o.position,s.spacing=o.spacing,s.rotateMix=o.rotateMix,s.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;y.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n],o=r.data.attachmentName;null==o||null!=(o=t.getAttachment(n,o))&&r.setAttachment(o)}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,r=n.length;i<r;i++){var o=n[i];if(o.data.name==t){var a=null;if(null!=e&&null==(a=this.getAttachment(i,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(t,e,n){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var i=this.drawOrder,r=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var h=i[l],p=0,c=null,d=h.getAttachment();if(d instanceof y.RegionAttachment?(p=8,c=y.Utils.setArraySize(n,p,0),d.computeWorldVertices(h.bone,c,0,2)):d instanceof y.MeshAttachment&&(p=(d=d).worldVerticesLength,c=y.Utils.setArraySize(n,p,0),d.computeWorldVertices(h,0,p,c,0,2)),null!=c)for(var f=0,m=c.length;f<m;f+=2)var g=c[f],_=c[f+1],r=Math.min(r,g),o=Math.min(o,_),a=Math.max(a,g),s=Math.max(s,_)}t.set(r,o),e.set(a-r,s-o)},e.prototype.update=function(t){this.time+=t},t=e,y.Skeleton=t}(pixi_spine=pixi_spine||{}),function(t){var p;function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new p.Pool(function(){return p.Utils.newFloatArray(16)})}p=t.core||(t.core={}),e.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,i=this.polygons,r=this.polygonPool,o=t.slots,a=o.length;n.length=0,r.freeAll(i);for(var s=i.length=0;s<a;s++){var l,u=o[s],h=u.getAttachment();h instanceof p.BoundingBoxAttachment&&(l=h,n.push(l),(h=r.obtain()).length!=l.worldVerticesLength&&(h=p.Utils.newFloatArray(l.worldVerticesLength)),i.push(h),l.computeWorldVertices(u,0,l.worldVerticesLength,h,0,2))}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons,o=0,a=r.length;o<a;o++)for(var s=r[o],l=s,u=0,h=s.length;u<h;u+=2)var p=l[u],c=l[u+1],t=Math.min(t,p),e=Math.min(e,c),n=Math.max(n,p),i=Math.max(i,c);this.minX=t,this.minY=e,this.maxX=n,this.maxY=i},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,n,i){var r=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=r&&n<=r||e<=o&&i<=o||a<=t&&a<=n||s<=e&&s<=i)return!1;i=(i-e)/(n-t),n=i*(r-t)+e;if(o<n&&n<s)return!0;if(o<(n=i*(a-t)+e)&&n<s)return!0;o=(o-e)/i+t;return r<o&&o<a||r<(o=(s-e)/i+t)&&o<a},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var n=this.polygons,i=0,r=n.length;i<r;i++)if(this.containsPointPolygon(n[i],t,e))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,e,n){for(var i=t,r=t.length,o=r-2,a=!1,s=0;s<r;s+=2){var l,u=i[s+1],h=i[o+1];!(u<n&&n<=h||h<n&&n<=u)||(l=i[s])+(n-u)/(h-u)*(i[o]-l)<e&&(a=!a),o=s}return a},e.prototype.intersectsSegment=function(t,e,n,i){for(var r=this.polygons,o=0,a=r.length;o<a;o++)if(this.intersectsSegmentPolygon(r[o],t,e,n,i))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,n,i,r){for(var o=t,a=t.length,s=e-i,l=n-r,u=e*r-n*i,h=o[a-2],p=o[a-1],c=0;c<a;c+=2){var d=o[c],f=o[c+1],m=h*f-p*d,g=h-d,_=p-f,y=s*_-l*g,g=(u*g-s*m)/y;if((h<=g&&g<=d||d<=g&&g<=h)&&(e<=g&&g<=i||i<=g&&g<=e)){y=(u*_-l*m)/y;if((p<=y&&y<=f||f<=y&&y<=p)&&(n<=y&&y<=r||r<=y&&y<=n))return!0}h=d,p=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");t=this.boundingBoxes.indexOf(t);return-1==t?null:this.polygons[t]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},t=e,p.SkeletonBounds=t}(pixi_spine=pixi_spine||{}),function(t){var W;function l(){this.triangulator=new W.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}W=t.core||(t.core={}),l.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var n=(this.clipAttachment=e).worldVerticesLength,i=W.Utils.setArraySize(this.clippingPolygon,n);e.computeWorldVertices(t,0,n,i,0,2);i=this.clippingPolygon;l.makeClockwise(i);for(var r=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),o=0,a=r.length;o<a;o++){var s=r[o];l.makeClockwise(s),s.push(s[0]),s.push(s[1])}return r.length},l.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},l.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return null!=this.clipAttachment},l.prototype.clipTriangles=function(t,e,n,i,r,o,a,s){var l=this.clipOutput,u=this.clippedVertices,h=this.clippedTriangles,p=this.clippingPolygons,c=this.clippingPolygons.length,d=s?12:8,f=0;u.length=0;t:for(var m=h.length=0;m<i;m+=3)for(var g=n[m]<<1,_=t[g],y=t[1+g],v=r[g],x=r[1+g],w=t[g=n[m+1]<<1],b=t[1+g],A=r[g],T=r[1+g],I=t[g=n[m+2]<<1],P=t[1+g],M=r[g],E=r[1+g],S=0;S<c;S++){var C=u.length;if(!this.clip(_,y,w,b,I,P,p[S],l)){(X=W.Utils.setArraySize(u,C+3*d))[C]=_,X[C+1]=y,X[C+2]=o.r,X[C+3]=o.g,X[C+4]=o.b,X[C+5]=o.a,s?(X[C+6]=v,X[C+7]=x,X[C+8]=a.r,X[C+9]=a.g,X[C+10]=a.b,X[C+11]=a.a,X[C+12]=w,X[C+13]=b,X[C+14]=o.r,X[C+15]=o.g,X[C+16]=o.b,X[C+17]=o.a,X[C+18]=A,X[C+19]=T,X[C+20]=a.r,X[C+21]=a.g,X[C+22]=a.b,X[C+23]=a.a,X[C+24]=I,X[C+25]=P,X[C+26]=o.r,X[C+27]=o.g,X[C+28]=o.b,X[C+29]=o.a,X[C+30]=M,X[C+31]=E,X[C+32]=a.r,X[C+33]=a.g,X[C+34]=a.b,X[C+35]=a.a):(X[C+6]=v,X[C+7]=x,X[C+8]=w,X[C+9]=b,X[C+10]=o.r,X[C+11]=o.g,X[C+12]=o.b,X[C+13]=o.a,X[C+14]=A,X[C+15]=T,X[C+16]=I,X[C+17]=P,X[C+18]=o.r,X[C+19]=o.g,X[C+20]=o.b,X[C+21]=o.a,X[C+22]=M,X[C+23]=E),C=h.length,(Y=W.Utils.setArraySize(h,C+3))[C]=f,Y[C+1]=f+1,Y[C+2]=f+2,f+=3;continue t}var O=l.length;if(0!=O){for(var R=b-P,k=I-w,D=_-I,L=P-y,V=1/(R*D+k*(y-P)),N=O>>1,B=this.clipOutput,X=W.Utils.setArraySize(u,C+N*d),F=0;F<O;F+=2){var U=B[F],G=B[F+1];X[C]=U,X[C+1]=G,X[C+2]=o.r,X[C+3]=o.g,X[C+4]=o.b,X[C+5]=o.a;var j=U-I,U=G-P,G=(R*j+k*U)*V,j=(L*j+D*U)*V,U=1-G-j;X[C+6]=v*G+A*j+M*U,X[C+7]=x*G+T*j+E*U,s&&(X[C+8]=a.r,X[C+9]=a.g,X[C+10]=a.b,X[C+11]=a.a),C+=d}C=h.length;var Y=W.Utils.setArraySize(h,C+3*(N-2));N--;for(F=1;F<N;F++)Y[C]=f,Y[C+1]=f+F,Y[C+2]=f+F+1,C+=3;f+=1+N}}},l.prototype.clip=function(t,e,n,i,r,o,a,s){var l=s,u=!1,h=null;2<=a.length%4?(h=s,s=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(n),h.push(i),h.push(r),h.push(o),h.push(t),h.push(e),s.length=0;for(var p=a,c=a.length-4,d=0;;d+=2){for(var f=p[d],m=p[d+1],g=p[d+2],_=p[d+3],y=f-g,v=m-_,x=h,w=h.length-2,b=s.length,A=0;A<w;A+=2){var T=x[A],I=x[A+1],P=x[A+2],M=x[A+3],E=0<y*(M-_)-v*(P-g);if(0<y*(I-_)-v*(T-g)){if(E){s.push(P),s.push(M);continue}var S,C,O=((C=P-T)*(m-I)-(S=M-I)*(f-T))/(S*(g-f)-C*(_-m));s.push(f+(g-f)*O),s.push(m+(_-m)*O)}else E&&(O=((C=P-T)*(m-I)-(S=M-I)*(f-T))/(S*(g-f)-C*(_-m)),s.push(f+(g-f)*O),s.push(m+(_-m)*O),s.push(P),s.push(M));u=!0}if(b==s.length)return!(l.length=0);if(s.push(s[0]),s.push(s[1]),d==c)break;b=s;(s=h).length=0,h=b}if(l!=s)for(var d=l.length=0,R=s.length-2;d<R;d++)l[d]=s[d];else l.length=l.length-2;return u},l.makeClockwise=function(t){for(var e,n,i,r=t,t=t.length,o=r[t-2]*r[1]-r[0]*r[t-1],a=0,s=t-3;a<s;a+=2)e=r[a],n=r[a+1],i=r[a+2],o+=e*r[a+3]-i*n;if(!(o<0))for(var a=0,l=t-2,s=t>>1;a<s;a+=2){var u=r[a],h=r[a+1],p=l-a;r[a]=r[p],r[a+1]=r[1+p],r[p]=u,r[1+p]=h}},t=l,W.SkeletonClipping=t}(pixi_spine=pixi_spine||{}),function(t){var e;function n(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}e=t.core||(t.core={}),n.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},n.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},n.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t=n,e.SkeletonData=t}(pixi_spine=pixi_spine||{}),function(t){!function($){var t=(C.prototype.readSkeletonData=function(t){var e=this.scale,n=new $.SkeletonData,i="string"==typeof t?JSON.parse(t):t,t=i.skeleton;if(null!=t&&(n.hash=t.hash,n.version=t.spine,n.width=t.width,n.height=t.height,n.fps=t.fps,n.imagesPath=t.images),i.bones)for(var r=0;r<i.bones.length;r++){var o=i.bones[r],a=null,s=this.getValue(o,"parent",null);if(null!=s&&null==(a=n.findBone(s)))throw new Error("Parent bone not found: "+s);(p=new $.BoneData(n.bones.length,o.name,a)).length=this.getValue(o,"length",0)*e,p.x=this.getValue(o,"x",0)*e,p.y=this.getValue(o,"y",0)*e,p.rotation=this.getValue(o,"rotation",0),p.scaleX=this.getValue(o,"scaleX",1),p.scaleY=this.getValue(o,"scaleY",1),p.shearX=this.getValue(o,"shearX",0),p.shearY=this.getValue(o,"shearY",0),p.transformMode=C.transformModeFromString(this.getValue(o,"transform","normal")),n.bones.push(p)}if(i.slots)for(r=0;r<i.slots.length;r++){var l=(v=i.slots[r]).name,u=v.bone,h=n.findBone(u);if(null==h)throw new Error("Slot bone not found: "+u);var p=new $.SlotData(n.slots.length,l,h),h=this.getValue(v,"color",null);null!=h&&p.color.setFromString(h);h=this.getValue(v,"dark",null);null!=h&&(p.darkColor=new $.Color(1,1,1,1),p.darkColor.setFromString(h)),p.attachmentName=this.getValue(v,"attachment",null),p.blendMode=C.blendModeFromString(this.getValue(v,"blend","normal")),n.slots.push(p)}if(i.ik)for(r=0;r<i.ik.length;r++){var c=i.ik[r];(p=new $.IkConstraintData(c.name)).order=this.getValue(c,"order",0);for(var d=0;d<c.bones.length;d++){u=c.bones[d];if(null==(m=n.findBone(u)))throw new Error("IK bone not found: "+u);p.bones.push(m)}var f=c.target;if(p.target=n.findBone(f),null==p.target)throw new Error("IK target bone not found: "+f);p.bendDirection=this.getValue(c,"bendPositive",!0)?1:-1,p.mix=this.getValue(c,"mix",1),n.ikConstraints.push(p)}if(i.transform)for(r=0;r<i.transform.length;r++){c=i.transform[r];(p=new $.TransformConstraintData(c.name)).order=this.getValue(c,"order",0);for(d=0;d<c.bones.length;d++){u=c.bones[d];if(null==(m=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);p.bones.push(m)}f=c.target;if(p.target=n.findBone(f),null==p.target)throw new Error("Transform constraint target bone not found: "+f);p.local=this.getValue(c,"local",!1),p.relative=this.getValue(c,"relative",!1),p.offsetRotation=this.getValue(c,"rotation",0),p.offsetX=this.getValue(c,"x",0)*e,p.offsetY=this.getValue(c,"y",0)*e,p.offsetScaleX=this.getValue(c,"scaleX",0),p.offsetScaleY=this.getValue(c,"scaleY",0),p.offsetShearY=this.getValue(c,"shearY",0),p.rotateMix=this.getValue(c,"rotateMix",1),p.translateMix=this.getValue(c,"translateMix",1),p.scaleMix=this.getValue(c,"scaleMix",1),p.shearMix=this.getValue(c,"shearMix",1),n.transformConstraints.push(p)}if(i.path)for(r=0;r<i.path.length;r++){c=i.path[r];(p=new $.PathConstraintData(c.name)).order=this.getValue(c,"order",0);for(d=0;d<c.bones.length;d++){var m,u=c.bones[d];if(null==(m=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);p.bones.push(m)}f=c.target;if(p.target=n.findSlot(f),null==p.target)throw new Error("Path target slot not found: "+f);p.positionMode=C.positionModeFromString(this.getValue(c,"positionMode","percent")),p.spacingMode=C.spacingModeFromString(this.getValue(c,"spacingMode","length")),p.rotateMode=C.rotateModeFromString(this.getValue(c,"rotateMode","tangent")),p.offsetRotation=this.getValue(c,"rotation",0),p.position=this.getValue(c,"position",0),p.positionMode==$.PositionMode.Fixed&&(p.position*=e),p.spacing=this.getValue(c,"spacing",0),p.spacingMode!=$.SpacingMode.Length&&p.spacingMode!=$.SpacingMode.Fixed||(p.spacing*=e),p.rotateMix=this.getValue(c,"rotateMix",1),p.translateMix=this.getValue(c,"translateMix",1),n.pathConstraints.push(p)}if(i.skins)for(var g in i.skins){var _=i.skins[g],y=new $.Skin(g);for(l in _){var v,x,w=n.findSlotIndex(l);if(-1==w)throw new Error("Slot not found: "+l);for(x in v=_[l]){var b=this.readAttachment(v[x],y,w,x,n);null!=b&&y.addAttachment(w,x,b)}}n.skins.push(y),"default"==y.name&&(n.defaultSkin=y)}for(var r=0,A=this.linkedMeshes.length;r<A;r++){var T=this.linkedMeshes[r];if(null==(y=null==T.skin?n.defaultSkin:n.findSkin(T.skin)))throw new Error("Skin not found: "+T.skin);var I=y.getAttachment(T.slotIndex,T.parent);if(null==I)throw new Error("Parent mesh not found: "+T.parent);T.mesh.setParentMesh(I)}if(this.linkedMeshes.length=0,i.events)for(var P in i.events){var M=i.events[P];(p=new $.EventData(P)).intValue=this.getValue(M,"int",0),p.floatValue=this.getValue(M,"float",0),p.stringValue=this.getValue(M,"string",""),n.events.push(p)}if(i.animations)for(var E in i.animations){var S=i.animations[E];this.readAnimation(S,E,n)}return n},C.prototype.readAttachment=function(t,e,n,i,r){var o=this.scale;switch(i=this.getValue(t,"name",i),this.getValue(t,"type","region")){case"region":var a=this.getValue(t,"path",i),s=this.attachmentLoader.newRegionAttachment(e,i,a);return null==s?null:(s.path=a,s.x=this.getValue(t,"x",0)*o,s.y=this.getValue(t,"y",0)*o,s.scaleX=this.getValue(t,"scaleX",1),s.scaleY=this.getValue(t,"scaleY",1),s.rotation=this.getValue(t,"rotation",0),s.width=t.width*o,s.height=t.height*o,null!=(f=this.getValue(t,"color",null))&&s.color.setFromString(f),s);case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(e,i);return null==l?null:(this.readVertices(t,l,t.vertexCount<<1),null!=(f=this.getValue(t,"color",null))&&l.color.setFromString(f),l);case"mesh":case"linkedmesh":var a=this.getValue(t,"path",i),u=this.attachmentLoader.newMeshAttachment(e,i,a);if(null==u)return null;u.path=a,null!=(f=this.getValue(t,"color",null))&&u.color.setFromString(f);l=this.getValue(t,"parent",null);if(null!=l)return u.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new m(u,this.getValue(t,"skin",null),n,l)),u;l=t.uvs;return this.readVertices(t,u,l.length),u.triangles=t.triangles,u.regionUVs=l,u.hullLength=2*this.getValue(t,"hull",0),u;case"path":if(null==(a=this.attachmentLoader.newPathAttachment(e,i)))return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);var h=t.vertexCount;this.readVertices(t,a,h<<1);for(var p=$.Utils.newArray(h/3,0),c=0;c<t.lengths.length;c++)p[c]=t.lengths[c]*o;return a.lengths=p,null!=(f=this.getValue(t,"color",null))&&a.color.setFromString(f),a;case"point":var d=this.attachmentLoader.newPointAttachment(e,i);return null==d?null:(d.x=this.getValue(t,"x",0)*o,d.y=this.getValue(t,"y",0)*o,d.rotation=this.getValue(t,"rotation",0),null!=(f=this.getValue(t,"color",null))&&d.color.setFromString(f),d);case"clipping":u=this.attachmentLoader.newClippingAttachment(e,i);if(null==u)return null;a=this.getValue(t,"end",null);if(null!=a){d=r.findSlot(a);if(null==d)throw new Error("Clipping end slot not found: "+a);u.endSlot=d}var f,h=t.vertexCount;return this.readVertices(t,u,h<<1),null!=(f=this.getValue(t,"color",null))&&u.color.setFromString(f),u}return null},C.prototype.readVertices=function(t,e,n){var i=this.scale;e.worldVerticesLength=n;var r=t.vertices;if(n!=r.length){for(var o=new Array,a=new Array,s=0,l=r.length;s<l;){var u=r[s++];a.push(u);for(var h=s+4*u;s<h;s+=4)a.push(r[s]),o.push(r[s+1]*i),o.push(r[s+2]*i),o.push(r[s+3])}e.bones=a,e.vertices=$.Utils.toFloatArray(o)}else{var p=$.Utils.toFloatArray(r);if(1!=i)for(var s=0,l=r.length;s<l;s++)p[s]*=i;e.vertices=p}},C.prototype.readAnimation=function(t,e,n){var i=this.scale,r=new Array,o=0;if(t.slots)for(var a in t.slots){var s=t.slots[a];if(-1==(q=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(C in s){var l=s[C];if("attachment"==C){(y=new $.AttachmentTimeline(l.length)).slotIndex=q;for(var u=0,h=0;h<l.length;h++){var p=l[h];y.setFrame(u++,p.time,p.name)}r.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}else if("color"==C){(y=new $.ColorTimeline(l.length)).slotIndex=q;for(u=0,h=0;h<l.length;h++){var p=l[h],c=new $.Color;c.setFromString(p.color||"ffffffff"),y.setFrame(u,p.time,c.r,c.g,c.b,c.a),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.ColorTimeline.ENTRIES])}else{if("twoColor"!=C)throw new Error("Invalid timeline type for a slot: "+C+" ("+a+")");(y=new $.TwoColorTimeline(l.length)).slotIndex=q;for(u=0,h=0;h<l.length;h++){var p=l[h],d=new $.Color,f=new $.Color;d.setFromString(p.light),f.setFromString(p.dark),y.setFrame(u,p.time,d.r,d.g,d.b,d.a,f.r,f.g,f.b),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var m in t.bones){var g=t.bones[m],_=n.findBoneIndex(m);if(-1==_)throw new Error("Bone not found: "+m);for(C in g){l=g[C];if("rotate"===C){(y=new $.RotateTimeline(l.length)).boneIndex=_;for(u=0,h=0;h<l.length;h++){p=l[h];y.setFrame(u,p.time,p.angle),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.RotateTimeline.ENTRIES])}else{if("translate"!==C&&"scale"!==C&&"shear"!==C)throw new Error("Invalid timeline type for a bone: "+C+" ("+m+")");var y=null,v=1;"scale"===C?y=new $.ScaleTimeline(l.length):"shear"===C?y=new $.ShearTimeline(l.length):(y=new $.TranslateTimeline(l.length),v=i),y.boneIndex=_;for(u=0,h=0;h<l.length;h++){var p=l[h],x=this.getValue(p,"x",0),w=this.getValue(p,"y",0);y.setFrame(u,p.time,x*v,w*v),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var b in t.ik){var A=t.ik[b],T=n.findIkConstraint(b);(y=new $.IkConstraintTimeline(A.length)).ikConstraintIndex=n.ikConstraints.indexOf(T);for(u=0,h=0;h<A.length;h++){p=A[h];y.setFrame(u,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var b in t.transform){A=t.transform[b],T=n.findTransformConstraint(b);(y=new $.TransformConstraintTimeline(A.length)).transformConstraintIndex=n.transformConstraints.indexOf(T);for(u=0,h=0;h<A.length;h++){p=A[h];y.setFrame(u,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var b in t.paths){var A=t.paths[b],I=n.findPathConstraintIndex(b);if(-1==I)throw new Error("Path constraint not found: "+b);var P=n.pathConstraints[I];for(C in A){l=A[C];if("position"===C||"spacing"===C){var y=null,v=1;"spacing"===C?(y=new $.PathConstraintSpacingTimeline(l.length),P.spacingMode!=$.SpacingMode.Length&&P.spacingMode!=$.SpacingMode.Fixed||(v=i)):(y=new $.PathConstraintPositionTimeline(l.length),P.positionMode==$.PositionMode.Fixed&&(v=i)),y.pathConstraintIndex=I;for(u=0,h=0;h<l.length;h++){p=l[h];y.setFrame(u,p.time,this.getValue(p,C,0)*v),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===C){(y=new $.PathConstraintMixTimeline(l.length)).pathConstraintIndex=I;for(u=0,h=0;h<l.length;h++){p=l[h];y.setFrame(u,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var M in t.deform){var E=t.deform[M],S=n.findSkin(M);if(null==S)throw new Error("Skin not found: "+M);for(a in E){var C,s=E[a];if(-1==(q=n.findSlotIndex(a)))throw new Error("Slot not found: "+s.name);for(C in s){var l=s[C],O=S.getAttachment(q,C);if(null==O)throw new Error("Deform attachment not found: "+l.name);var R=null!=O.bones,k=O.vertices,D=R?k.length/3*2:k.length;(y=new $.DeformTimeline(l.length)).slotIndex=q,y.attachment=O;for(var u=0,L=0;L<l.length;L++){var p=l[L],V=void 0,N=this.getValue(p,"vertices",null);if(null==N)V=R?$.Utils.newFloatArray(D):k;else{V=$.Utils.newFloatArray(D);var B=this.getValue(p,"offset",0);if($.Utils.arrayCopy(N,0,V,B,N.length),1!=i)for(var X=(h=B)+N.length;h<X;h++)V[h]*=i;if(!R)for(h=0;h<D;h++)V[h]+=k[h]}y.setFrame(u,p.time,V),this.readCurve(p,y,u),u++}r.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}}}var F=t.drawOrder;if(null!=(F=null==F?t.draworder:F)){for(var y=new $.DrawOrderTimeline(F.length),U=n.slots.length,u=0,L=0;L<F.length;L++){var G=F[L],j=null,Y=this.getValue(G,"offsets",null);if(null!=Y){j=$.Utils.newArray(U,-1);for(var W=$.Utils.newArray(U-Y.length,0),H=0,z=0,h=0;h<Y.length;h++){var q,K=Y[h];if(-1==(q=n.findSlotIndex(K.slot)))throw new Error("Slot not found: "+K.slot);for(;H!=q;)W[z++]=H++;j[H+K.offset]=H++}for(;H<U;)W[z++]=H++;for(h=U-1;0<=h;h--)-1==j[h]&&(j[h]=W[--z])}y.setFrame(u++,G.time,j)}r.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}if(t.events){for(y=new $.EventTimeline(t.events.length),u=0,h=0;h<t.events.length;h++){var Z=t.events[h],Q=n.findEvent(Z.name);if(null==Q)throw new Error("Event not found: "+Z.name);var J=new $.Event($.Utils.toSinglePrecision(Z.time),Q);J.intValue=this.getValue(Z,"int",Q.intValue),J.floatValue=this.getValue(Z,"float",Q.floatValue),J.stringValue=this.getValue(Z,"string",Q.stringValue),y.setFrame(u++,J)}r.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new $.Animation(e,r,o))},C.prototype.readCurve=function(t,e,n){t.curve&&("stepped"===t.curve?e.setStepped(n):"[object Array]"===Object.prototype.toString.call(t.curve)&&(t=t.curve,e.setCurve(n,t[0],t[1],t[2],t[3])))},C.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},C.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.BlendMode.Normal;if("additive"==t)return $.BlendMode.Additive;if("multiply"==t)return $.BlendMode.Multiply;if("screen"==t)return $.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},C.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return $.PositionMode.Fixed;if("percent"==t)return $.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},C.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return $.SpacingMode.Length;if("fixed"==t)return $.SpacingMode.Fixed;if("percent"==t)return $.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},C.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return $.RotateMode.Tangent;if("chain"==t)return $.RotateMode.Chain;if("chainscale"==t)return $.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},C.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.TransformMode.Normal;if("onlytranslation"==t)return $.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return $.TransformMode.NoRotationOrReflection;if("noscale"==t)return $.TransformMode.NoScale;if("noscaleorreflection"==t)return $.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},C);function C(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}$.SkeletonJson=t;var m=function(t,e,n,i){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i}}(t.core||(t.core={}))}(pixi_spine=pixi_spine||{}),function(t){var e;function n(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}e=t.core||(t.core={}),n.prototype.addAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=n},n.prototype.getAttachment=function(t,e){t=this.attachments[t];return t?t[e]:null},n.prototype.attachAll=function(t,e){for(var n=0,i=0;i<t.slots.length;i++){var r=t.slots[i],o=r.getAttachment();if(o&&n<e.attachments.length){var a,s=e.attachments[n];for(a in s)if(o==s[a]){var l=this.getAttachment(n,name);null!=l&&r.setAttachment(l);break}}n++}},t=n,e.Skin=t}(pixi_spine=pixi_spine||{}),function(t){var n;function e(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.darkColor=null==t.darkColor?null:new n.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}n=t.core||(t.core={}),e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t=e,n.Slot=t}(pixi_spine=pixi_spine||{}),function(t){var i;function e(t,e,n){if(this.color=new i.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n}(i=t.core||(t.core={})).SlotData=e}(pixi_spine=pixi_spine||{}),function(t){var e,n,i;function r(t){this._image=t}function o(){this.size=null}e=t.core||(t.core={}),r.prototype.getImage=function(){return this._image},r.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return n.Nearest;case"linear":return n.Linear;case"mipmap":return n.MipMap;case"mipmapnearestnearest":return n.MipMapNearestNearest;case"mipmaplinearnearest":return n.MipMapLinearNearest;case"mipmapnearestlinear":return n.MipMapNearestLinear;case"mipmaplinearlinear":return n.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},r.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return i.MirroredRepeat;case"clamptoedge":return i.ClampToEdge;case"repeat":return i.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t=r,e.Texture=t,(t=n=e.TextureFilter||(e.TextureFilter={}))[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",(t=i=e.TextureWrap||(e.TextureWrap={}))[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",Object.defineProperty(o.prototype,"width",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.crop:t.trim||t.orig).width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.crop:t.trim||t.orig).height},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"originalWidth",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.trim||t.crop:t.orig).width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"originalHeight",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.trim||t.crop:t.orig).height},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t=o,e.TextureRegion=t}(pixi_spine=pixi_spine||{}),function(t){!function(v){var t=(e.prototype.addTexture=function(t,e){for(var n=this.pages,i=null,r=0;r<n.length;r++)if(n[r].baseTexture===e.baseTexture){i=n[r];break}null===i&&((i=new x).name="texturePage",o=e.baseTexture,i.width=o.realWidth,i.height=o.realHeight,i.baseTexture=o,i.minFilter=i.magFilter=v.TextureFilter.Nearest,i.uWrap=v.TextureWrap.ClampToEdge,i.vWrap=v.TextureWrap.ClampToEdge,n.push(i));var o=new w;return o.name=t,o.page=i,o.texture=e,o.index=-1,this.regions.push(o),o},e.prototype.addTextureHash=function(t,e){for(var n in t)t.hasOwnProperty(n)&&this.addTexture(e&&-1!==n.indexOf(".")?n.substr(0,n.lastIndexOf(".")):n,t[n])},e.prototype.addSpineAtlas=function(t,e,n){return this.load(t,e,n)},e.prototype.load=function(t,c,d){var f=this;if(null==c)throw new Error("textureLoader cannot be null.");var m=new n(t),g=new Array(4),_=null,y=function(){for(;;){var t=m.readLine();if(null==t)return d&&d(f);if(0==(t=t.trim()).length)_=null;else{if(!_){(_=new x).name=t,2==m.readTuple(g)&&(_.width=parseInt(g[0]),_.height=parseInt(g[1]),m.readTuple(g)),m.readTuple(g),_.minFilter=v.Texture.filterFromString(g[0]),_.magFilter=v.Texture.filterFromString(g[1]);var e=m.readValue();_.uWrap=v.TextureWrap.ClampToEdge,_.vWrap=v.TextureWrap.ClampToEdge,"x"==e?_.uWrap=v.TextureWrap.Repeat:"y"==e?_.vWrap=v.TextureWrap.Repeat:"xy"==e&&(_.uWrap=_.vWrap=v.TextureWrap.Repeat),c(t,function(t){(_.baseTexture=t).valid||(t.width=_.width,t.height=_.height),f.pages.push(_),_.setFilters(),_.width&&_.height||(_.width=t.realWidth,_.height=t.realHeight,_.width&&_.height||console.log("ERROR spine atlas page "+_.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),y()}),f.pages.push(_);break}var n=new w;n.name=t,n.page=_;var i="true"==m.readValue()?6:0;m.readTuple(g);var r=parseInt(g[0]),o=parseInt(g[1]);m.readTuple(g);var a=parseInt(g[0]),s=parseInt(g[1]),l=_.baseTexture.resolution;r/=l,o/=l,a/=l,s/=l;var u=new PIXI.Rectangle(r,o,i?s:a,i?a:s);4==m.readTuple(g)&&4==m.readTuple(g)&&m.readTuple(g);var h=parseInt(g[0])/l,p=parseInt(g[1])/l;m.readTuple(g);e=parseInt(g[0])/l,t=parseInt(g[1])/l,l=new PIXI.Rectangle(0,0,h,p),t=new PIXI.Rectangle(e,p-s-t,a,s);"3"!=PIXI.VERSION[0]?n.texture=new PIXI.Texture(n.page.baseTexture,u,l,t,i):(s=(a=new PIXI.Rectangle(r,o,a,s)).clone(),t.width=h,t.height=p,n.texture=new PIXI.Texture(n.page.baseTexture,a,s,t,i)),n.index=parseInt(m.readValue()),n.texture.updateUvs(),f.regions.push(n)}}};y()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e);function e(t,e,n){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,n)}v.TextureAtlas=t;var n=(i.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},i.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},i.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var i=0,r=n+1;i<3;i++){var o=e.indexOf(",",r);if(-1==o)break;t[i]=e.substr(r,o-r).trim(),r=o+1}return t[i]=e.substring(r).trim(),i+1},i);function i(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}var x=(r.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==v.TextureFilter.Linear?t.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==v.TextureFilter.Nearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:(t.mipmap=!0,e==v.TextureFilter.MipMapNearestNearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:t.scaleMode=PIXI.SCALE_MODES.LINEAR)},r);function r(){}v.TextureAtlasPage=x;var o,w=(o=v.TextureRegion,__extends(a,o),a);function a(){return null!==o&&o.apply(this,arguments)||this}v.TextureAtlasRegion=w}(t.core||(t.core={}))}(pixi_spine=pixi_spine||{}),function(t){var M;function e(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new M.Vector2,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}M=t.core||(t.core={}),e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target,o=r.matrix,a=o.a,s=o.c,l=o.b,u=o.d,o=0<a*u-s*l?M.MathUtils.degRad:-M.MathUtils.degRad,h=this.data.offsetRotation*o,p=this.data.offsetShearY*o,c=this.bones,d=0,f=c.length;d<f;d++){var m,g,_,y,v,x,w,b,A,T=c[d],I=!1,P=T.matrix;0!=t&&(m=P.a,v=P.c,g=P.b,x=P.d,(b=Math.atan2(l,a)-Math.atan2(g,m)+h)>M.MathUtils.PI?b-=M.MathUtils.PI2:b<-M.MathUtils.PI&&(b+=M.MathUtils.PI2),b*=t,y=Math.cos(b),_=Math.sin(b),P.a=y*m-_*g,P.c=y*v-_*x,P.b=_*m+y*g,P.d=_*v+y*x,I=!0),0!=e&&(y=this.temp,r.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),P.tx+=(y.x-P.tx)*e,P.ty+=(y.y-P.ty)*e,I=!0),0<n&&(A=Math.sqrt(P.a*P.a+P.b*P.b),w=Math.sqrt(a*a+l*l),1e-5<A&&(A=(A+(w-A+this.data.offsetScaleX)*n)/A),P.a*=A,P.b*=A,A=Math.sqrt(P.c*P.c+P.d*P.d),w=Math.sqrt(s*s+u*u),1e-5<A&&(A=(A+(w-A+this.data.offsetScaleY)*n)/A),P.c*=A,P.d*=A,I=!0),0<i&&(v=P.c,x=P.d,w=Math.atan2(x,v),(b=Math.atan2(u,s)-Math.atan2(l,a)-(w-Math.atan2(P.b,P.a)))>M.MathUtils.PI?b-=M.MathUtils.PI2:b<-M.MathUtils.PI&&(b+=M.MathUtils.PI2),b=w+(b+p)*i,A=Math.sqrt(v*v+x*x),P.c=Math.cos(b)*A,P.d=Math.sin(b)*A,I=!0),I&&(T.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target,o=r.matrix,a=o.a,s=o.c,l=o.b,u=o.d,o=0<a*u-s*l?M.MathUtils.degRad:-M.MathUtils.degRad,h=this.data.offsetRotation*o,p=this.data.offsetShearY*o,c=this.bones,d=0,f=c.length;d<f;d++){var m,g,_,y,v,x,w,b,A=c[d],T=!1,I=A.matrix;0!=t&&(m=I.a,x=I.c,g=I.b,w=I.d,(v=Math.atan2(l,a)+h)>M.MathUtils.PI?v-=M.MathUtils.PI2:v<-M.MathUtils.PI&&(v+=M.MathUtils.PI2),v*=t,y=Math.cos(v),_=Math.sin(v),I.a=y*m-_*g,I.c=y*x-_*w,I.b=_*m+y*g,I.d=_*x+y*w,T=!0),0!=e&&(y=this.temp,r.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),I.tx+=y.x*e,I.ty+=y.y*e,T=!0),0<n&&(b=(Math.sqrt(a*a+l*l)-1+this.data.offsetScaleX)*n+1,I.a*=b,I.b*=b,b=(Math.sqrt(s*s+u*u)-1+this.data.offsetScaleY)*n+1,I.c*=b,I.d*=b,T=!0),0<i&&((v=Math.atan2(u,s)-Math.atan2(l,a))>M.MathUtils.PI?v-=M.MathUtils.PI2:v<-M.MathUtils.PI&&(v+=M.MathUtils.PI2),x=I.c,w=I.d,v=Math.atan2(w,x)+(v-M.MathUtils.PI/2+p)*i,b=Math.sqrt(x*x+w*w),I.c=Math.cos(v)*b,I.d=Math.sin(v)*b,T=!0),T&&(A.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var l=o[a];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;0!=t&&(f=r.arotation-u+this.data.offsetRotation,u+=(f-=360*(16384-(16384.499999999996-f/360|0)))*t);var h=l.ax,p=l.ay;0!=e&&(h+=(r.ax-h+this.data.offsetX)*e,p+=(r.ay-p+this.data.offsetY)*e);var c=l.ascaleX,d=l.ascaleY;0<n&&(1e-5<c&&(c=(c+(r.ascaleX-c+this.data.offsetScaleX)*n)/c),1e-5<d&&(d=(d+(r.ascaleY-d+this.data.offsetScaleY)*n)/d));var f,m=l.ashearY;0<i&&(f=r.ashearY-m+this.data.offsetShearY,f-=360*(16384-(16384.499999999996-f/360|0)),l.shearY+=f*i),l.updateWorldTransformWith(h,p,u,c,d,l.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var l=o[a];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;0!=t&&(u+=(r.arotation+this.data.offsetRotation)*t);var h=l.ax,p=l.ay;0!=e&&(h+=(r.ax+this.data.offsetX)*e,p+=(r.ay+this.data.offsetY)*e);var c=l.ascaleX,d=l.ascaleY;0<n&&(1e-5<c&&(c*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<d&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*n+1));var f=l.ashearY;0<i&&(f+=(r.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(h,p,u,c,d,l.ashearX,f)}},e.prototype.getOrder=function(){return this.data.order},t=e,M.TransformConstraint=t}(pixi_spine=pixi_spine||{}),function(t){function e(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t}(t.core||(t.core={})).TransformConstraintData=e}(pixi_spine=pixi_spine||{}),function(t){var e;function U(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new e.Pool(function(){return new Array}),this.polygonIndicesPool=new e.Pool(function(){return new Array})}e=t.core||(t.core={}),U.prototype.triangulate=function(t){for(var e=t,n=t.length>>1,i=this.indicesArray,r=i.length=0;r<n;r++)i[r]=r;for(var o=this.isConcaveArray,r=o.length=0,a=n;r<a;++r)o[r]=U.isConcave(r,n,e,i);var s=this.triangles;for(s.length=0;3<n;){for(var l=n-1,r=0,u=1;;){t:if(!o[r]){for(var h=i[l]<<1,p=i[r]<<1,c=i[u]<<1,d=e[h],f=e[1+h],m=e[p],g=e[1+p],_=e[c],y=e[1+c],v=(u+1)%n;v!=l;v=(v+1)%n)if(o[v]){var x=i[v]<<1,w=e[x],x=e[1+x];if(U.positiveArea(_,y,d,f,w,x)&&U.positiveArea(d,f,m,g,w,x)&&U.positiveArea(m,g,_,y,w,x))break t}break}if(0==u){for(;o[r]&&0<--r;);break}l=r,u=((r=u)+1)%n}s.push(i[(n+r-1)%n]),s.push(i[r]),s.push(i[(r+1)%n]),i.splice(r,1),o.splice(r,1);var b=(--n+r-1)%n,A=r==n?0:r;o[b]=U.isConcave(b,n,e,i),o[A]=U.isConcave(A,n,e,i)}return 3==n&&(s.push(i[2]),s.push(i[0]),s.push(i[1])),s},U.prototype.decompose=function(t,e){var n=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;var r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;var o=this.polygonIndicesPool.obtain();o.length=0;for(var a=this.polygonPool.obtain(),s=-1,l=a.length=0,u=0,h=e.length;u<h;u+=3){var p=e[u]<<1,c=e[u+1]<<1,d=e[u+2]<<1,f=n[p],m=n[1+p],g=n[c],_=n[1+c],y=n[d],v=n[1+d],x=!1;s==p&&(w=a.length-4,M=U.winding(a[w],a[w+1],a[w+2],a[w+3],y,v),E=U.winding(y,v,a[0],a[1],a[2],a[3]),M==l&&E==l&&(a.push(y),a.push(v),o.push(d),x=!0)),x||(0<a.length?(i.push(a),r.push(o)):(this.polygonPool.free(a),this.polygonIndicesPool.free(o)),(a=this.polygonPool.obtain()).length=0,a.push(f),a.push(m),a.push(g),a.push(_),a.push(y),a.push(v),(o=this.polygonIndicesPool.obtain()).length=0,o.push(p),o.push(c),o.push(d),l=U.winding(f,m,g,_,y,v),s=p)}0<a.length&&(i.push(a),r.push(o));for(u=0,h=i.length;u<h;u++)if(0!=(o=r[u]).length)for(var w,b,A,T,I,P,M,E,S=o[0],C=o[o.length-1],O=(a=i[u])[w=a.length-4],R=a[w+1],k=a[w+2],D=a[w+3],L=a[0],V=a[1],N=a[2],B=a[3],X=U.winding(O,R,k,D,L,V),F=0;F<h;F++)F!=u&&(3==(b=r[F]).length&&(A=b[0],T=b[1],I=b[2],y=(P=i[F])[P.length-2],v=P[P.length-1],A==S&&T==C&&(M=U.winding(O,R,k,D,y,v),E=U.winding(y,v,L,V,N,B),M==X&&E==X&&(P.length=0,b.length=0,a.push(y),a.push(v),o.push(I),O=k,R=D,k=y,D=v,F=0))));for(u=i.length-1;0<=u;u--)0==(a=i[u]).length&&(i.splice(u,1),this.polygonPool.free(a),o=r[u],r.splice(u,1),this.polygonIndicesPool.free(o));return i},U.isConcave=function(t,e,n,i){var r=i[(e+t-1)%e]<<1,o=i[t]<<1,e=i[(t+1)%e]<<1;return!this.positiveArea(n[r],n[1+r],n[o],n[1+o],n[e],n[1+e])},U.positiveArea=function(t,e,n,i,r,o){return 0<=t*(o-i)+n*(e-o)+r*(i-e)},U.winding=function(t,e,n,i,r,o){n-=t,i-=e;return 0<=r*i-o*n+n*e-t*i?1:-1},t=U,e.Triangulator=t}(pixi_spine=pixi_spine||{}),function(t){!function(t){var e=(n.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},n.prototype.contains=function(t){return null!=this.array[0|t]},n.prototype.remove=function(t){this.array[0|t]=void 0},n.prototype.clear=function(){this.array.length=0},n);function n(){this.array=new Array}function i(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=n,this.a=i}function r(){}function o(){}t.IntSet=e,i.prototype.set=function(t,e,n,i){return this.r=t,this.g=e,this.b=n,this.a=i,this.clamp(),this},i.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},i.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},i.prototype.add=function(t,e,n,i){return this.r+=t,this.g+=e,this.b+=n,this.a+=i,this.clamp(),this},i.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},i.WHITE=new i(1,1,1,1),i.RED=new i(1,0,0,1),i.GREEN=new i(0,1,0,1),i.BLUE=new i(0,0,1,1),i.MAGENTA=new i(1,0,1,1),e=i,t.Color=e,r.clamp=function(t,e,n){return t<e?e:n<t?n:t},r.cosDeg=function(t){return Math.cos(t*r.degRad)},r.sinDeg=function(t){return Math.sin(t*r.degRad)},r.signum=function(t){return 0<t?1:t<0?-1:0},r.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},r.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},r.randomTriangular=function(t,e){return r.randomTriangularWith(t,e,.5*(t+e))},r.randomTriangularWith=function(t,e,n){var i=Math.random(),r=e-t;return i<=(n-t)/r?t+Math.sqrt(i*r*(n-t)):e-Math.sqrt((1-i)*r*(e-n))},r.PI2=2*(r.PI=3.1415927),r.radDeg=r.radiansToDegrees=180/r.PI,r.degRad=r.degreesToRadians=r.PI/180,e=r,t.MathUtils=e,o.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},e=o,t.Interpolation=e;var a,e=(__extends(s,a=e),s.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},s);function s(t){var e=a.call(this)||this;return e.power=2,e.power=t,e}t.Pow=e;var l,e=(__extends(u,l=e),u.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},u);function u(t){return l.call(this,t)||this}function h(){}function p(){}function c(t){this.items=new Array,this.instantiator=t}function d(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}function f(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function m(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.PowOut=e,h.arrayCopy=function(t,e,n,i,r){for(var o=e,a=i;o<e+r;o++,a++)n[a]=t[o]},h.setArraySize=function(t,e,n){void 0===n&&(n=0);var i=t.length;if(i==e)return t;if(i<(t.length=e))for(var r=i;r<e;r++)t[r]=n;return t},h.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:h.setArraySize(t,e,n)},h.newArray=function(t,e){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n},h.newFloatArray=function(t){if(h.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},h.newShortArray=function(t){if(h.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},h.toFloatArray=function(t){return h.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},h.toSinglePrecision=function(t){return h.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},h.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,e=h,t.Utils=e,p.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e],i=n.matrix;console.log(n.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.tx+", "+i.ty)}},e=p,t.DebugUtils=e,c.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},c.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},c.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},c.prototype.clear=function(){this.items.length=0},e=c,t.Pool=e,d.prototype.set=function(t,e){return this.x=t,this.y=e,this},d.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},d.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},e=d,t.Vector2=e,f.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},e=f,t.TimeKeeper=e,m.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},m.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},m.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},e=m,t.WindowedMean=e}(t.core||(t.core={}))}(pixi_spine=pixi_spine||{}),function(t){!function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var n,e=(__extends(i,n=e),i.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},i.prototype.computeWorldVertices=function(t,e,n,i,r,o){n=r+(n>>1)*o;var a=t.bone.skeleton,s=t.attachmentVertices,l=this.vertices,u=this.bones;if(null!=u){for(var h=0,p=0,c=0;c<e;c+=2)h+=(g=u[h])+1,p+=g;var d=a.bones;if(0==s.length)for(b=r,A=3*p;b<n;b+=o){var f=0,m=0,g=u[h++];for(g+=h;h<g;h++,A+=3){var _=d[u[h]].matrix,y=l[A],v=l[A+1],x=l[A+2];f+=(y*_.a+v*_.c+_.tx)*x,m+=(y*_.b+v*_.d+_.ty)*x}i[b]=f,i[b+1]=m}else for(var w=s,b=r,A=3*p,T=p<<1;b<n;b+=o){f=0,m=0,g=u[h++];for(g+=h;h<g;h++,A+=3,T+=2){_=d[u[h]].matrix,y=l[A]+w[T],v=l[A+1]+w[T+1],x=l[A+2];f+=(y*_.a+v*_.c+_.tx)*x,m+=(y*_.b+v*_.d+_.ty)*x}i[b]=f,i[b+1]=m}}else{0<s.length&&(l=s);for(var _,I=(_=t.bone.matrix).tx,P=_.ty,M=_.a,A=_.c,E=_.b,S=_.d,C=e,b=r;b<n;C+=2,b+=o){var y=l[C],v=l[C+1];i[b]=y*M+v*A+I,i[b+1]=y*E+v*S+P}}},i.prototype.applyDeform=function(t){return this==t},i.nextID=0,i);function i(t){t=n.call(this,t)||this;return t.id=(65535&i.nextID++)<<11,t.worldVerticesLength=0,t}t.VertexAttachment=e}(t.core||(t.core={}))}(pixi_spine=pixi_spine||{}),function(t){(t=(t=t.core||(t.core={})).AttachmentType||(t.AttachmentType={}))[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point"}(pixi_spine=pixi_spine||{}),function(t){var e,n;function i(t){t=n.call(this,t)||this;return t.color=new e.Color(1,1,1,1),t}e=t.core||(t.core={}),n=e.VertexAttachment,__extends(i,n),t=i,e.BoundingBoxAttachment=t}(pixi_spine=pixi_spine||{}),function(t){var e,n;function i(t){t=n.call(this,t)||this;return t.color=new e.Color(.2275,.2275,.8078,1),t}e=t.core||(t.core={}),n=e.VertexAttachment,__extends(i,n),t=i,e.ClippingAttachment=t}(pixi_spine=pixi_spine||{}),function(t){var d,e;function n(t){t=e.call(this,t)||this;return t.color=new d.Color(1,1,1,1),t.inheritDeform=!1,t.tempColor=new d.Color(0,0,0,0),t}d=t.core||(t.core={}),e=d.VertexAttachment,__extends(n,e),n.prototype.updateUVs=function(t,e){var n=this.regionUVs.length;if(e&&e.length==n||(e=d.Utils.newFloatArray(n)),null!=t){for(var i=t.texture._uvs,r=t.width,o=t.height,a=t.originalWidth,s=t.originalHeight,l=t.offsetX,u=t.pixiOffsetY,h=0;h<n;h+=2){var p=((p=this.regionUVs[h])*a-l)/r,c=((c=this.regionUVs[h+1])*s-u)/o;e[h]=(i.x0*(1-p)+i.x1*p)*(1-c)+(i.x3*(1-p)+i.x2*p)*c,e[h+1]=(i.y0*(1-p)+i.y1*p)*(1-c)+(i.y3*(1-p)+i.y2*p)*c}return e}},n.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},t=n,d.MeshAttachment=t}(pixi_spine=pixi_spine||{}),function(t){var e,n;function i(t){t=n.call(this,t)||this;return t.closed=!1,t.constantSpeed=!1,t.color=new e.Color(1,1,1,1),t}e=t.core||(t.core={}),n=e.VertexAttachment,__extends(i,n),t=i,e.PathAttachment=t}(pixi_spine=pixi_spine||{}),function(t){var r,e;function n(t){t=e.call(this,t)||this;return t.color=new r.Color(.38,.94,0,1),t}r=t.core||(t.core={}),e=r.VertexAttachment,__extends(n,e),n.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},n.prototype.computeWorldRotation=function(t){var e=t.matrix,n=r.MathUtils.cosDeg(this.rotation),i=r.MathUtils.sinDeg(this.rotation),t=n*e.a+i*e.c,e=n*e.b+i*e.d;return Math.atan2(e,t)*r.MathUtils.radDeg},t=n,r.PointAttachment=t}(pixi_spine=pixi_spine||{}),function(t){var e,n;function c(t){t=n.call(this,t)||this;return t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.rotation=0,t.width=0,t.height=0,t.color=new e.Color(1,1,1,1),t.offset=e.Utils.newFloatArray(8),t.uvs=e.Utils.newFloatArray(8),t.tempColor=new e.Color(1,1,1,1),t}e=t.core||(t.core={}),n=e.Attachment,__extends(c,n),c.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*e,r=n+this.region.width*t,o=i+this.region.height*e,a=this.rotation*Math.PI/180,s=Math.cos(a),l=Math.sin(a),t=n*s+this.x,e=n*l,a=i*s+this.y,n=i*l,i=r*s+this.x,r=r*l,s=o*s+this.y,o=o*l,l=this.offset;l[c.OX1]=t-n,l[c.OY1]=a+e,l[c.OX2]=t-o,l[c.OY2]=s+e,l[c.OX3]=i-o,l[c.OY3]=s+r,l[c.OX4]=i-n,l[c.OY4]=a+r},c.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},c.prototype.computeWorldVertices=function(t,e,n,i){var r=this.offset,o=t.matrix,a=o.tx,s=o.ty,l=o.a,u=o.c,h=o.b,p=o.d,t=0,t=r[c.OX1],o=r[c.OY1];e[n]=t*l+o*u+a,e[n+1]=t*h+o*p+s,n+=i,t=r[c.OX2],o=r[c.OY2],e[n]=t*l+o*u+a,e[n+1]=t*h+o*p+s,n+=i,t=r[c.OX3],o=r[c.OY3],e[n]=t*l+o*u+a,e[n+1]=t*h+o*p+s,n+=i,t=r[c.OX4],o=r[c.OY4],e[n]=t*l+o*u+a,e[n+1]=t*h+o*p+s},c.OX1=0,c.OY1=1,c.OX2=2,c.OY2=3,c.OX3=4,c.OY3=5,c.OX4=6,c.OY4=7,c.X1=0,c.Y1=1,c.C1R=2,c.C1G=3,c.C1B=4,c.C1A=5,c.U1=6,c.V1=7,c.X2=8,c.Y2=9,c.C2R=10,c.C2G=11,c.C2B=12,c.C2A=13,c.U2=14,c.V2=15,c.X3=16,c.Y3=17,c.C3R=18,c.C3G=19,c.C3B=20,c.C3A=21,c.U3=22,c.V3=23,c.X4=24,c.Y4=25,c.C4R=26,c.C4G=27,c.C4B=28,c.C4A=29,c.U4=30,c.V4=31,t=c,e.RegionAttachment=t}(pixi_spine=pixi_spine||{}),function(t){var r;function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}r=t.core||(t.core={}),e.prototype.begin=function(t){},e.prototype.transform=function(t,e,n,i){t.x+=r.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=r.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},t=e,r.JitterEffect=t}(pixi_spine=pixi_spine||{}),function(t){var l;function u(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}l=t.core||(t.core={}),u.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},u.prototype.transform=function(t,e,n,i){var r=this.angle*l.MathUtils.degreesToRadians,o=t.x-this.worldX,a=t.y-this.worldY,s=Math.sqrt(o*o+a*a);s<this.radius&&(r=u.interpolation.apply(0,r,(this.radius-s)/this.radius),s=Math.cos(r),r=Math.sin(r),t.x=s*o-r*a+this.worldX,t.y=r*o+s*a+this.worldY)},u.prototype.end=function(){},u.interpolation=new l.PowOut(2),t=u,l.SwirlEffect=t}(pixi_spine=pixi_spine||{}),function(t){PIXI.spine=t}(pixi_spine=pixi_spine||{}),function(h){var t=(e.use=function(n,i){if(!n.data||n.type!==PIXI.LoaderResource.TYPE.JSON||!n.data.bones)return i();var t=n.metadata||{},r=t?n.metadata.spineSkeletonScale:null,e=t?n.metadata.spineAtlas:null;if(!1===e)return i();if(e&&e.pages){var o=new h.core.SkeletonJson(new h.core.AtlasAttachmentLoader(e)).readSkeletonData(n.data);return n.spineData=o,n.spineAtlas=e,i()}function a(t){new h.core.TextureAtlas(t,u,function(t){var e=new h.core.SkeletonJson(new h.core.AtlasAttachmentLoader(t));r&&(e.scale=r),n.spineData=e.readSkeletonData(n.data),n.spineAtlas=t,i()})}var s=t.spineAtlasSuffix||".atlas",l=n.url.substr(0,n.url.lastIndexOf("."))+s,l=(l=n.metadata&&n.metadata.spineAtlasFile?n.metadata.spineAtlasFile:l).replace(this.baseUrl,""),o={crossOrigin:n.crossOrigin,xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:t.spineMetadata||null,parentResource:n},e={crossOrigin:n.crossOrigin,metadata:t.imageMetadata||null,parentResource:n},s=(s=n.url.substr(0,n.url.lastIndexOf("/")+1)).replace(this.baseUrl,""),u=t.images?c(t.images):t.image?c({default:t.image}):t.imageLoader?t.imageLoader(this,n.name+"_atlas_page_",s,e):p(this,n.name+"_atlas_page_",s,e);n.metadata&&n.metadata.atlasRawData?a(n.metadata.atlasRawData):this.add(n.name+"_atlas",l,o,function(t){a(t.xhr.responseText)})},e);function e(){}function p(i,r,o,a){return o&&o.lastIndexOf("/")!==o.length-1&&(o+="/"),function(t,e){var n=r+t,t=o+t;i.add(n,t,a,function(t){e(t.texture.baseTexture)})}}function c(n){return function(t,e){t=n[t]||n.default;t&&t.baseTexture?e(t.baseTexture):e(t)}}h.AtlasParser=t,h.imageLoaderAdapter=p,h.syncImageLoaderAdapter=function(t,n){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,e){e(PIXI.BaseTexture.from(t,{resourceOptions:{crossOrigin:n}}))}},h.staticImageLoader=c,PIXI.Loader.registerPlugin(t)}(pixi_spine=pixi_spine||{}),function(){var e;Math.fround||(Math.fround=Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(v){v.core.Bone.yDown=!0;var e,x=[0,0,0],n=(e=PIXI.Sprite,__extends(t,e),t);function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.region=null,t}v.SpineSprite=n;var o,a=(o=PIXI.Mesh,__extends(i,o),i);function i(t,e,n,i,r){return o.call(this,t,e,n,i,r)||this}v.SpineMesh=a;var u,r=(u=PIXI.Container,__extends(s,u),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this.updateTransform===s.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?s.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),s.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();var e=this.skeleton.slots,t=this.color,n=null,i=null;t?(n=t.light,i=t.dark):n=this.tintRgb;for(var r=0,o=e.length;r<o;r++){var a=(y=e[r]).attachment,s=this.slotContainers[r];if(a){var l,u=null,h=a.color;if(a instanceof v.core.RegionAttachment){var p,c,d=a.region;d&&(y.currentMesh&&(y.currentMesh.visible=!1,y.currentMesh=null,y.currentMeshName=void 0),y.currentSpriteName&&y.currentSpriteName===d.name||(p=d.name,y.currentSprite&&(y.currentSprite.visible=!1),y.sprites=y.sprites||{},void 0!==y.sprites[p]?y.sprites[p].visible=!0:(d=this.createSprite(y,a,p),s.addChild(d)),y.currentSprite=y.sprites[p],y.currentSpriteName=p)),s.transform?s.transform.setFromMatrix(y.bone.matrix):(c=s.localTransform||new PIXI.Matrix,y.bone.matrix.copyTo(c),s.localTransform=c,s.displayObjectUpdateTransform=w),y.currentSprite.color?u=y.currentSprite.color:(x[0]=n[0]*y.color.r*h.r,x[1]=n[1]*y.color.g*h.g,x[2]=n[2]*y.color.b*h.b,y.currentSprite.tint=PIXI.utils.rgb2hex(x)),y.currentSprite.blendMode=y.blendMode}else if(a instanceof v.core.MeshAttachment)y.currentSprite&&(y.currentSprite.visible=!1,y.currentSprite=null,y.currentSpriteName=void 0),y.currentMeshName&&y.currentMeshName===a.name||(p=a.name,y.currentMesh&&(y.currentMesh.visible=!1),y.meshes=y.meshes||{},void 0!==y.meshes[p]?y.meshes[p].visible=!0:(c=this.createMesh(y,a),s.addChild(c)),y.currentMesh=y.meshes[p],y.currentMeshName=p),a.computeWorldVerticesOld(y,y.currentMesh.vertices),y.currentMesh.color?u=y.currentMesh.color:"3"!==PIXI.VERSION[0]&&((l=y.currentMesh.tintRgb)[0]=n[0]*y.color.r*h.r,l[1]=n[1]*y.color.g*h.g,l[2]=n[2]*y.color.b*h.b),y.currentMesh.blendMode=y.blendMode;else{if(!(a instanceof v.core.ClippingAttachment)){s.visible=!1;continue}y.currentGraphics||(this.createGraphics(y,a),s.addChild(y.clippingContainer),s.addChild(y.currentGraphics)),this.updateGraphics(y,a)}s.visible=!0,u&&(l=y.color.r*h.r,a=y.color.g*h.g,h=y.color.b*h.b,u.setLight(n[0]*l+i[0]*(1-l),n[1]*a+i[1]*(1-a),n[2]*h+i[2]*(1-h)),h=y.darkColor?(l=y.darkColor.r,a=y.darkColor.g,y.darkColor.b):a=l=0,u.setDark(n[0]*l+i[0]*(1-l),n[1]*a+i[1]*(1-a),n[2]*h+i[2]*(1-h))),s.alpha=y.color.a}else s.visible=!1}for(var f=this.skeleton.drawOrder,m=null,g=null,r=0,o=f.length;r<o;r++){var _,y=e[f[r].data.index],s=this.slotContainers[f[r].data.index];g||s.parent!==this&&(s.parent.removeChild(s),s.parent=this),y.currentGraphics&&y.attachment?(g=y.clippingContainer,m=y.attachment,g.children.length=0,this.children[r]=s,m.endSlot==y.data&&(m.endSlot=null)):g?((_=this.tempClipContainers[r])||((_=this.tempClipContainers[r]=this.newContainer()).visible=!1),this.children[r]=_,s.parent=null,g.addChild(s),m.endSlot==y.data&&(g.renderable=!0,m=g=null)):this.children[r]=s}},s.prototype.setSpriteRegion=function(t,e,n){e.region=n,e.texture=n.texture,n.size?(e.scale.x=n.size.width/n.originalWidth,e.scale.y=-n.size.height/n.originalHeight):(e.scale.x=t.scaleX*t.width/n.originalWidth,e.scale.y=-t.scaleY*t.height/n.originalHeight)},s.prototype.setMeshRegion=function(t,e,n){e.region=n,e.texture=n.texture,n.texture.updateUvs(),t.updateUVs(n,e.uvs),e.dirty++},s.prototype.autoUpdateTransform=function(){var t;s.globalAutoUpdate?(this.lastTime=this.lastTime||Date.now(),t=.001*(Date.now()-this.lastTime),this.lastTime=Date.now(),this.update(t)):this.lastTime=0,PIXI.Container.prototype.updateTransform.call(this)},s.prototype.createSprite=function(t,e,n){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);i=i.texture,i=this.newSprite(i);return i.rotation=e.rotation*v.core.MathUtils.degRad,i.anchor.x=.5,i.anchor.y=.5,i.position.x=e.x,i.position.y=e.y,i.alpha=e.color.a,i.region=e.region,this.setSpriteRegion(e,i,e.region),t.sprites=t.sprites||{},t.sprites[n]=i},s.prototype.createMesh=function(t,e){var n=e.region;t.tempAttachment===e&&(n=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var i=this.newMesh(n.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.Mesh.DRAW_MODES.TRIANGLES);return i.alpha=e.color.a,i.region=e.region,this.setMeshRegion(e,i,n),t.meshes=t.meshes||{},t.meshes[e.name]=i},s.prototype.createGraphics=function(t,e){var n=this.newGraphics(),i=new PIXI.Polygon([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(i),n.renderable=!1,t.currentGraphics=n,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,n},s.prototype.updateGraphics=function(t,e){var n=t.currentGraphics.graphicsData[0].shape.points,i=e.worldVerticesLength;n.length=i,e.computeWorldVertices(t,0,i,n,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},s.prototype.hackTextureBySlotIndex=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=this.skeleton.slots[t];if(!i)return!1;var r=i.attachment,t=r.region;return e&&((t=new v.core.TextureRegion).texture=e,t.size=n),i.currentSprite&&i.currentSprite.region!=t?(this.setSpriteRegion(r,i.currentSprite,t),i.currentSprite.region=t):i.currentMesh&&i.currentMesh.region!=t?this.setMeshRegion(r,i.currentMesh,t):(i.tempRegion=t,i.tempAttachment=r),!0},s.prototype.hackTextureBySlotName=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);t=this.skeleton.findSlotIndex(t);return-1!=t&&this.hackTextureBySlotIndex(t,e,n)},s.prototype.newContainer=function(){return new PIXI.Container},s.prototype.newSprite=function(t){return new n(t)},s.prototype.newGraphics=function(){return new PIXI.Graphics},s.prototype.newMesh=function(t,e,n,i,r){return new a(t,e,n,i,r)},s.prototype.transformHack=function(){return 1},s.globalAutoUpdate=!0,s.clippingPolygon=[],s);function s(t){var e=u.call(this)||this;if(!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');e.spineData=t,e.skeleton=new v.core.Skeleton(t),e.skeleton.updateWorldTransform(),e.stateData=new v.core.AnimationStateData(t),e.state=new v.core.AnimationState(e.stateData),e.slotContainers=[],e.tempClipContainers=[];for(var n=0,i=e.skeleton.slots.length;n<i;n++){var r,o,a=e.skeleton.slots[n],s=a.attachment,l=e.newContainer();e.slotContainers.push(l),e.addChild(l),e.tempClipContainers.push(null),s instanceof v.core.RegionAttachment?(r=s.region.name,o=e.createSprite(a,s,r),a.currentSprite=o,a.currentSpriteName=r,l.addChild(o)):s instanceof v.core.MeshAttachment?(o=e.createMesh(a,s),a.currentMesh=o,a.currentMeshName=s.name,l.addChild(o)):s instanceof v.core.ClippingAttachment&&(e.createGraphics(a,s),l.addChild(a.clippingContainer),l.addChild(a.currentGraphics))}return e.autoUpdate=!0,e.tintRgb=new Float32Array([1,1,1]),e}function w(){var t=this.parent.worldTransform,e=this.worldTransform,n=this.localTransform;e.a=n.a*t.a+n.b*t.c,e.b=n.a*t.b+n.b*t.d,e.c=n.c*t.a+n.d*t.c,e.d=n.c*t.b+n.d*t.d,e.tx=n.tx*t.a+n.ty*t.c+t.tx,e.ty=n.tx*t.b+n.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}v.Spine=r}(pixi_spine=pixi_spine||{});